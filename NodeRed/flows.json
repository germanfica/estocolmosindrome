[
    {
        "id": "c2c0e0c1.0deb1",
        "type": "tab",
        "label": "Medidores",
        "disabled": false,
        "info": ""
    },
    {
        "id": "d41b2b2b.ffe75",
        "type": "tab",
        "label": "Evasion",
        "disabled": false,
        "info": ""
    },
    {
        "id": "2e3f68c7.2f3ff",
        "type": "tab",
        "label": "Control ",
        "disabled": false,
        "info": ""
    },
    {
        "id": "139909a2.e2cae6",
        "type": "tab",
        "label": "estocolmosindrome_bot",
        "disabled": false,
        "info": ""
    },
    {
        "id": "5478817a.a9116",
        "type": "tab",
        "label": "Traccar Handler",
        "disabled": false,
        "info": ""
    },
    {
        "id": "83fb4ff5.ce7c8",
        "type": "tab",
        "label": "Abrir puertas",
        "disabled": false,
        "info": ""
    },
    {
        "id": "66ae481f.c36c48",
        "type": "tab",
        "label": "Rutinas",
        "disabled": false,
        "info": ""
    },
    {
        "id": "4c35078.987c1f8",
        "type": "mqtt-broker",
        "name": "",
        "broker": "localhost",
        "port": "1883",
        "clientid": "hugo-main",
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "c36274aa.a9a458",
        "type": "ui_base",
        "theme": {
            "name": "theme-light",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#0094CE",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#097479",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": false
            },
            "customTheme": {
                "name": "Untitled Theme 1",
                "default": "#4B7930",
                "baseColor": "#4B7930",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
            },
            "themeState": {
                "base-color": {
                    "default": "#0094CE",
                    "value": "#0094CE",
                    "edited": false
                },
                "page-titlebar-backgroundColor": {
                    "value": "#0094CE",
                    "edited": false
                },
                "page-backgroundColor": {
                    "value": "#fafafa",
                    "edited": false
                },
                "page-sidebar-backgroundColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "group-textColor": {
                    "value": "#1bbfff",
                    "edited": false
                },
                "group-borderColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "group-backgroundColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "widget-textColor": {
                    "value": "#111111",
                    "edited": false
                },
                "widget-backgroundColor": {
                    "value": "#0094ce",
                    "edited": false
                },
                "widget-borderColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "base-font": {
                    "value": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
                }
            },
            "angularTheme": {
                "primary": "indigo",
                "accents": "blue",
                "warn": "red",
                "background": "grey",
                "palette": "light"
            }
        },
        "site": {
            "name": "Node-RED Dashboard",
            "hideToolbar": "false",
            "allowSwipe": "false",
            "lockMenu": "false",
            "allowTempTheme": "true",
            "dateFormat": "DD/MM/YYYY",
            "sizes": {
                "sx": 48,
                "sy": 48,
                "gx": 6,
                "gy": 6,
                "cx": 6,
                "cy": 6,
                "px": 0,
                "py": 0
            }
        }
    },
    {
        "id": "2d9c279c.6d8118",
        "type": "ui_tab",
        "name": "Síndrome de Estocolmo",
        "icon": "dashboard",
        "order": 3,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "495b2837.af3328",
        "type": "ui_group",
        "name": "Persona Detectada",
        "tab": "2d9c279c.6d8118",
        "order": 1,
        "disp": true,
        "width": "16",
        "collapse": false
    },
    {
        "id": "3d11139a.e2adac",
        "type": "ui_group",
        "name": "Registro de tiempo de trabajo",
        "tab": "2d9c279c.6d8118",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "510df368.d3c8dc",
        "type": "ui_group",
        "name": "Recorded activities",
        "tab": "2d9c279c.6d8118",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "dc91a617.de1d",
        "type": "ui_tab",
        "d": true,
        "name": "Dispositivos de evasión",
        "icon": "dashboard",
        "order": 1,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "2030a344.81f834",
        "type": "ui_group",
        "name": "Shape Shifting Mask - Estado",
        "tab": "dc91a617.de1d",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "9018b4b.23d3448",
        "type": "ui_group",
        "name": "Anti signos vitales - Estado",
        "tab": "dc91a617.de1d",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "bc4ef73c.32b6a8",
        "type": "ui_group",
        "name": "Anti Camara",
        "tab": "dc91a617.de1d",
        "order": 3,
        "disp": true,
        "width": "12",
        "collapse": false
    },
    {
        "id": "c237ad78.44b508",
        "type": "ui_group",
        "name": "Control de Shape Shifting Mask",
        "tab": "dc91a617.de1d",
        "order": 4,
        "disp": true,
        "width": 12,
        "collapse": false
    },
    {
        "id": "ef0586c8.097518",
        "type": "ui_tab",
        "name": "Controla el departamento del futuro",
        "icon": "dashboard",
        "order": 2,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "2d6ab607.03dbb2",
        "type": "ui_group",
        "name": "Acciones",
        "tab": "ef0586c8.097518",
        "order": 4,
        "disp": true,
        "width": 6,
        "collapse": false
    },
    {
        "id": "74be730e.33ff4c",
        "type": "ui_group",
        "name": "Comandos de alexa",
        "tab": "ef0586c8.097518",
        "order": 3,
        "disp": true,
        "width": 6,
        "collapse": false
    },
    {
        "id": "457235cd.67e71c",
        "type": "ui_group",
        "name": "Contexto",
        "tab": "ef0586c8.097518",
        "order": 2,
        "disp": true,
        "width": 6,
        "collapse": false
    },
    {
        "id": "1e6be336.24c9e5",
        "type": "ui_group",
        "name": "Focos",
        "tab": "ef0586c8.097518",
        "order": 5,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "8feab182.895b9",
        "type": "ui_group",
        "name": "En vivo",
        "tab": "ef0586c8.097518",
        "order": 6,
        "disp": true,
        "width": 6,
        "collapse": false
    },
    {
        "id": "f0d39309.5d582",
        "type": "ui_group",
        "name": "Permisos",
        "tab": "ef0586c8.097518",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "da70a51bc78adb2a",
        "type": "telegram bot",
        "botname": "EstocolmoSindrome_bot",
        "usernames": "",
        "chatids": "",
        "baseapiurl": "",
        "updatemode": "polling",
        "pollinterval": "300",
        "usesocks": false,
        "sockshost": "",
        "socksport": "6667",
        "socksusername": "anonymous",
        "sockspassword": "",
        "bothost": "",
        "botpath": "",
        "localbotport": "8443",
        "publicbotport": "8443",
        "privatekey": "",
        "certificate": "",
        "useselfsignedcertificate": false,
        "sslterminated": false,
        "verboselogging": false
    },
    {
        "id": "1a27214b.e39c3f",
        "type": "MySQLdatabase",
        "name": "",
        "host": "127.0.0.1",
        "port": "3306",
        "db": "estocolmosindrome",
        "tz": "UTC-6",
        "charset": "UTF8"
    },
    {
        "id": "742d874.1892078",
        "type": "ui_spacer",
        "z": "66ae481f.c36c48",
        "name": "spacer",
        "group": "74be730e.33ff4c",
        "order": 2,
        "width": 3,
        "height": 1
    },
    {
        "id": "292e4d7c.349622",
        "type": "ui_group",
        "name": "Estado de animo",
        "tab": "2d9c279c.6d8118",
        "order": 4,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "1a849c08.2ae584",
        "type": "ui_spacer",
        "z": "c2c0e0c1.0deb1",
        "name": "spacer",
        "group": "510df368.d3c8dc",
        "order": 4,
        "width": 3,
        "height": 1
    },
    {
        "id": "85768155.a41d8",
        "type": "ui_spacer",
        "z": "c2c0e0c1.0deb1",
        "name": "spacer",
        "group": "510df368.d3c8dc",
        "order": 5,
        "width": 3,
        "height": 1
    },
    {
        "id": "67c1f34.161f50c",
        "type": "ui_spacer",
        "z": "c2c0e0c1.0deb1",
        "name": "spacer",
        "group": "510df368.d3c8dc",
        "order": 6,
        "width": 3,
        "height": 1
    },
    {
        "id": "6f3e30c.eb85ed",
        "type": "ui_spacer",
        "z": "c2c0e0c1.0deb1",
        "name": "spacer",
        "group": "510df368.d3c8dc",
        "order": 7,
        "width": 6,
        "height": 1
    },
    {
        "id": "27ae81e6.590c3e",
        "type": "mqtt in",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "topic": "hugo/se/main",
        "qos": "2",
        "datatype": "auto",
        "broker": "4c35078.987c1f8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "x": 130,
        "y": 240,
        "wires": [
            [
                "bf7dd07c.42f4d"
            ]
        ]
    },
    {
        "id": "bf7dd07c.42f4d",
        "type": "json",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "property": "payload",
        "action": "obj",
        "pretty": false,
        "x": 450,
        "y": 240,
        "wires": [
            [
                "b8ea15c4.74d638",
                "40c9cee7.836be"
            ]
        ]
    },
    {
        "id": "986f3bc1.d1a1e8",
        "type": "ui_text_input",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "label": "Persona Detectada",
        "tooltip": "",
        "group": "495b2837.af3328",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "mode": "text",
        "delay": 300,
        "topic": "topic",
        "topicType": "msg",
        "x": 990,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "62d7f239.ab755c",
        "type": "ui_chart",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "group": "495b2837.af3328",
        "order": 2,
        "width": 0,
        "height": 0,
        "label": "Trabajo",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "bezier",
        "nodata": "Trabajo",
        "dot": false,
        "ymin": "0",
        "ymax": "1",
        "removeOlder": "1",
        "removeOlderPoints": "",
        "removeOlderUnit": "86400",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "x": 700,
        "y": 960,
        "wires": [
            []
        ]
    },
    {
        "id": "b8ea15c4.74d638",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "global.set (\"personadetectadaW\",msg.payload.predictions[0].userid);\nglobal.set (\"confidenceW\", msg.payload.predictions[0].confidence);\nmsg.payload = msg.payload.predictions[0].userid;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 720,
        "y": 240,
        "wires": [
            [
                "986f3bc1.d1a1e8",
                "c0c53d57.e4b1f"
            ]
        ]
    },
    {
        "id": "66a2cc4b.30f074",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "msg.topic = \"Hugo Trabajo\";\nmsg.payload = global.get (\"confidenceW\");\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 960,
        "wires": [
            [
                "62d7f239.ab755c"
            ]
        ]
    },
    {
        "id": "fd53fb5e.685b88",
        "type": "mqtt in",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "topic": "hugo/se/main-record",
        "qos": "2",
        "datatype": "auto",
        "broker": "4c35078.987c1f8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "x": 190,
        "y": 1440,
        "wires": [
            [
                "61814314.a3b70c"
            ]
        ]
    },
    {
        "id": "91e8ed4c.f7e57",
        "type": "inject",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "00 06 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 150,
        "y": 120,
        "wires": [
            [
                "72693418.d348ec"
            ]
        ]
    },
    {
        "id": "72693418.d348ec",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "global.set('today', msg.payload);\nglobal.set('firstRecord',0);\nglobal.set('worktime',0);\nglobal.set('lastRecord',0);\nglobal.set('lastStop',0);\nglobal.set('firstRecordE',0);\nglobal.set('chilltime',0);\nglobal.set('lastRecordE',0);\nglobal.set('lastStopE',0);\nglobal.set('firstRecordO',0);\nglobal.set('ousidetime',0);\nglobal.set('lastRecordO',0);\nglobal.set('lastStopO',0);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 460,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "61814314.a3b70c",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "\nif(global.get('firstRecord')== 0)\n{\n    global.set ('firstRecord',global.get('timeNow'));\n}\nglobal.set('lastRecord',global.get('timeNow'));\nif ((global.get('lastRecord') - global.get('lastStop'))<300000)\n{\n    global.set('worktime', global.get('worktime')+(global.get('lastRecord') - global.get('lastStop')));\n}\nmsg.payload = global.get('lastRecord');\nglobal.set(\"confidenceE\", 0);\n/*\nglobal.set (\"personadetectadaE\", msg.payload.predictions[0].userid);\nglobal.set (\"confidenceE\", msg.payload.predictions[0].confidence);\nmsg.topic = global.get (\"personadetectada\");\nmsg.payload = global.get (\"confidence\");\n*/\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 420,
        "y": 1440,
        "wires": [
            [
                "29e21012.03468"
            ]
        ]
    },
    {
        "id": "adb48ca3.0d06a",
        "type": "inject",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 150,
        "y": 760,
        "wires": [
            [
                "541f603d.9f2af",
                "bc9f28ec.327378",
                "66a2cc4b.30f074",
                "57458d7d.4d7cb4",
                "12f0077f.48ad59",
                "c9656ef2.2ee49",
                "1d4cef70.932a51"
            ]
        ]
    },
    {
        "id": "541f603d.9f2af",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "Set timeNow & get firstRecord",
        "func": "global.set ('timeNow',msg.payload);\nmsg.payload = global.get ('firstRecord');\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 760,
        "wires": [
            [
                "3fc30989.21e066"
            ]
        ]
    },
    {
        "id": "3c195095.58d7f",
        "type": "comment",
        "z": "c2c0e0c1.0deb1",
        "name": "Detección de 23 en camara desktop",
        "info": "",
        "x": 200,
        "y": 200,
        "wires": []
    },
    {
        "id": "2781c377.456a4c",
        "type": "comment",
        "z": "c2c0e0c1.0deb1",
        "name": "Cron",
        "info": "",
        "x": 120,
        "y": 80,
        "wires": []
    },
    {
        "id": "decb93ae.6be1",
        "type": "comment",
        "z": "c2c0e0c1.0deb1",
        "name": "Graficar tabajo",
        "info": "",
        "x": 130,
        "y": 720,
        "wires": []
    },
    {
        "id": "f093deab.95168",
        "type": "comment",
        "z": "c2c0e0c1.0deb1",
        "name": "On Record Detect - Calcula el tiempo trabajado",
        "info": "",
        "x": 280,
        "y": 1400,
        "wires": []
    },
    {
        "id": "b53ecd41.8fa5a",
        "type": "mqtt in",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "topic": "hugo/se/main-stop",
        "qos": "2",
        "datatype": "auto",
        "broker": "4c35078.987c1f8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "x": 190,
        "y": 1500,
        "wires": [
            [
                "4b12ff33.5ba71",
                "b03658d2.e1a4a8"
            ]
        ]
    },
    {
        "id": "4b12ff33.5ba71",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "global.set('lastStop',global.get('timeNow'));\nmsg.payload = (global.get('lastStop') - global.get('lastRecord'));\nglobal.set('worktime', global.get('worktime')+msg.payload);\nif (global.get (\"timeNow\") - global.get (\"lastStop\") > 600000) \n{\n    global.set (\"confidenceW\", 0);\n}\nreturn msg;\n\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 420,
        "y": 1500,
        "wires": [
            []
        ]
    },
    {
        "id": "95c57fc6.2038c",
        "type": "ui_gauge",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "group": "510df368.d3c8dc",
        "order": 1,
        "width": 3,
        "height": 3,
        "gtype": "wave",
        "title": "WorkTime",
        "label": "Horas",
        "format": "{{value}}",
        "min": 0,
        "max": "15",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "8",
        "seg2": "10",
        "x": 700,
        "y": 800,
        "wires": []
    },
    {
        "id": "bc9f28ec.327378",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "Get worktime",
        "func": "msg.payload = global.get ('worktime')/1000/60/60;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 800,
        "wires": [
            [
                "95c57fc6.2038c",
                "1d219cf7.1985d3"
            ]
        ]
    },
    {
        "id": "40c9cee7.836be",
        "type": "debug",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 730,
        "y": 200,
        "wires": []
    },
    {
        "id": "1d219cf7.1985d3",
        "type": "debug",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 710,
        "y": 920,
        "wires": []
    },
    {
        "id": "3fc30989.21e066",
        "type": "ui_text",
        "z": "c2c0e0c1.0deb1",
        "d": true,
        "group": "510df368.d3c8dc",
        "order": 8,
        "width": 0,
        "height": 0,
        "name": "Show firstRecord",
        "label": "firstRecord",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 730,
        "y": 760,
        "wires": []
    },
    {
        "id": "e92dadfb.34e66",
        "type": "ui_button",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "group": "2030a344.81f834",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "On/Off",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 290,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "6300560d.57f8c8",
        "type": "ui_switch",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "label": "Conexión a Internet",
        "tooltip": "",
        "group": "2030a344.81f834",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 330,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "bce73a2f.4e613",
        "type": "ui_gauge",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "group": "2030a344.81f834",
        "order": 1,
        "width": 6,
        "height": 4,
        "gtype": "gage",
        "title": "Bateria",
        "label": "%",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#ff0000",
            "#e6e600",
            "#008000"
        ],
        "seg1": "20",
        "seg2": "30",
        "x": 300,
        "y": 160,
        "wires": []
    },
    {
        "id": "bdfa9f9c.084838",
        "type": "comment",
        "z": "d41b2b2b.ffe75",
        "name": "Shape Shifting Mask - Estado",
        "info": "",
        "x": 160,
        "y": 60,
        "wires": []
    },
    {
        "id": "554f039f.2c4254",
        "type": "ui_switch",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "label": "Estado de funcionamiento",
        "tooltip": "",
        "group": "2030a344.81f834",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 360,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "655b900c.159cf",
        "type": "comment",
        "z": "d41b2b2b.ffe75",
        "name": "Evasión de monitoreo",
        "info": "",
        "x": 660,
        "y": 60,
        "wires": []
    },
    {
        "id": "7643043f.384ba4",
        "type": "ui_gauge",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "group": "9018b4b.23d3448",
        "order": 1,
        "width": 6,
        "height": 4,
        "gtype": "gage",
        "title": "Bateria",
        "label": "%",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#ff0000",
            "#e6e600",
            "#008000"
        ],
        "seg1": "20",
        "seg2": "40",
        "x": 800,
        "y": 160,
        "wires": []
    },
    {
        "id": "e008f753.3239e",
        "type": "ui_switch",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "label": "Conexión a Internet",
        "tooltip": "",
        "group": "9018b4b.23d3448",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 830,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "61f6608a.d65f3",
        "type": "ui_button",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "group": "9018b4b.23d3448",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "On/Off",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 790,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "689c0337.63e40c",
        "type": "ui_switch",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "label": "Estado de funcionamiento",
        "tooltip": "",
        "group": "9018b4b.23d3448",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 860,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "226c82a8.27a4c6",
        "type": "inject",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "85",
        "payloadType": "num",
        "x": 120,
        "y": 160,
        "wires": [
            [
                "bce73a2f.4e613"
            ]
        ]
    },
    {
        "id": "959d5170.bf3e88",
        "type": "inject",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "38",
        "payloadType": "num",
        "x": 630,
        "y": 160,
        "wires": [
            [
                "7643043f.384ba4"
            ]
        ]
    },
    {
        "id": "d804d704.b3c8c",
        "type": "comment",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "info": "",
        "x": 1100,
        "y": 60,
        "wires": []
    },
    {
        "id": "63623aea.304344",
        "type": "ui_button",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "group": "bc4ef73c.32b6a8",
        "order": 4,
        "width": 4,
        "height": 1,
        "passthru": false,
        "label": "On/Off Camara Escritorio",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 1150,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "907248b8.4754",
        "type": "ui_button",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "group": "bc4ef73c.32b6a8",
        "order": 1,
        "width": 4,
        "height": 1,
        "passthru": false,
        "label": "On/Off Camara Librero",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 1150,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "b25312f8.955fa8",
        "type": "ui_button",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "group": "bc4ef73c.32b6a8",
        "order": 7,
        "width": 4,
        "height": 1,
        "passthru": false,
        "label": "On/Off Camara Sala",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 1140,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "7dceb3e8.4c8b1c",
        "type": "ui_button",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "group": "bc4ef73c.32b6a8",
        "order": 10,
        "width": 4,
        "height": 1,
        "passthru": false,
        "label": "On/Off Camara Cocina",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 1150,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "ed208c3c.6a8ee8",
        "type": "ui_button",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "group": "bc4ef73c.32b6a8",
        "order": 13,
        "width": 4,
        "height": 1,
        "passthru": false,
        "label": "On/Off Camara Puerta",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 1140,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "5b7a4df7.a67134",
        "type": "ui_button",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "group": "bc4ef73c.32b6a8",
        "order": 16,
        "width": 4,
        "height": 1,
        "passthru": false,
        "label": "On/Off Camara Habitación",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 1160,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "d6598b48.507aa",
        "type": "ui_switch",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "label": "Estado de funcionamiento",
        "tooltip": "",
        "group": "bc4ef73c.32b6a8",
        "order": 2,
        "width": 4,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 1440,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "b429c766.0a3ef8",
        "type": "ui_switch",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "label": "Conexión a Internet",
        "tooltip": "",
        "group": "bc4ef73c.32b6a8",
        "order": 12,
        "width": 4,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 1710,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "dcf8b236.c91b18",
        "type": "ui_switch",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "label": "Estado de funcionamiento",
        "tooltip": "",
        "group": "bc4ef73c.32b6a8",
        "order": 17,
        "width": 4,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 1440,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "6f87c79a.f76da",
        "type": "ui_switch",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "label": "Conexión a Internet",
        "tooltip": "",
        "group": "bc4ef73c.32b6a8",
        "order": 9,
        "width": 4,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 1710,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "96bbf056.582f9",
        "type": "ui_switch",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "label": "Estado de funcionamiento",
        "tooltip": "",
        "group": "bc4ef73c.32b6a8",
        "order": 11,
        "width": 4,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 1440,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "6a40af84.1da328",
        "type": "ui_switch",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "label": "Conexión a Internet",
        "tooltip": "",
        "group": "bc4ef73c.32b6a8",
        "order": 6,
        "width": 4,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 1710,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "ef8a03f4.9ed4d",
        "type": "ui_switch",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "label": "Estado de funcionamiento",
        "tooltip": "",
        "group": "bc4ef73c.32b6a8",
        "order": 5,
        "width": 4,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 1440,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "4038767c.67fc68",
        "type": "ui_switch",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "label": "Conexión a Internet",
        "tooltip": "",
        "group": "bc4ef73c.32b6a8",
        "order": 18,
        "width": 4,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 1710,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "d0452699.b53e3",
        "type": "ui_switch",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "label": "Estado de funcionamiento",
        "tooltip": "",
        "group": "bc4ef73c.32b6a8",
        "order": 8,
        "width": 4,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 1440,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "53ffbd6d.4d7ba4",
        "type": "ui_switch",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "label": "Conexión a Internet",
        "tooltip": "",
        "group": "bc4ef73c.32b6a8",
        "order": 15,
        "width": 4,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 1710,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "cde11233.ff296",
        "type": "ui_switch",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "label": "Estado de funcionamiento",
        "tooltip": "",
        "group": "bc4ef73c.32b6a8",
        "order": 14,
        "width": 4,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 1440,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "c17130a3.636f",
        "type": "ui_switch",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "label": "Conexión a Internet",
        "tooltip": "",
        "group": "bc4ef73c.32b6a8",
        "order": 3,
        "width": 4,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 1710,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "3cd2b74.9c52c48",
        "type": "ui_dropdown",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "label": "Escena",
        "tooltip": "",
        "place": "Select option",
        "group": "bc4ef73c.32b6a8",
        "order": 19,
        "width": 0,
        "height": 0,
        "passthru": true,
        "multiple": false,
        "options": [
            {
                "label": "",
                "value": "Trabajando",
                "type": "str"
            },
            {
                "label": "",
                "value": "Cocinando",
                "type": "str"
            },
            {
                "label": "",
                "value": "Comiendo",
                "type": "str"
            },
            {
                "label": "",
                "value": "Ausente",
                "type": "str"
            },
            {
                "label": "",
                "value": "Durmiendo",
                "type": "str"
            },
            {
                "label": "",
                "value": "",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "x": 1100,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "ff94e1e.379b42",
        "type": "comment",
        "z": "d41b2b2b.ffe75",
        "name": "Shape Shifting mask",
        "info": "",
        "x": 130,
        "y": 460,
        "wires": []
    },
    {
        "id": "b9441045.e3f5e",
        "type": "ui_button",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "group": "c237ad78.44b508",
        "order": 4,
        "width": 4,
        "height": 1,
        "passthru": false,
        "label": "Persona 1",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 110,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "b18e502e.0ab0d",
        "type": "ui_button",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "group": "c237ad78.44b508",
        "order": 5,
        "width": 4,
        "height": 1,
        "passthru": false,
        "label": "Persona 2",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 110,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "54b9a43d.a45374",
        "type": "ui_button",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "group": "c237ad78.44b508",
        "order": 6,
        "width": 4,
        "height": 1,
        "passthru": false,
        "label": "Persona 3",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 110,
        "y": 600,
        "wires": [
            []
        ]
    },
    {
        "id": "bb742dfb.f9e138",
        "type": "ui_button",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "group": "c237ad78.44b508",
        "order": 7,
        "width": 4,
        "height": 1,
        "passthru": false,
        "label": "Feliz",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 90,
        "y": 640,
        "wires": [
            []
        ]
    },
    {
        "id": "490560a4.7bb6b",
        "type": "ui_button",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "group": "c237ad78.44b508",
        "order": 11,
        "width": 4,
        "height": 1,
        "passthru": false,
        "label": "Calmado",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 100,
        "y": 680,
        "wires": [
            []
        ]
    },
    {
        "id": "8e9acc5b.bb1bd",
        "type": "ui_button",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "group": "c237ad78.44b508",
        "order": 10,
        "width": 4,
        "height": 1,
        "passthru": false,
        "label": "Enojado",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 280,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "d970c11c.257af8",
        "type": "ui_button",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "group": "c237ad78.44b508",
        "order": 9,
        "width": 4,
        "height": 1,
        "passthru": false,
        "label": "Cansado",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 280,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "9c7e2939.5faaa",
        "type": "ui_button",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "group": "c237ad78.44b508",
        "order": 12,
        "width": 4,
        "height": 1,
        "passthru": false,
        "label": "Triste",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 270,
        "y": 600,
        "wires": [
            []
        ]
    },
    {
        "id": "75c2e420.9165fc",
        "type": "ui_button",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "group": "c237ad78.44b508",
        "order": 8,
        "width": 4,
        "height": 1,
        "passthru": false,
        "label": "Estresado",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 290,
        "y": 640,
        "wires": [
            []
        ]
    },
    {
        "id": "759eaa7e.bb59d4",
        "type": "ui_button",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "group": "c237ad78.44b508",
        "order": 2,
        "width": 4,
        "height": 1,
        "passthru": false,
        "label": "Abrir",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 270,
        "y": 680,
        "wires": [
            []
        ]
    },
    {
        "id": "1778ea15.5501a6",
        "type": "ui_button",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "group": "c237ad78.44b508",
        "order": 3,
        "width": 4,
        "height": 1,
        "passthru": false,
        "label": "Cerrar",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 90,
        "y": 720,
        "wires": [
            []
        ]
    },
    {
        "id": "7806debe.5a1858",
        "type": "ui_button",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "group": "c237ad78.44b508",
        "order": 1,
        "width": 4,
        "height": 1,
        "passthru": false,
        "label": "Demo",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 270,
        "y": 720,
        "wires": [
            []
        ]
    },
    {
        "id": "f245c3a2.25a3c",
        "type": "comment",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "info": "",
        "x": 500,
        "y": 60,
        "wires": []
    },
    {
        "id": "623b97dc.04ed58",
        "type": "ui_switch",
        "z": "2e3f68c7.2f3ff",
        "d": true,
        "name": "",
        "label": "TV On/Off",
        "tooltip": "",
        "group": "74be730e.33ff4c",
        "order": 1,
        "width": 3,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "payload",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 490,
        "y": 160,
        "wires": [
            [
                "fe02ae6d.d374e"
            ]
        ]
    },
    {
        "id": "92669c1d.f15208",
        "type": "ui_button",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "group": "2d6ab607.03dbb2",
        "order": 5,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Tomar un café",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 500,
        "y": 2260,
        "wires": [
            [
                "372f485b.c50f48"
            ]
        ]
    },
    {
        "id": "ea5e3c92.fb5ba",
        "type": "ui_switch",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "label": "Foco Sala",
        "tooltip": "",
        "group": "1e6be336.24c9e5",
        "order": 5,
        "width": 6,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 490,
        "y": 840,
        "wires": [
            [
                "2b885981.61ac76"
            ]
        ]
    },
    {
        "id": "4defac05.73e454",
        "type": "ui_slider",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "label": "Brillo foco sala",
        "tooltip": "",
        "group": "1e6be336.24c9e5",
        "order": 6,
        "width": 6,
        "height": 1,
        "passthru": true,
        "outs": "end",
        "topic": "topic",
        "topicType": "msg",
        "min": "10",
        "max": "100",
        "step": "10",
        "x": 500,
        "y": 920,
        "wires": [
            [
                "ab7c492a.747be8"
            ]
        ]
    },
    {
        "id": "4aec905b.4aaee",
        "type": "ui_switch",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "label": "Foco Pasillo",
        "tooltip": "",
        "group": "1e6be336.24c9e5",
        "order": 7,
        "width": 6,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 490,
        "y": 960,
        "wires": [
            [
                "c1cef348.6a0cd"
            ]
        ]
    },
    {
        "id": "9034188c.950e08",
        "type": "ui_switch",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "label": "Foco Oficina",
        "tooltip": "",
        "group": "1e6be336.24c9e5",
        "order": 9,
        "width": 6,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 490,
        "y": 1080,
        "wires": [
            [
                "9c6d1780.bd11c8"
            ]
        ]
    },
    {
        "id": "320aac71.9c44c4",
        "type": "ui_switch",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "label": "Foco Baño",
        "tooltip": "",
        "group": "1e6be336.24c9e5",
        "order": 13,
        "width": 6,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 490,
        "y": 1320,
        "wires": [
            [
                "ac34b62b.a8a888"
            ]
        ]
    },
    {
        "id": "bec668c4.eff1",
        "type": "ui_slider",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "label": "Brillo foco Pasillo",
        "tooltip": "",
        "group": "1e6be336.24c9e5",
        "order": 8,
        "width": 6,
        "height": 1,
        "passthru": true,
        "outs": "end",
        "topic": "topic",
        "topicType": "msg",
        "min": "10",
        "max": "100",
        "step": "10",
        "x": 510,
        "y": 1040,
        "wires": [
            [
                "a5f143c6.a790c8"
            ]
        ]
    },
    {
        "id": "5b433097.60cb88",
        "type": "ui_slider",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "label": "Brillo foco Oficina",
        "tooltip": "",
        "group": "1e6be336.24c9e5",
        "order": 10,
        "width": 6,
        "height": 1,
        "passthru": true,
        "outs": "end",
        "topic": "topic",
        "topicType": "msg",
        "min": "10",
        "max": "100",
        "step": "10",
        "x": 510,
        "y": 1160,
        "wires": [
            [
                "fa358433.c2e228"
            ]
        ]
    },
    {
        "id": "8220afcf.de83a",
        "type": "ui_slider",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "label": "Brillo foco Cocina",
        "tooltip": "",
        "group": "1e6be336.24c9e5",
        "order": 12,
        "width": 6,
        "height": 1,
        "passthru": true,
        "outs": "end",
        "topic": "topic",
        "topicType": "msg",
        "min": "10",
        "max": "100",
        "step": "10",
        "x": 510,
        "y": 1280,
        "wires": [
            [
                "b27fa808.24e398"
            ]
        ]
    },
    {
        "id": "d7de0f14.b96788",
        "type": "ui_slider",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "label": "Brillo foco lavamanos",
        "tooltip": "",
        "group": "1e6be336.24c9e5",
        "order": 14,
        "width": 6,
        "height": 1,
        "passthru": true,
        "outs": "end",
        "topic": "topic",
        "topicType": "msg",
        "min": "10",
        "max": "100",
        "step": "10",
        "x": 520,
        "y": 1400,
        "wires": [
            [
                "eabb75fc.251d48"
            ]
        ]
    },
    {
        "id": "eee45340.4a9f4",
        "type": "ui_switch",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "label": "Foco Cocina",
        "tooltip": "",
        "group": "1e6be336.24c9e5",
        "order": 11,
        "width": 6,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 490,
        "y": 1200,
        "wires": [
            [
                "9b0c79ad.122358"
            ]
        ]
    },
    {
        "id": "ac3c7867.507fa",
        "type": "ui_button",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "group": "74be730e.33ff4c",
        "order": 3,
        "width": 6,
        "height": 1,
        "passthru": true,
        "label": "Enviar comando",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 500,
        "y": 240,
        "wires": [
            [
                "35b90e5d.c7c972"
            ]
        ]
    },
    {
        "id": "c7b52406.8089e",
        "type": "ui_text_input",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "label": "",
        "tooltip": "",
        "group": "74be730e.33ff4c",
        "order": 4,
        "width": 6,
        "height": 1,
        "passthru": true,
        "mode": "text",
        "delay": "300",
        "topic": "payload",
        "topicType": "msg",
        "x": 1040,
        "y": 280,
        "wires": [
            [
                "19b706a3.cdc399"
            ]
        ]
    },
    {
        "id": "1e3effe1.53e7e",
        "type": "ui_button",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "group": "74be730e.33ff4c",
        "order": 5,
        "width": 6,
        "height": 1,
        "passthru": true,
        "label": "Poner musica aleatoria en alexa",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 550,
        "y": 320,
        "wires": [
            [
                "f4faab17.0c7fd"
            ]
        ]
    },
    {
        "id": "f64070e1.63711",
        "type": "ui_switch",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "label": "Lampara de mesa",
        "tooltip": "",
        "group": "1e6be336.24c9e5",
        "order": 3,
        "width": 6,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 510,
        "y": 600,
        "wires": [
            [
                "54587617.1caed8"
            ]
        ]
    },
    {
        "id": "c72986c4.5b4228",
        "type": "ui_switch",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "label": "Lampara derecha (switch 1)",
        "tooltip": "",
        "group": "1e6be336.24c9e5",
        "order": 4,
        "width": 6,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 540,
        "y": 680,
        "wires": [
            [
                "c00b2be7.13f088"
            ]
        ]
    },
    {
        "id": "e15f4bf2.6807f",
        "type": "ui_switch",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "label": "Lampara de piso",
        "tooltip": "",
        "group": "1e6be336.24c9e5",
        "order": 1,
        "width": 6,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "payload",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 510,
        "y": 520,
        "wires": [
            [
                "1d4535c1.7afe7a"
            ]
        ]
    },
    {
        "id": "fe159c4.cb6f86",
        "type": "ui_switch",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "label": "Lampara izquierda (switch 2)",
        "tooltip": "",
        "group": "1e6be336.24c9e5",
        "order": 2,
        "width": 6,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 540,
        "y": 760,
        "wires": [
            [
                "c3259ab6.2e3078"
            ]
        ]
    },
    {
        "id": "cedfb042.60c86",
        "type": "ui_audio",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "group": "74be730e.33ff4c",
        "voice": "Microsoft Dalia Online (Natural) - Spanish (Mexico)",
        "always": true,
        "x": 1620,
        "y": 1240,
        "wires": []
    },
    {
        "id": "fe02ae6d.d374e",
        "type": "switch",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "true",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "false",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1030,
        "y": 160,
        "wires": [
            [
                "ba01a703.f0e458"
            ],
            [
                "b82bf557.a4f648"
            ]
        ]
    },
    {
        "id": "ba01a703.f0e458",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Alexa. Enciende la tele",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1320,
        "y": 160,
        "wires": [
            [
                "cedfb042.60c86"
            ]
        ]
    },
    {
        "id": "b82bf557.a4f648",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Alexa, apaga la tele",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1320,
        "y": 200,
        "wires": [
            [
                "cedfb042.60c86"
            ]
        ]
    },
    {
        "id": "92c3abf9.24c6f8",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Alexa. Pon musica.",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1320,
        "y": 320,
        "wires": [
            [
                "cedfb042.60c86"
            ]
        ]
    },
    {
        "id": "f1c7ea77.bd86d8",
        "type": "switch",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "true",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "false",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1030,
        "y": 520,
        "wires": [
            [
                "c22e8e1c.265d2"
            ],
            [
                "ec2328ec.5ebff8"
            ]
        ]
    },
    {
        "id": "c22e8e1c.265d2",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Alexa, enciende lampara de piso",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1320,
        "y": 520,
        "wires": [
            [
                "cedfb042.60c86"
            ]
        ]
    },
    {
        "id": "ec2328ec.5ebff8",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Alexa, apaga lampara de piso",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1320,
        "y": 560,
        "wires": [
            [
                "cedfb042.60c86"
            ]
        ]
    },
    {
        "id": "19b706a3.cdc399",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "global.set (\"customMsg\", msg.payload);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1340,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "92693be9.877dd8",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "msg.payload = global.get (\"customMsg\");\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1340,
        "y": 240,
        "wires": [
            [
                "cedfb042.60c86"
            ]
        ]
    },
    {
        "id": "154f2e47.a350f2",
        "type": "ui_button",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "group": "74be730e.33ff4c",
        "order": 6,
        "width": 6,
        "height": 1,
        "passthru": true,
        "label": "Detener la musica",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 510,
        "y": 360,
        "wires": [
            [
                "c9424c27.f9af98"
            ]
        ]
    },
    {
        "id": "6e02c659.7935a8",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Alexa, detener la musica",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1320,
        "y": 360,
        "wires": [
            [
                "cedfb042.60c86"
            ]
        ]
    },
    {
        "id": "7fc06c3e.c99ae4",
        "type": "ui_button",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "group": "74be730e.33ff4c",
        "order": 7,
        "width": 6,
        "height": 1,
        "passthru": false,
        "label": "Reproducir canción específica",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 550,
        "y": 400,
        "wires": [
            [
                "69a17bd2.389764"
            ]
        ]
    },
    {
        "id": "1bffb812.3d8cc8",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "msg.payload = (\"Alexa, reproduce \" + global.get (\"customSong\") + \", en spotify\");\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1340,
        "y": 400,
        "wires": [
            [
                "cedfb042.60c86"
            ]
        ]
    },
    {
        "id": "27ecb0ac.e2247",
        "type": "ui_text_input",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "label": "",
        "tooltip": "",
        "group": "74be730e.33ff4c",
        "order": 8,
        "width": 6,
        "height": 1,
        "passthru": true,
        "mode": "text",
        "delay": 300,
        "topic": "topic",
        "topicType": "msg",
        "x": 1040,
        "y": 440,
        "wires": [
            [
                "5671450c.b0c45c"
            ]
        ]
    },
    {
        "id": "5671450c.b0c45c",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "global.set(\"customSong\", msg.payload);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1340,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "dcb434ae.6f52b8",
        "type": "ui_slider",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "label": "Cambiar volumen de alexa",
        "tooltip": "",
        "group": "74be730e.33ff4c",
        "order": 9,
        "width": 6,
        "height": 1,
        "passthru": true,
        "outs": "end",
        "topic": "topic",
        "topicType": "msg",
        "min": "15",
        "max": "35",
        "step": "5",
        "x": 540,
        "y": 480,
        "wires": [
            [
                "7ca2193f.3e6718"
            ]
        ]
    },
    {
        "id": "a5234a22.693468",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1320,
        "y": 480,
        "wires": [
            [
                "cedfb042.60c86"
            ]
        ]
    },
    {
        "id": "b7d8ff71.d7aba",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "msg.payload = (\"Alexa, volumen \" + msg.payload + \" por ciento\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1040,
        "y": 480,
        "wires": [
            [
                "a5234a22.693468"
            ]
        ]
    },
    {
        "id": "ffff05d8.854988",
        "type": "switch",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "true",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "false",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1030,
        "y": 600,
        "wires": [
            [
                "b24b95d1.07d0d8"
            ],
            [
                "881a118b.d534d"
            ]
        ]
    },
    {
        "id": "b24b95d1.07d0d8",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Alexa, enciende lampara de mesa",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1320,
        "y": 600,
        "wires": [
            [
                "cedfb042.60c86"
            ]
        ]
    },
    {
        "id": "881a118b.d534d",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Alexa, apaga lampara de mesa",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1320,
        "y": 640,
        "wires": [
            [
                "cedfb042.60c86"
            ]
        ]
    },
    {
        "id": "15184a81.1c7795",
        "type": "switch",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "true",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "false",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1030,
        "y": 680,
        "wires": [
            [
                "e4d758a5.73e718"
            ],
            [
                "1e45e7df.f6d458"
            ]
        ]
    },
    {
        "id": "e4d758a5.73e718",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Alexa, enciende lampara derecha",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1320,
        "y": 680,
        "wires": [
            [
                "cedfb042.60c86"
            ]
        ]
    },
    {
        "id": "1e45e7df.f6d458",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Alexa, apaga lampara derecha",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1320,
        "y": 720,
        "wires": [
            [
                "cedfb042.60c86"
            ]
        ]
    },
    {
        "id": "d63b6dbb.0fdeb",
        "type": "switch",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "true",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "false",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1030,
        "y": 760,
        "wires": [
            [
                "a3fb50b2.669c7"
            ],
            [
                "e4d9db22.4edfe8"
            ]
        ]
    },
    {
        "id": "a3fb50b2.669c7",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Alexa, enciende lampara izquierda",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1320,
        "y": 760,
        "wires": [
            [
                "cedfb042.60c86"
            ]
        ]
    },
    {
        "id": "e4d9db22.4edfe8",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Alexa, apaga lampara izquierda",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1320,
        "y": 800,
        "wires": [
            [
                "cedfb042.60c86"
            ]
        ]
    },
    {
        "id": "8cb58938.b38128",
        "type": "switch",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "true",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "false",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1030,
        "y": 840,
        "wires": [
            [
                "aaca122b.2831a"
            ],
            [
                "b80bed3d.30be8"
            ]
        ]
    },
    {
        "id": "aaca122b.2831a",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Alexa, enciende foco sala",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1320,
        "y": 840,
        "wires": [
            [
                "cedfb042.60c86"
            ]
        ]
    },
    {
        "id": "b80bed3d.30be8",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Alexa, apaga foco sala",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1320,
        "y": 880,
        "wires": [
            [
                "cedfb042.60c86"
            ]
        ]
    },
    {
        "id": "58bfec96.469c54",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "msg.payload = (\"Alexa, foco sala brillo \"+msg.payload+\" por ciento\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1040,
        "y": 920,
        "wires": [
            [
                "8a93e274.1172a"
            ]
        ]
    },
    {
        "id": "8a93e274.1172a",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1320,
        "y": 920,
        "wires": [
            [
                "cedfb042.60c86"
            ]
        ]
    },
    {
        "id": "43d47936.bcd338",
        "type": "switch",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "true",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "false",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1030,
        "y": 960,
        "wires": [
            [
                "58631f8e.dd34d"
            ],
            [
                "fbd8cdc0.e3749"
            ]
        ]
    },
    {
        "id": "58631f8e.dd34d",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Alexa, enciende foco pasillo",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1320,
        "y": 960,
        "wires": [
            [
                "cedfb042.60c86"
            ]
        ]
    },
    {
        "id": "fbd8cdc0.e3749",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Alexa, apaga foco pasillo",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1320,
        "y": 1000,
        "wires": [
            [
                "cedfb042.60c86"
            ]
        ]
    },
    {
        "id": "d27da12a.3dd0d",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "msg.payload = (\"Alexa. Foco pasillo brillo \"+msg.payload+\" por ciento\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1040,
        "y": 1040,
        "wires": [
            [
                "fca97387.98312"
            ]
        ]
    },
    {
        "id": "fca97387.98312",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1320,
        "y": 1040,
        "wires": [
            [
                "cedfb042.60c86"
            ]
        ]
    },
    {
        "id": "24f7b5ba.42214a",
        "type": "switch",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "true",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "false",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1030,
        "y": 1080,
        "wires": [
            [
                "7d448b4d.e5acd4"
            ],
            [
                "b4e07bda.f1f358"
            ]
        ]
    },
    {
        "id": "7d448b4d.e5acd4",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Alexa, enciende foco oficina",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1320,
        "y": 1080,
        "wires": [
            [
                "cedfb042.60c86"
            ]
        ]
    },
    {
        "id": "b4e07bda.f1f358",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Alexa, apaga foco oficina",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1320,
        "y": 1120,
        "wires": [
            [
                "cedfb042.60c86"
            ]
        ]
    },
    {
        "id": "c6b20728.c89968",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "msg.payload = (\"Alexa. Foco oficina brillo \"+msg.payload+\" por ciento\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1040,
        "y": 1160,
        "wires": [
            [
                "33db898.de03576"
            ]
        ]
    },
    {
        "id": "33db898.de03576",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1320,
        "y": 1160,
        "wires": [
            [
                "cedfb042.60c86"
            ]
        ]
    },
    {
        "id": "382c643c.2ffa9c",
        "type": "switch",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "true",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "false",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1030,
        "y": 1200,
        "wires": [
            [
                "5f446430.24e0dc"
            ],
            [
                "8b04d3d9.4ebc"
            ]
        ]
    },
    {
        "id": "5f446430.24e0dc",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Alexa, enciende foco cocina",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1320,
        "y": 1200,
        "wires": [
            [
                "cedfb042.60c86"
            ]
        ]
    },
    {
        "id": "8b04d3d9.4ebc",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Alexa, apaga foco cocina",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1320,
        "y": 1240,
        "wires": [
            [
                "cedfb042.60c86"
            ]
        ]
    },
    {
        "id": "ab88a50.94fcf58",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "msg.payload = (\"Alexa. Foco cocina brillo \"+msg.payload+\" por ciento\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1040,
        "y": 1280,
        "wires": [
            [
                "e220f23d.a821d"
            ]
        ]
    },
    {
        "id": "e220f23d.a821d",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1320,
        "y": 1280,
        "wires": [
            [
                "cedfb042.60c86"
            ]
        ]
    },
    {
        "id": "319502cb.3483ae",
        "type": "switch",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "true",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "false",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1030,
        "y": 1320,
        "wires": [
            [
                "e3682ed2.07c93"
            ],
            [
                "5b4fc314.09bccc"
            ]
        ]
    },
    {
        "id": "e3682ed2.07c93",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Alexa, enciende foco lavamanos",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1320,
        "y": 1320,
        "wires": [
            [
                "cedfb042.60c86"
            ]
        ]
    },
    {
        "id": "5b4fc314.09bccc",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Alexa, apaga foco lavamanos",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1320,
        "y": 1360,
        "wires": [
            [
                "cedfb042.60c86"
            ]
        ]
    },
    {
        "id": "3aafb316.71fa6c",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "msg.payload = (\"Alexa. Foco lavamanos brillo \"+msg.payload+\" por ciento\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1040,
        "y": 1400,
        "wires": [
            [
                "77973a2f.c7a834"
            ]
        ]
    },
    {
        "id": "77973a2f.c7a834",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1320,
        "y": 1400,
        "wires": [
            [
                "cedfb042.60c86"
            ]
        ]
    },
    {
        "id": "955dfbc9.798b18",
        "type": "ui_template",
        "z": "2e3f68c7.2f3ff",
        "group": "8feab182.895b9",
        "name": "Streaming",
        "order": 2,
        "width": 0,
        "height": 0,
        "format": "<iframe width=\"320\" height=\"240\" src=\"https://www.youtube.com/embed/8GoG8j5ekMw\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "x": 1790,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "cc8bf57a.7b8c48",
        "type": "telegram receiver",
        "z": "139909a2.e2cae6",
        "name": "",
        "bot": "da70a51bc78adb2a",
        "saveDataDir": "",
        "filterCommands": false,
        "x": 110,
        "y": 340,
        "wires": [
            [
                "51893f8f.76475"
            ],
            []
        ]
    },
    {
        "id": "f29f2c4a.be53e8",
        "type": "switch",
        "z": "139909a2.e2cae6",
        "name": "",
        "property": "payload.content",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "/start",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "/ayuda",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "/focosala",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "/focooficina",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "/focopasillo",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "/enciendefocos",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "/focoscolores",
                "vt": "str"
            },
            {
                "t": "else"
            },
            {
                "t": "eq",
                "v": "/musica",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "/comando",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "/reportarproblema",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "/cargasaldo",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "/escritoriocam",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "/puertacam",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "/librerocam",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "/mirillacam",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "/salacam",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "/cocinacam",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 18,
        "x": 1030,
        "y": 420,
        "wires": [
            [
                "c82717f1.fb5908"
            ],
            [
                "64fbdc7.a1e9624"
            ],
            [
                "24a985f6.ef382a"
            ],
            [
                "1c79f757.a6f3c1"
            ],
            [
                "1d4dc0dd.7ae08f"
            ],
            [
                "eb6e0c05.1e821"
            ],
            [
                "7fd8649e.4b5584"
            ],
            [
                "9892f397.ccad68"
            ],
            [
                "9b64f2fa.a33018"
            ],
            [
                "dcd2c4e9.ec4b58"
            ],
            [
                "ca8f3811.e0bc18"
            ],
            [
                "a651497c.072ef8"
            ],
            [
                "5ca242a2.5ea55c"
            ],
            [
                "5ca242a2.5ea55c"
            ],
            [
                "5ca242a2.5ea55c"
            ],
            [
                "5ca242a2.5ea55c"
            ],
            [
                "5ca242a2.5ea55c"
            ],
            [
                "5ca242a2.5ea55c"
            ]
        ]
    },
    {
        "id": "c82717f1.fb5908",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "msg.payload.sentMessageId = msg.originalMessage.chat.id;\nmsg.payload.content = \"Hola \"+msg.originalMessage.chat.first_name+\" \"+msg.originalMessage.chat.last_name+ \".\\nPara comenzar, selecciona uno de los siguientes comandos:\\n /ayuda - Conoce más sobre el proyecto\\n /focosala - Enciende foco sala y apaga si está encendido\\n /focooficina - Enciende foco oficina y apaga si está encendido\\n /focopasillo - Enciende foco pasillo y apaga si está encendido\\n /enciendefocos - Enciende todos los focos, apaga si están encendido\\n /focoscolores - Cambia el color de todos los focos\\n /musica - Reproduce música aleatoria en el departamento\\n /comando - Puedes escribir un mensaje de voz para que \\\"23\\\" lo escuche en el departamento\\n /reportaproblema - Reporta en caso de que el streaming o el sitio no funcione\\n\\nSi cambiaste algún foco, puedes ver los resultados pidiendo la foto de alguna cámara\\n/escritoriocam\\n/cocinacam\\n/salacam\\n/librerocam\\n/puertacam \\n\\nPara que los comandos funcionen, necesitas subir una selfie, la cual te dará oportunidad de enviar 5 comandos.\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1420,
        "y": 360,
        "wires": [
            [
                "c3bc9e2f.98a608"
            ]
        ]
    },
    {
        "id": "c3bc9e2f.98a608",
        "type": "telegram sender",
        "z": "139909a2.e2cae6",
        "name": "",
        "bot": "da70a51bc78adb2a",
        "haserroroutput": false,
        "outputs": 1,
        "x": 2090,
        "y": 360,
        "wires": [
            [
                "50f43893.1ee898",
                "405f85b1.9c39fc",
                "d819823.105d28"
            ]
        ]
    },
    {
        "id": "64fbdc7.a1e9624",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "msg.payload.sentMessageId = msg.originalMessage.chat.id;\nmsg.payload.content = \"En \\\"Sindrome de Estocolmo\\\", el puedes controlar el comportamiento de \\\"23\\\", el habitante de un departamento del futuro. Podrás enviarle instrucciones a su Alexa, y por lo tanto controlar sus aparatos, la musica que escucha y darle instrucciones sobre qué hacer. \\n Para conocer la lista de comandos, haz clic en /start \\n Para ver sus cámaras de seguridad en vivo y observar como le controlas, dirígete a estocolmosindrome.com\";  \nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1420,
        "y": 400,
        "wires": [
            [
                "c3bc9e2f.98a608"
            ]
        ]
    },
    {
        "id": "8604a2c9.e6648",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "global.set (\"focosalanow\", \"false\");\nglobal.set (\"focosalalast\", \"true\");\nglobal.set (\"focooficinanow\", \"false\");\nglobal.set (\"focooficinalast\", \"true\");\nglobal.set (\"focopasillonow\", \"false\");\nglobal.set (\"focopasillolast\", \"true\");\nglobal.set (\"todosfocosnow\", \"false\");\nglobal.set (\"todosfocoslast\", \"true\");\nglobal.set (\"musicanow\", \"false\");\nglobal.set (\"musicalast\", \"true\");\nglobal.set (\"color\", 0);\nglobal.set (\"comando\", 0);\nglobal.set (\"chances\",0);\nglobal.set (\"falla\",0);\nglobal.set (\"onclic\", 0);\nglobal.set (\"medstaken\", 0);\nglobal.set (\"cafeterastate\", 0);\nglobal.set (\"takecoffe\", 0);\nglobal.set (\"angry23\", 0);\nglobal.set (\"disgust23\", 0);\nglobal.set (\"fear23\", 0);\nglobal.set (\"happyy23\", 0);\nglobal.set (\"sad23\", 0);\nglobal.set (\"surprise23\", 0);\nglobal.set (\"neutral23\", 0);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2000,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "1dc1414d.84c4ef",
        "type": "inject",
        "z": "2e3f68c7.2f3ff",
        "name": "cron 6am",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "00 06 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1790,
        "y": 580,
        "wires": [
            [
                "8604a2c9.e6648"
            ]
        ]
    },
    {
        "id": "24a985f6.ef382a",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "var focosalatemp = global.get (\"focosalalast\");\n\nif (focosalatemp == \"true\"){\n    global.set (\"focosalanow\", \"false\");\n    global.set (\"estado\", \"apagado\");\n}else if (focosalatemp == \"false\") {\n    global.set (\"focosalanow\", \"true\");\n    global.set (\"estado\", \"encendido\");\n}\nglobal.set (\"focosalalast\", global.get (\"focosalanow\"));\nglobal.set (\"retro\", 1);\nmsg.payload2 = msg.payload;\nmsg.payload = global.get (\"focosalanow\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1420,
        "y": 440,
        "wires": [
            [
                "68ec003b.90ebc8",
                "66de85b6.4287c4"
            ]
        ]
    },
    {
        "id": "68ec003b.90ebc8",
        "type": "link out",
        "z": "139909a2.e2cae6",
        "name": "foco sala send",
        "links": [
            "c0f6330b.b5b348"
        ],
        "x": 1595,
        "y": 440,
        "wires": []
    },
    {
        "id": "c0f6330b.b5b348",
        "type": "link in",
        "z": "2e3f68c7.2f3ff",
        "name": "foco sala receive",
        "links": [
            "68ec003b.90ebc8"
        ],
        "x": 335,
        "y": 840,
        "wires": [
            [
                "ea5e3c92.fb5ba"
            ]
        ]
    },
    {
        "id": "1c79f757.a6f3c1",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "if (global.get (\"focooficinalast\") == \"true\"){\n    global.set (\"focooficinanow\", \"false\");\n    global.set (\"estado\", \"apagado\");\n}else if (global.get (\"focooficinalast\") == \"false\") {\n    global.set (\"focooficinanow\", \"true\");\n    global.set (\"estado\", \"encendido\");\n}\nglobal.set (\"focooficinalast\", global.get (\"focooficinanow\"));\nglobal.set (\"retro\", 1);\nmsg.payload2 = msg.payload;\nmsg.payload = global.get (\"focooficinanow\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1420,
        "y": 520,
        "wires": [
            [
                "7894c68b.f67c28",
                "e9c4c4d2.f98698"
            ]
        ]
    },
    {
        "id": "1d4dc0dd.7ae08f",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "if (global.get (\"focopasillolast\") == \"true\"){\n    global.set (\"focopasillonow\", \"false\");\n    global.set (\"estado\", \"apagado\");\n}else if (global.get (\"focopasillolast\") == \"false\") {\n    global.set (\"focopasillonow\", \"true\");\n    global.set (\"estado\", \"encendido\");\n}\nglobal.set (\"focopasillolast\", global.get (\"focopasillonow\"));\nglobal.set (\"retro\", 1);\nmsg.payload2 = msg.payload;\nmsg.payload = global.get (\"focopasillonow\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1420,
        "y": 600,
        "wires": [
            [
                "f5ab47d4.ae6e1",
                "a633a2a3.40c578"
            ]
        ]
    },
    {
        "id": "7894c68b.f67c28",
        "type": "link out",
        "z": "139909a2.e2cae6",
        "name": "foco oficina send",
        "links": [
            "d1fd585f.8162d"
        ],
        "x": 1595,
        "y": 520,
        "wires": []
    },
    {
        "id": "d1fd585f.8162d",
        "type": "link in",
        "z": "2e3f68c7.2f3ff",
        "name": "foco oficina receive",
        "links": [
            "7894c68b.f67c28"
        ],
        "x": 335,
        "y": 1080,
        "wires": [
            [
                "9034188c.950e08"
            ]
        ]
    },
    {
        "id": "f5ab47d4.ae6e1",
        "type": "link out",
        "z": "139909a2.e2cae6",
        "name": "foco pasillo send",
        "links": [
            "6f8aa3f7.e94dc4"
        ],
        "x": 1595,
        "y": 600,
        "wires": []
    },
    {
        "id": "6f8aa3f7.e94dc4",
        "type": "link in",
        "z": "2e3f68c7.2f3ff",
        "name": "foco pasillo receive",
        "links": [
            "f5ab47d4.ae6e1"
        ],
        "x": 335,
        "y": 960,
        "wires": [
            [
                "4aec905b.4aaee"
            ]
        ]
    },
    {
        "id": "eb6e0c05.1e821",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "if (global.get (\"todosfocoslast\") == \"true\"){\n    global.set (\"todosfocosnow\", \"false\");\n    global.set (\"estado\", \"apagado\");\n}else if (global.get (\"todosfocoslast\") == \"false\") {\n    global.set (\"todosfocosnow\", \"true\");\n    global.set (\"estado\", \"encendido\");\n}\nglobal.set (\"todosfocoslast\", global.get (\"todosfocosnow\"));\nglobal.set (\"retro\", 1);\nmsg.payload2 = msg.payload;\nmsg.payload = global.get (\"todosfocosnow\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1420,
        "y": 680,
        "wires": [
            [
                "87e5b1bf.30d6",
                "2333eeb9.bed59a"
            ]
        ]
    },
    {
        "id": "87e5b1bf.30d6",
        "type": "link out",
        "z": "139909a2.e2cae6",
        "name": "todos los focos send",
        "links": [
            "ce8cf9a9.4f82f8"
        ],
        "x": 1595,
        "y": 680,
        "wires": []
    },
    {
        "id": "7518207c.e66728",
        "type": "ui_switch",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "label": "Todos los focos",
        "tooltip": "",
        "group": "1e6be336.24c9e5",
        "order": 15,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 500,
        "y": 1440,
        "wires": [
            [
                "421cfde0.8e5ffc"
            ]
        ]
    },
    {
        "id": "a79b5ea1.bf14d",
        "type": "switch",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "true",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "false",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1030,
        "y": 1440,
        "wires": [
            [
                "7062c970.0fbe5"
            ],
            [
                "154142d3.b4e91d"
            ]
        ]
    },
    {
        "id": "7062c970.0fbe5",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Alexa, enciende todos los focos",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1320,
        "y": 1440,
        "wires": [
            [
                "cedfb042.60c86"
            ]
        ]
    },
    {
        "id": "154142d3.b4e91d",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Alexa, apaga todos los focos",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1320,
        "y": 1480,
        "wires": [
            [
                "cedfb042.60c86"
            ]
        ]
    },
    {
        "id": "ce8cf9a9.4f82f8",
        "type": "link in",
        "z": "2e3f68c7.2f3ff",
        "name": "todos los focos receive",
        "links": [
            "87e5b1bf.30d6"
        ],
        "x": 355,
        "y": 1440,
        "wires": [
            [
                "7518207c.e66728"
            ]
        ]
    },
    {
        "id": "edc7f0a7.03c558",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (msg.payload == \"true\") {\n    global.set (\"focosalanow\", \"true\");\n} else if (msg.payload == \"false\") {\n    global.set (\"focosalanow\", \"false\");\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1040,
        "y": 880,
        "wires": [
            []
        ]
    },
    {
        "id": "9a5af670.aef3d",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (msg.payload == \"true\") {\n    global.set (\"focopasillonow\", \"true\");\n} else if (msg.payload == \"false\") {\n    global.set (\"focopasillonow\", \"false\");\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1040,
        "y": 1000,
        "wires": [
            []
        ]
    },
    {
        "id": "738d6fa5.fcb18",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (msg.payload == \"true\") {\n    global.set (\"focooficinanow\", \"true\");\n} else if (msg.payload == \"false\") {\n    global.set (\"focooficinanow\", \"false\");\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1040,
        "y": 1120,
        "wires": [
            []
        ]
    },
    {
        "id": "b0980f38.66de18",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (msg.payload == \"true\") {\n    global.set (\"todosfocosnow\", \"true\");\n} else if (msg.payload == \"false\") {\n    global.set (\"todosfocosnow\", \"false\");\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1040,
        "y": 1480,
        "wires": [
            []
        ]
    },
    {
        "id": "66de85b6.4287c4",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "msg.payload = msg.payload2;\nmsg.payload.sentMessageId = msg.originalMessage.chat.id;\nmsg.payload.content = \"Foco de la sala \"+global.get(\"estado\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1640,
        "y": 480,
        "wires": [
            [
                "ac953597.3407d8"
            ]
        ]
    },
    {
        "id": "e9c4c4d2.f98698",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "msg.payload = msg.payload2;\nmsg.payload.sentMessageId = msg.originalMessage.chat.id;\nmsg.payload.content = \"Foco de la oficina \"+global.get(\"estado\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1640,
        "y": 560,
        "wires": [
            [
                "ac953597.3407d8"
            ]
        ]
    },
    {
        "id": "a633a2a3.40c578",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "msg.payload = msg.payload2;\nmsg.payload.sentMessageId = msg.originalMessage.chat.id;\nmsg.payload.content = \"Foco del pasillo \"+global.get(\"estado\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1640,
        "y": 640,
        "wires": [
            [
                "ac953597.3407d8"
            ]
        ]
    },
    {
        "id": "ac953597.3407d8",
        "type": "delay",
        "z": "139909a2.e2cae6",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1860,
        "y": 480,
        "wires": [
            [
                "c3bc9e2f.98a608",
                "17d3ca2c.c739e6"
            ]
        ]
    },
    {
        "id": "2333eeb9.bed59a",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "msg.payload = msg.payload2;\nmsg.payload.sentMessageId = msg.originalMessage.chat.id;\nmsg.payload.content = \"El estado de todos los focos es \"+global.get(\"estado\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1640,
        "y": 720,
        "wires": [
            [
                "ac953597.3407d8"
            ]
        ]
    },
    {
        "id": "7fd8649e.4b5584",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "global.set(\"color\",1);\nmsg.payload.sentMessageId = msg.originalMessage.chat.id;\nmsg.payload.content = \"Escribe el color alque quieres cambiar los focos.\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1420,
        "y": 760,
        "wires": [
            [
                "ac953597.3407d8"
            ]
        ]
    },
    {
        "id": "9892f397.ccad68",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "otherwise",
        "func": "msg.payload2 = msg.payload;\nif (global.get (\"color\") == 1) {\n    msg.payload = \"Alexa, todos los focos color \" + msg.payload.content;\n    global.set (\"retro\", 1);\n    return msg;\n}\nif (global.get (\"comando\") == 1) {\n    msg.payload = msg.originalMessage.from.first_name+\" \"+msg.originalMessage.from.last_name+\" dice: \" + msg.payload.content;\n    //global.set (\"retro\", 1);\n    return msg;\n}\nif (global.get (\"falla\") == 1) {\n    msg.payload = \"Se ha encontrado una falla. Fue reportada por\"+msg.originalMessage.from.first_name+\" \"+msg.originalMessage.from.last_name+\". Se reportó lo siguiente. \"+ msg.payload.content;\n    return msg;\n}/* else {\n    msg.payload = \"Comando no reconocido. Intenta de nuevo. Consulta lo que puedes hacer dando clic en /start\";\n    return msg;\n}*/",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1420,
        "y": 800,
        "wires": [
            [
                "8f34f864.09f848",
                "7cf23107.3de68"
            ]
        ]
    },
    {
        "id": "8f34f864.09f848",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "msg.payload = msg.payload2;\nmsg.payload.sentMessageId = msg.originalMessage.chat.id;\nif (global.get (\"color\") == 1) {\n    msg.payload.content = \"Se ha cambiado el color de los focos a \"+msg.payload2.content;\n    global.set (\"color\", 0);\n}\nif (global.get (\"comando\") == 1) {\n    msg.payload.content = \"Se ha enviado el comando \"+msg.payload2.content;\n    global.set (\"comando\", 0);\n}\nif (global.get (\"falla\") == 1) {\n    msg.payload.content = \"Se ha enviado tu reporte. En un momento pongo a 23 a arreglarlo.\";\n    global.set (\"falla\", 0);\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1640,
        "y": 840,
        "wires": [
            [
                "ac953597.3407d8"
            ]
        ]
    },
    {
        "id": "7cf23107.3de68",
        "type": "link out",
        "z": "139909a2.e2cae6",
        "name": "color send",
        "links": [
            "c135f020.01211"
        ],
        "x": 1595,
        "y": 800,
        "wires": []
    },
    {
        "id": "c135f020.01211",
        "type": "link in",
        "z": "2e3f68c7.2f3ff",
        "name": "command receive",
        "links": [
            "7cf23107.3de68",
            "d30b1517.34d338"
        ],
        "x": 175,
        "y": 280,
        "wires": [
            [
                "c7b52406.8089e",
                "9cf29237.d5d2d"
            ]
        ]
    },
    {
        "id": "9cf29237.d5d2d",
        "type": "delay",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "pauseType": "delay",
        "timeout": "1.5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 310,
        "y": 240,
        "wires": [
            [
                "ac3c7867.507fa"
            ]
        ]
    },
    {
        "id": "dcd2c4e9.ec4b58",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "global.set(\"comando\",1);\nmsg.payload.sentMessageId = msg.originalMessage.chat.id;\nmsg.payload.content = \"El mensaje que escribas a continuación será escuchado por 23.\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1420,
        "y": 960,
        "wires": [
            [
                "ac953597.3407d8"
            ]
        ]
    },
    {
        "id": "9b64f2fa.a33018",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "if (global.get (\"musicalast\") == \"true\"){\n    global.set (\"musicanow\", \"false\");\n    global.set (\"estado\", \"apagado\");\n}else if (global.get (\"musicalast\") == \"false\") {\n    global.set (\"musicanow\", \"true\");\n    global.set (\"estado\", \"encendido\");\n}\nglobal.set (\"musicalast\", global.get (\"musicanow\"));\nmsg.payload2 = msg.payload;\nmsg.payload = global.get (\"musicanow\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1420,
        "y": 880,
        "wires": [
            [
                "656b5a09.c7fbc4",
                "40d64d9b.aa8b7c"
            ]
        ]
    },
    {
        "id": "656b5a09.c7fbc4",
        "type": "link out",
        "z": "139909a2.e2cae6",
        "name": "musica send",
        "links": [
            "5b4e55aa.77a09c"
        ],
        "x": 1595,
        "y": 880,
        "wires": []
    },
    {
        "id": "40d64d9b.aa8b7c",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "msg.payload = msg.payload2;\nmsg.payload.sentMessageId = msg.originalMessage.chat.id;\nmsg.payload.content = \"El estado de la musica es \"+global.get(\"estado\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1640,
        "y": 920,
        "wires": [
            [
                "ac953597.3407d8"
            ]
        ]
    },
    {
        "id": "76a5d953.1a4938",
        "type": "switch",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "true",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "false",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 290,
        "y": 320,
        "wires": [
            [
                "1e3effe1.53e7e"
            ],
            [
                "154f2e47.a350f2"
            ]
        ]
    },
    {
        "id": "5b4e55aa.77a09c",
        "type": "link in",
        "z": "2e3f68c7.2f3ff",
        "name": "musica receive",
        "links": [
            "656b5a09.c7fbc4"
        ],
        "x": 175,
        "y": 320,
        "wires": [
            [
                "76a5d953.1a4938"
            ]
        ]
    },
    {
        "id": "ca8f3811.e0bc18",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "msg.payload.sentMessageId = msg.originalMessage.chat.id;\nmsg.payload.content = \"Escribe el problema que encontraste. Asegurate de incluir la funcion que está fallando y el lugar de origen.\";\nglobal.set (\"falla\", 1);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1420,
        "y": 1000,
        "wires": [
            [
                "ac953597.3407d8"
            ]
        ]
    },
    {
        "id": "d080b724.afde6",
        "type": "http request",
        "z": "139909a2.e2cae6",
        "name": "Cam6",
        "method": "GET",
        "ret": "bin",
        "paytoqs": "ignore",
        "url": "192.168.15.21/capture",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1030,
        "y": 260,
        "wires": [
            [
                "b9ea31d0.9fac7"
            ]
        ]
    },
    {
        "id": "b9ea31d0.9fac7",
        "type": "file",
        "z": "139909a2.e2cae6",
        "name": "",
        "filename": "S:\\Captura\\sala1.jpg",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 1460,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "4b086a3b.cfc6e4",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "/*\nif (msg.payload.content[0] == \"/\") {\n    return msg;\n}\n*/\nif (msg.payload.content != \"/start\" && msg.payload.content == \"/ayuda\" && global.get (\"color\") == 0 && global.get (\"comando\") == 0 && global.get (\"falla\") == 0) {\n    return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 680,
        "y": 60,
        "wires": [
            [
                "d080b724.afde6",
                "451ddb24.930664",
                "81e5606c.933d1",
                "bfb4b2f6.d9231",
                "7d867d.581a3984",
                "a0242040.3a728"
            ]
        ]
    },
    {
        "id": "35a3a7ce.42de38",
        "type": "delay",
        "z": "139909a2.e2cae6",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1840,
        "y": 1160,
        "wires": [
            [
                "12f12bb0.3c80b4",
                "6d901239.51e5cc"
            ]
        ]
    },
    {
        "id": "12f12bb0.3c80b4",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "var pl = {\n  content: global.get (\"img0\"),\n  caption: \"Antes\",\n  type : 'photo',\n  chatId: msg.originalMessage.chat.id,\n  chat: msg.payload.content.chat,\n  from: msg.originalMessage.from,\n  message_id : msg.originalMessage.message_id\n}\n\nmsg.payload = pl;\n\n\n/* type can be one of the following\nphoto\naudio\nvideo\nsticker\nvoice\ndocument\n*/\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2560,
        "y": 1100,
        "wires": [
            [
                "971e117c.fc8a3"
            ]
        ]
    },
    {
        "id": "51893f8f.76475",
        "type": "switch",
        "z": "139909a2.e2cae6",
        "name": "",
        "property": "payload.type",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "message",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "photo",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 330,
        "y": 340,
        "wires": [
            [
                "dc712992.c658f8",
                "de74a601.848b58",
                "4b086a3b.cfc6e4"
            ],
            [
                "303fa4a6.4c426c",
                "482f8931.1dea58",
                "6adf4934.32c0b8"
            ]
        ]
    },
    {
        "id": "bd6eb30.ae3d2d",
        "type": "http request",
        "z": "139909a2.e2cae6",
        "name": "",
        "method": "use",
        "ret": "bin",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 890,
        "y": 1480,
        "wires": [
            [
                "4699abe0.610124"
            ]
        ]
    },
    {
        "id": "4699abe0.610124",
        "type": "file",
        "z": "139909a2.e2cae6",
        "name": "",
        "filename": "",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "setbymsg",
        "x": 1030,
        "y": 1480,
        "wires": [
            [
                "e0efb4d8.3c7898"
            ]
        ]
    },
    {
        "id": "694f21ec.36f7c8",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "msg.method = \"GET\";\nmsg.url = msg.payload2.weblink;\nmsg.filename = \"S:\\\\Captura\\\\recibido\\\\\"+msg.originalMessage.from.first_name+\"-\"+msg.originalMessage.from.last_name+\"-\"+msg.payload2.date+\".jpg\";\nglobal.set (\"nameset\", msg.originalMessage.from.first_name+\"-\"+msg.originalMessage.from.last_name+\"-\"+msg.payload2.date+\".jpg\");\n//global.set (\"chances\", 5);\n//msg.payload2=msg.payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 680,
        "y": 1480,
        "wires": [
            [
                "bd6eb30.ae3d2d"
            ]
        ]
    },
    {
        "id": "971e117c.fc8a3",
        "type": "telegram sender",
        "z": "139909a2.e2cae6",
        "name": "",
        "bot": "da70a51bc78adb2a",
        "haserroroutput": false,
        "outputs": 1,
        "x": 2870,
        "y": 1100,
        "wires": [
            []
        ]
    },
    {
        "id": "a4399293.bbbb68",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "var pl = {\n  content: global.get (\"img1\"),\n  message: \":D\",\n  caption: \"Despues\",\n  type : 'photo',\n  chatId: msg.originalMessage.chat.id,\n  chat: msg.payload.content.chat,\n  from: msg.originalMessage.from,\n  message_id : msg.originalMessage.message_id\n}\n\nmsg.payload = pl;\n\n\n/* type can be one of the following\nphoto\naudio\nvideo\nsticker\nvoice\ndocument\n*/\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2560,
        "y": 1160,
        "wires": [
            [
                "971e117c.fc8a3"
            ]
        ]
    },
    {
        "id": "17d3ca2c.c739e6",
        "type": "delay",
        "z": "139909a2.e2cae6",
        "name": "",
        "pauseType": "delay",
        "timeout": "4",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 2060,
        "y": 480,
        "wires": [
            [
                "834eb41c.9a7948",
                "ff951881.e2a3a8",
                "72d50e06.74e5f",
                "cdb1554f.410108",
                "bd97beea.ce073",
                "1f73926e.f6568e"
            ]
        ]
    },
    {
        "id": "c5a40502.36d668",
        "type": "ui_template",
        "z": "2e3f68c7.2f3ff",
        "group": "f0d39309.5d582",
        "name": "Upload",
        "order": 2,
        "width": 6,
        "height": 5,
        "format": "<h1>Sube una selfie</h1>\n<p>Para poder controlar el departamento de 23, deberás subir una selfie. La cantidad de clics asignada por foto dependerá de las emociones registradas y su intensidad. Si no subes una selfie, los comandos no se ejecutaran.</p>\n<form action=\"/upload\" method=\"POST\" enctype=\"multipart/form-data\">\n    <input type=\"file\" name=\"myFile\" />\n    <input type=\"submit\" value=\"Submit\">\n</form>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "x": 1780,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "2b482f39.fcb5",
        "type": "file",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "filename": "",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "setbymsg",
        "x": 2210,
        "y": 240,
        "wires": [
            [
                "adac19d0.be4668",
                "8ec5b978.bafa48"
            ]
        ]
    },
    {
        "id": "9032bd.00c8d54",
        "type": "http in",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "url": "/upload",
        "method": "post",
        "upload": true,
        "swaggerDoc": "",
        "x": 1790,
        "y": 240,
        "wires": [
            [
                "f9ca23bd.9a549",
                "c5951628.5c4598",
                "434392bf.517b1c"
            ]
        ]
    },
    {
        "id": "e0c6f6eb.2c08c8",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "toBase64",
        "func": "msg.payload = msg.req.files[0].buffer;\nmsg.topic = \"\";\nmsg.filename = \"S:\\\\Captura\\\\usuarios\\\\\"+global.get(\"timetime\")+\".jpg\";\nglobal.set (\"nameset\",global.get(\"timetime\")+\".jpg\");\n//global.set (\"chances\", 5);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2000,
        "y": 240,
        "wires": [
            [
                "2b482f39.fcb5"
            ]
        ]
    },
    {
        "id": "c1f765b7.c9e628",
        "type": "ui_gauge",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "group": "f0d39309.5d582",
        "order": 1,
        "width": 0,
        "height": 0,
        "gtype": "gage",
        "title": "Clics disponibles",
        "label": "Clics",
        "format": "{{value}}",
        "min": 0,
        "max": "5",
        "colors": [
            "#ff0000",
            "#e6e600",
            "#268721"
        ],
        "seg1": "1",
        "seg2": "2",
        "x": 2290,
        "y": 740,
        "wires": []
    },
    {
        "id": "dd98f635.b4f34",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "global.set (\"timetime\", msg.payload);\nmsg.payload = global.get(\"chances\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2000,
        "y": 740,
        "wires": [
            [
                "c1f765b7.c9e628"
            ]
        ]
    },
    {
        "id": "53dbce6d.f087b",
        "type": "inject",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1790,
        "y": 740,
        "wires": [
            [
                "dd98f635.b4f34",
                "5add34fd.4e8c44",
                "274b68ef.1e4b58",
                "3bad8409.f2a71c"
            ]
        ]
    },
    {
        "id": "54587617.1caed8",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>0) {\n    global.set (\"chances\", global.get(\"chances\")-1);\n    global.set (\"onclic\", 1);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 840,
        "y": 600,
        "wires": [
            [
                "ffff05d8.854988"
            ]
        ]
    },
    {
        "id": "35b90e5d.c7c972",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>0) {\n    global.set (\"chances\", global.get(\"chances\")-1);\n    global.set (\"onclic\", 1);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 840,
        "y": 240,
        "wires": [
            [
                "92693be9.877dd8"
            ]
        ]
    },
    {
        "id": "f4faab17.0c7fd",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>0) {\n    global.set (\"chances\", global.get(\"chances\")-1);\n    global.set (\"onclic\", 1);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 840,
        "y": 320,
        "wires": [
            [
                "92c3abf9.24c6f8"
            ]
        ]
    },
    {
        "id": "c9424c27.f9af98",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>0) {\n    global.set (\"chances\", global.get(\"chances\")-1);\n    global.set (\"onclic\", 1);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 840,
        "y": 360,
        "wires": [
            [
                "6e02c659.7935a8"
            ]
        ]
    },
    {
        "id": "69a17bd2.389764",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>0) {\n    global.set (\"chances\", global.get(\"chances\")-1);\n    global.set (\"onclic\", 1);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 840,
        "y": 400,
        "wires": [
            [
                "1bffb812.3d8cc8"
            ]
        ]
    },
    {
        "id": "7ca2193f.3e6718",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>0) {\n    global.set (\"chances\", global.get(\"chances\")-1);\n    global.set (\"onclic\", 1);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 840,
        "y": 480,
        "wires": [
            [
                "b7d8ff71.d7aba"
            ]
        ]
    },
    {
        "id": "1d4535c1.7afe7a",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>0) {\n    global.set (\"chances\", global.get(\"chances\")-1);\n    global.set (\"onclic\", 1);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 840,
        "y": 520,
        "wires": [
            [
                "f1c7ea77.bd86d8"
            ]
        ]
    },
    {
        "id": "c00b2be7.13f088",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>0) {\n    global.set (\"chances\", global.get(\"chances\")-1);\n    global.set (\"onclic\", 1);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 840,
        "y": 680,
        "wires": [
            [
                "15184a81.1c7795"
            ]
        ]
    },
    {
        "id": "c3259ab6.2e3078",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>0) {\n    global.set (\"chances\", global.get(\"chances\")-1);\n    global.set (\"onclic\", 1);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 840,
        "y": 760,
        "wires": [
            [
                "d63b6dbb.0fdeb"
            ]
        ]
    },
    {
        "id": "2b885981.61ac76",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>0) {\n    global.set (\"chances\", global.get(\"chances\")-1);\n    global.set (\"onclic\", 1);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 840,
        "y": 840,
        "wires": [
            [
                "edc7f0a7.03c558",
                "8cb58938.b38128"
            ]
        ]
    },
    {
        "id": "ab7c492a.747be8",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>0) {\n    global.set (\"chances\", global.get(\"chances\")-1);\n    global.set (\"onclic\", 1);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n    \n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 840,
        "y": 920,
        "wires": [
            [
                "58bfec96.469c54"
            ]
        ]
    },
    {
        "id": "c1cef348.6a0cd",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>0) {\n    global.set (\"chances\", global.get(\"chances\")-1);\n    global.set (\"onclic\", 1);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 840,
        "y": 960,
        "wires": [
            [
                "9a5af670.aef3d",
                "43d47936.bcd338"
            ]
        ]
    },
    {
        "id": "a5f143c6.a790c8",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>0) {\n    global.set (\"chances\", global.get(\"chances\")-1);\n    global.set (\"onclic\", 1);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 840,
        "y": 1040,
        "wires": [
            [
                "d27da12a.3dd0d"
            ]
        ]
    },
    {
        "id": "9c6d1780.bd11c8",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>0) {\n    global.set (\"chances\", global.get(\"chances\")-1);\n    global.set (\"onclic\", 1);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 840,
        "y": 1080,
        "wires": [
            [
                "738d6fa5.fcb18",
                "24f7b5ba.42214a"
            ]
        ]
    },
    {
        "id": "fa358433.c2e228",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>0) {\n    global.set (\"chances\", global.get(\"chances\")-1);\n    global.set (\"onclic\", 1);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 840,
        "y": 1160,
        "wires": [
            [
                "c6b20728.c89968"
            ]
        ]
    },
    {
        "id": "9b0c79ad.122358",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>0) {\n    global.set (\"chances\", global.get(\"chances\")-1);\n    global.set (\"onclic\", 1);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 840,
        "y": 1200,
        "wires": [
            [
                "382c643c.2ffa9c"
            ]
        ]
    },
    {
        "id": "b27fa808.24e398",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>0) {\n    global.set (\"chances\", global.get(\"chances\")-1);\n    global.set (\"onclic\", 1);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 840,
        "y": 1280,
        "wires": [
            [
                "ab88a50.94fcf58"
            ]
        ]
    },
    {
        "id": "ac34b62b.a8a888",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>0) {\n    global.set (\"chances\", global.get(\"chances\")-1);\n    global.set (\"onclic\", 1);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 840,
        "y": 1320,
        "wires": [
            [
                "319502cb.3483ae"
            ]
        ]
    },
    {
        "id": "eabb75fc.251d48",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>0) {\n    global.set (\"chances\", global.get(\"chances\")-1);\n    global.set (\"onclic\", 1);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 840,
        "y": 1400,
        "wires": [
            [
                "3aafb316.71fa6c"
            ]
        ]
    },
    {
        "id": "421cfde0.8e5ffc",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>0) {\n    global.set (\"chances\", global.get(\"chances\")-1);\n    global.set (\"onclic\", 1);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 840,
        "y": 1440,
        "wires": [
            [
                "a79b5ea1.bf14d",
                "b0980f38.66de18"
            ]
        ]
    },
    {
        "id": "5add34fd.4e8c44",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get (\"chances\") == 0 && global.get (\"onclic\") == 1) {\n    msg.payload = \"Debes cargar una selfie para poder controlar el espacio\";\n    global.set (\"onclic\", 0);\n    return msg;\n} else if (global.get (\"chances\") >0 && global.get (\"onclic\") == 1) {\n    msg.payload = global.get (\"chances\")+\" clics restantes\";\n    global.set (\"onclic\", 0);\n    return msg;\n} else if (global.get (\"chances\") < 0 && global.get (\"onclic\") == 1) {\n    msg.payload = \"Tu grupo etnico detectado te ha negado clics\";\n    global.set (\"onclic\", 0);\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2000,
        "y": 780,
        "wires": [
            [
                "b718e2ac.b40678"
            ]
        ]
    },
    {
        "id": "b718e2ac.b40678",
        "type": "ui_toast",
        "z": "2e3f68c7.2f3ff",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "",
        "name": "",
        "x": 2290,
        "y": 780,
        "wires": []
    },
    {
        "id": "d5acc1db.ebd19",
        "type": "delay",
        "z": "139909a2.e2cae6",
        "name": "",
        "pauseType": "delay",
        "timeout": "2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 2580,
        "y": 360,
        "wires": [
            [
                "d95314fa.a1bd08"
            ]
        ]
    },
    {
        "id": "d95314fa.a1bd08",
        "type": "telegram sender",
        "z": "139909a2.e2cae6",
        "name": "",
        "bot": "da70a51bc78adb2a",
        "haserroroutput": false,
        "outputs": 1,
        "x": 2870,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "50f43893.1ee898",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "msg.payload.sentMessageId = msg.originalMessage.chat.id;\nif (global.get(\"chances\")>0 && global.get(\"color\")==0 && global.get(\"comando\")==0 && global.get(\"falla\")==0) {\nmsg.payload.content = \"Te quedan \"+global.get(\"chances\")+\" comandos..\";\nreturn msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2340,
        "y": 260,
        "wires": [
            [
                "d5acc1db.ebd19"
            ]
        ]
    },
    {
        "id": "750d973e.70f098",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "msg.payload = msg.payload2;\nmsg.payload.sentMessageId = msg.originalMessage.chat.id;\nmsg.payload.type = \"message\";\nmsg.payload.content = \"Cara detectada. Clics disponibles: \"+global.get (\"chances\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2340,
        "y": 1540,
        "wires": [
            [
                "2731880.4e7ee78"
            ]
        ]
    },
    {
        "id": "2731880.4e7ee78",
        "type": "telegram sender",
        "z": "139909a2.e2cae6",
        "name": "",
        "bot": "da70a51bc78adb2a",
        "haserroroutput": false,
        "outputs": 1,
        "x": 2590,
        "y": 1540,
        "wires": [
            []
        ]
    },
    {
        "id": "dc712992.c658f8",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "\n//if (global.get (\"chances\")> 0 && (msg.payload.content == \"/start\" || msg.payload.content == \"/ayuda\" || global.get (\"color\") == 1 || global.get (\"comando\") == 1 || global.get (\"falla\") == 1)) {\nif (global.get (\"chances\")> 0 || msg.payload.content == \"/start\" || msg.payload.content == \"/ayuda\" || global.get (\"color\") == 1 || global.get (\"comando\") == 1 || global.get (\"falla\") == 1) {\n    return msg;\n} else if (global.get (\"chances\")>= 0) {\n    msg.payload.content = \"/cargasaldo\";\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 680,
        "y": 340,
        "wires": [
            [
                "f29f2c4a.be53e8",
                "97e06fa6.eed6f"
            ]
        ]
    },
    {
        "id": "a651497c.072ef8",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "msg.payload.sentMessageId = msg.originalMessage.chat.id;\nmsg.payload.content = \"Para que los comandos funcionen debes adjuntar una selfie. Las selfies valen 5 comandos\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1420,
        "y": 1040,
        "wires": [
            [
                "ac953597.3407d8"
            ]
        ]
    },
    {
        "id": "de74a601.848b58",
        "type": "debug",
        "z": "139909a2.e2cae6",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 670,
        "y": 380,
        "wires": []
    },
    {
        "id": "451ddb24.930664",
        "type": "http request",
        "z": "139909a2.e2cae6",
        "name": "Cam5",
        "method": "GET",
        "ret": "bin",
        "paytoqs": "ignore",
        "url": "192.168.15.8/capture",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1030,
        "y": 220,
        "wires": [
            [
                "58ca8f6.1400a7"
            ]
        ]
    },
    {
        "id": "81e5606c.933d1",
        "type": "http request",
        "z": "139909a2.e2cae6",
        "name": "Cam4",
        "method": "GET",
        "ret": "bin",
        "paytoqs": "ignore",
        "url": "192.168.15.7/capture",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1030,
        "y": 180,
        "wires": [
            [
                "1deb4f28.a8e331"
            ]
        ]
    },
    {
        "id": "bfb4b2f6.d9231",
        "type": "http request",
        "z": "139909a2.e2cae6",
        "name": "Cam3",
        "method": "GET",
        "ret": "bin",
        "paytoqs": "ignore",
        "url": "192.168.15.23/capture",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1030,
        "y": 140,
        "wires": [
            [
                "62eb1efa.75519"
            ]
        ]
    },
    {
        "id": "7d867d.581a3984",
        "type": "http request",
        "z": "139909a2.e2cae6",
        "name": "Cam2",
        "method": "GET",
        "ret": "bin",
        "paytoqs": "ignore",
        "url": "192.168.15.22/capture",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1030,
        "y": 100,
        "wires": [
            [
                "ece37180.fca3d"
            ]
        ]
    },
    {
        "id": "a0242040.3a728",
        "type": "http request",
        "z": "139909a2.e2cae6",
        "name": "Cam1",
        "method": "GET",
        "ret": "bin",
        "paytoqs": "ignore",
        "url": "192.168.15.24/capture",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1030,
        "y": 60,
        "wires": [
            [
                "f2e47e1f.aecfe"
            ]
        ]
    },
    {
        "id": "f2e47e1f.aecfe",
        "type": "file",
        "z": "139909a2.e2cae6",
        "name": "",
        "filename": "S:\\Captura\\desk1.jpg",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 1460,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "ece37180.fca3d",
        "type": "file",
        "z": "139909a2.e2cae6",
        "name": "",
        "filename": "S:\\Captura\\puerta1.jpg",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 1460,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "62eb1efa.75519",
        "type": "file",
        "z": "139909a2.e2cae6",
        "name": "",
        "filename": "S:\\Captura\\librero1.jpg",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 1460,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "1deb4f28.a8e331",
        "type": "file",
        "z": "139909a2.e2cae6",
        "name": "",
        "filename": "S:\\Captura\\mirilla1.jpg",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 1460,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "58ca8f6.1400a7",
        "type": "file",
        "z": "139909a2.e2cae6",
        "name": "",
        "filename": "S:\\Captura\\cocina1.jpg",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 1460,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "97e06fa6.eed6f",
        "type": "debug",
        "z": "139909a2.e2cae6",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 870,
        "y": 460,
        "wires": []
    },
    {
        "id": "405f85b1.9c39fc",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "msg.payload.sentMessageId = msg.originalMessage.chat.id;\nif (global.get(\"chances\") ==0 && (global.get(\"color\")==0 && global.get(\"comando\")==0 && global.get(\"falla\")==0)) {\n    msg.payload.content = \"Para que los comandos sean validos, necesitas subir una selfie\";\n    return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2340,
        "y": 360,
        "wires": [
            [
                "d5acc1db.ebd19"
            ]
        ]
    },
    {
        "id": "cc28d0b2.fa407",
        "type": "comment",
        "z": "139909a2.e2cae6",
        "name": "Recibir mensaje",
        "info": "",
        "x": 100,
        "y": 300,
        "wires": []
    },
    {
        "id": "15fd856d.c79dab",
        "type": "comment",
        "z": "139909a2.e2cae6",
        "name": "Distinguir entre imagen y mensaje",
        "info": "",
        "x": 420,
        "y": 300,
        "wires": []
    },
    {
        "id": "4abfca36.e630e4",
        "type": "comment",
        "z": "139909a2.e2cae6",
        "name": "Tomar foto en caso de recibir comando",
        "info": "",
        "x": 770,
        "y": 20,
        "wires": []
    },
    {
        "id": "d1d4b460.f44c88",
        "type": "ui_button",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "group": "f0d39309.5d582",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Reportar problema",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 510,
        "y": 2080,
        "wires": [
            [
                "9652e499.15c908"
            ]
        ]
    },
    {
        "id": "9652e499.15c908",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "msg.payload = global.get (\"problemo\");\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 840,
        "y": 2080,
        "wires": [
            [
                "e2feb2f0.81d2f",
                "15b430c5.8dfc4f"
            ]
        ]
    },
    {
        "id": "8ecb5524.8211e8",
        "type": "ui_text_input",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "label": "",
        "tooltip": "",
        "group": "f0d39309.5d582",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": true,
        "mode": "text",
        "delay": 300,
        "topic": "topic",
        "topicType": "msg",
        "x": 540,
        "y": 2120,
        "wires": [
            [
                "fa58a2a3.17b2b"
            ]
        ]
    },
    {
        "id": "fa58a2a3.17b2b",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "global.set (\"problemo\", msg.payload);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 840,
        "y": 2120,
        "wires": [
            []
        ]
    },
    {
        "id": "e2feb2f0.81d2f",
        "type": "e-mail",
        "z": "2e3f68c7.2f3ff",
        "server": "smtp.gmail.com",
        "port": "465",
        "secure": true,
        "tls": true,
        "name": "estocolmosindromeproyecto@gmail.com",
        "dname": "",
        "x": 1140,
        "y": 2080,
        "wires": []
    },
    {
        "id": "20ed334f.b04f3c",
        "type": "ui_toast",
        "z": "2e3f68c7.2f3ff",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "",
        "name": "",
        "x": 1330,
        "y": 2120,
        "wires": []
    },
    {
        "id": "15b430c5.8dfc4f",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Se ha enviado tu mensaje, pronto se reparará",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1060,
        "y": 2120,
        "wires": [
            [
                "20ed334f.b04f3c"
            ]
        ]
    },
    {
        "id": "50e9356d.d9667c",
        "type": "comment",
        "z": "2e3f68c7.2f3ff",
        "name": "Reporte de problemas",
        "info": "",
        "x": 520,
        "y": 2040,
        "wires": []
    },
    {
        "id": "6ec06e0d.50921",
        "type": "comment",
        "z": "139909a2.e2cae6",
        "name": "Permitir consultas, comandos y redirigir cuando no hay clics",
        "info": "",
        "x": 840,
        "y": 300,
        "wires": []
    },
    {
        "id": "1f73926e.f6568e",
        "type": "http request",
        "z": "139909a2.e2cae6",
        "name": "Cam6",
        "method": "GET",
        "ret": "bin",
        "paytoqs": "ignore",
        "url": "192.168.15.21/capture",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 2330,
        "y": 680,
        "wires": [
            [
                "d7a187a3.37dc48"
            ]
        ]
    },
    {
        "id": "d7a187a3.37dc48",
        "type": "file",
        "z": "139909a2.e2cae6",
        "name": "",
        "filename": "S:\\Captura\\sala2.jpg",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 2600,
        "y": 680,
        "wires": [
            []
        ]
    },
    {
        "id": "bd97beea.ce073",
        "type": "http request",
        "z": "139909a2.e2cae6",
        "name": "Cam5",
        "method": "GET",
        "ret": "bin",
        "paytoqs": "ignore",
        "url": "192.168.15.8/capture",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 2330,
        "y": 640,
        "wires": [
            [
                "d637ca9.fe38d38"
            ]
        ]
    },
    {
        "id": "cdb1554f.410108",
        "type": "http request",
        "z": "139909a2.e2cae6",
        "name": "Cam4",
        "method": "GET",
        "ret": "bin",
        "paytoqs": "ignore",
        "url": "192.168.15.7/capture",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 2330,
        "y": 600,
        "wires": [
            [
                "4849ef53.afafe"
            ]
        ]
    },
    {
        "id": "72d50e06.74e5f",
        "type": "http request",
        "z": "139909a2.e2cae6",
        "name": "Cam3",
        "method": "GET",
        "ret": "bin",
        "paytoqs": "ignore",
        "url": "192.168.15.23/capture",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 2330,
        "y": 560,
        "wires": [
            [
                "11af7134.802ecf"
            ]
        ]
    },
    {
        "id": "ff951881.e2a3a8",
        "type": "http request",
        "z": "139909a2.e2cae6",
        "name": "Cam2",
        "method": "GET",
        "ret": "bin",
        "paytoqs": "ignore",
        "url": "192.168.15.22/capture",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 2330,
        "y": 520,
        "wires": [
            [
                "f09d1216.618a7"
            ]
        ]
    },
    {
        "id": "834eb41c.9a7948",
        "type": "http request",
        "z": "139909a2.e2cae6",
        "name": "Cam1",
        "method": "GET",
        "ret": "bin",
        "paytoqs": "ignore",
        "url": "192.168.15.24/capture",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 2330,
        "y": 480,
        "wires": [
            [
                "78fac808.c9bae8"
            ]
        ]
    },
    {
        "id": "78fac808.c9bae8",
        "type": "file",
        "z": "139909a2.e2cae6",
        "name": "",
        "filename": "S:\\Captura\\desk2.jpg",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 2600,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "f09d1216.618a7",
        "type": "file",
        "z": "139909a2.e2cae6",
        "name": "",
        "filename": "S:\\Captura\\puerta2.jpg",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 2600,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "11af7134.802ecf",
        "type": "file",
        "z": "139909a2.e2cae6",
        "name": "",
        "filename": "S:\\Captura\\librero2.jpg",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 2600,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "4849ef53.afafe",
        "type": "file",
        "z": "139909a2.e2cae6",
        "name": "",
        "filename": "S:\\Captura\\mirilla2.jpg",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 2600,
        "y": 600,
        "wires": [
            []
        ]
    },
    {
        "id": "d637ca9.fe38d38",
        "type": "file",
        "z": "139909a2.e2cae6",
        "name": "",
        "filename": "S:\\Captura\\cocina2.jpg",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 2600,
        "y": 640,
        "wires": [
            []
        ]
    },
    {
        "id": "5ca242a2.5ea55c",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "if (msg.payload.content == \"/escritoriocam\") {\n    msg.filename = \"S:/Captura/desk1.jpg\";\n} else if (msg.payload.content == \"/puertacam\") {\n    msg.filename = \"S:/Captura/puerta1.jpg\"\n} else if (msg.payload.content == \"/librerocam\") {\n    msg.filename = \"S:/Captura/librero1.jpg\"\n} else if (msg.payload.content == \"/mirillacam\") {\n    msg.filename = \"S:/Captura/mirilla1.jpg\"\n} else if (msg.payload.content == \"/salacam\") {\n    msg.filename = \"S:/Captura/sala1.jpg\"\n} else if (msg.payload.content == \"/cocinacam\") {\n    msg.filename = \"S:/Captura/cocina1.jpg\"\n}\nmsg.payload2 = msg.payload;\n\nmsg.payload.sentMessageId = msg.originalMessage.chat.id;\nmsg.payload.content = \"Enviando fotos\";\nglobal.set (\"chances\", global.get (\"chances\")-1)\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1420,
        "y": 1100,
        "wires": [
            [
                "c1aa5c4e.052c",
                "35a3a7ce.42de38",
                "ac953597.3407d8"
            ]
        ]
    },
    {
        "id": "c1aa5c4e.052c",
        "type": "file in",
        "z": "139909a2.e2cae6",
        "name": "",
        "filename": "",
        "format": "",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "x": 1630,
        "y": 1100,
        "wires": [
            [
                "b6d5cfea.b3016"
            ]
        ]
    },
    {
        "id": "b6d5cfea.b3016",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "global.set (\"img0\", msg.payload);\nif (msg.payload2.content == \"/escritoriocam\") {\n    msg.filename = \"S:/Captura/desk2.jpg\";\n} else if (msg.payload2.content == \"/puertacam\") {\n    msg.filename = \"S:/Captura/puerta2.jpg\"\n} else if (msg.payload2.content == \"/librerocam\") {\n    msg.filename = \"S:/Captura/librero2.jpg\"\n} else if (msg.payload2.content == \"/mirillacam\") {\n    msg.filename = \"S:/Captura/mirilla2.jpg\"\n} else if (msg.payload2.content == \"/salacam\") {\n    msg.filename = \"S:/Captura/sala2.jpg\"\n} else if (msg.payload2.content == \"/cocinacam\") {\n    msg.filename = \"S:/Captura/cocina2.jpg\"\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1850,
        "y": 1100,
        "wires": [
            [
                "108db5b0.1f9e1a"
            ]
        ]
    },
    {
        "id": "108db5b0.1f9e1a",
        "type": "file in",
        "z": "139909a2.e2cae6",
        "name": "",
        "filename": "",
        "format": "",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "x": 2050,
        "y": 1100,
        "wires": [
            [
                "810e0c64.4122e"
            ]
        ]
    },
    {
        "id": "810e0c64.4122e",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "global.set (\"img1\", msg.payload);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2340,
        "y": 1100,
        "wires": [
            []
        ]
    },
    {
        "id": "d819823.105d28",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "\n\nmsg.payload = \"chances=\"+global.get(\"chances\")+\" color=\"+global.get(\"color\")+\" comando=\"+global.get(\"comando\")+\" falla=\"+global.get(\"falla\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2560,
        "y": 280,
        "wires": [
            [
                "879fe808.e94e68"
            ]
        ]
    },
    {
        "id": "879fe808.e94e68",
        "type": "ui_text",
        "z": "139909a2.e2cae6",
        "d": true,
        "group": "8feab182.895b9",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "text",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 2830,
        "y": 280,
        "wires": []
    },
    {
        "id": "81d41edb.4f6e7",
        "type": "comment",
        "z": "2e3f68c7.2f3ff",
        "name": "Templates",
        "info": "",
        "x": 1780,
        "y": 120,
        "wires": []
    },
    {
        "id": "d1b70d9a.37629",
        "type": "comment",
        "z": "2e3f68c7.2f3ff",
        "name": "Reinicio de variables",
        "info": "",
        "x": 1810,
        "y": 540,
        "wires": []
    },
    {
        "id": "8b758924.5ea558",
        "type": "comment",
        "z": "2e3f68c7.2f3ff",
        "name": "Indicador de clics disponibles",
        "info": "",
        "x": 1840,
        "y": 700,
        "wires": []
    },
    {
        "id": "70e04f6f.8a35",
        "type": "debug",
        "z": "5478817a.a9116",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 530,
        "y": 280,
        "wires": []
    },
    {
        "id": "81402b1.9a5a1d8",
        "type": "http in",
        "z": "5478817a.a9116",
        "name": "",
        "url": "/traccarevent",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 190,
        "y": 140,
        "wires": [
            [
                "70e04f6f.8a35",
                "79e40535.29d31c",
                "b056b987.ba0958",
                "5599cf1d.4bd79"
            ]
        ]
    },
    {
        "id": "79e40535.29d31c",
        "type": "http response",
        "z": "5478817a.a9116",
        "name": "",
        "statusCode": "200",
        "headers": {},
        "x": 540,
        "y": 140,
        "wires": []
    },
    {
        "id": "b056b987.ba0958",
        "type": "function",
        "z": "5478817a.a9116",
        "name": "Actualizar estados exitosos",
        "func": "if (msg.payload.event.type != \"deviceUnknown\" && msg.event != \"deviceOnline\" ) {\n    global.set(\"locationevent\", msg.payload.event.type);\n    global.set (\"location\", msg.payload.geofence.name);\n    return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 600,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "68ff88f9.c08638",
        "type": "inject",
        "z": "5478817a.a9116",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "600",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 170,
        "y": 360,
        "wires": [
            [
                "f98f1a91.4e8bb8",
                "5795c654.e8da28",
                "20692d75.148472"
            ]
        ]
    },
    {
        "id": "373b357d.13a5ca",
        "type": "debug",
        "z": "5478817a.a9116",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 810,
        "y": 360,
        "wires": []
    },
    {
        "id": "f98f1a91.4e8bb8",
        "type": "function",
        "z": "5478817a.a9116",
        "name": "",
        "func": "msg.event = global.get (\"locationevent\");\nmsg.geofence = global.get (\"location\");\nif (msg.event == \"geofenceEnter\") {\n    msg.payload = \"23 está en: \"+msg.geofence;\n} else if (msg.event == \"geofenceExit\") {\n    msg.payload = \"23 está afuera\";\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 360,
        "wires": [
            [
                "373b357d.13a5ca"
            ]
        ]
    },
    {
        "id": "ca4892cf.27299",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "\nif (msg.payload != \"false\") {\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 720,
        "y": 380,
        "wires": [
            [
                "6d86e910.d4deb8",
                "c66e3ae8.801638"
            ]
        ]
    },
    {
        "id": "6d86e910.d4deb8",
        "type": "http request",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "http://localhost:5055/?id=25122021&lat=19.4227417&lon=-99.1483259",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 970,
        "y": 380,
        "wires": [
            [
                "c66e3ae8.801638"
            ]
        ]
    },
    {
        "id": "c66e3ae8.801638",
        "type": "debug",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1210,
        "y": 440,
        "wires": []
    },
    {
        "id": "3364dffc.57ab",
        "type": "exec",
        "z": "2e3f68c7.2f3ff",
        "command": "",
        "addpay": "payload",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 2690,
        "y": 240,
        "wires": [
            [
                "95d56bb9.c0f5a8"
            ],
            [],
            []
        ]
    },
    {
        "id": "adac19d0.be4668",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "msg.payload = \"python S:\\\\DeepFace\\\\Code\\\\FaceDetector-f\\\\fdf.py -i \"+msg.filename;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2480,
        "y": 240,
        "wires": [
            [
                "3364dffc.57ab"
            ]
        ]
    },
    {
        "id": "45d31bae.0356a4",
        "type": "json",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 3130,
        "y": 240,
        "wires": [
            [
                "d05cd3cf.f27be",
                "732cafe6.7e7ef",
                "ee130de6.a4176",
                "af11dc39.48de2",
                "28a9c8a.f00fe38"
            ]
        ]
    },
    {
        "id": "f9ca23bd.9a549",
        "type": "http response",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "statusCode": "205",
        "headers": {},
        "x": 2000,
        "y": 180,
        "wires": []
    },
    {
        "id": "249667ae.8f70e8",
        "type": "comment",
        "z": "2e3f68c7.2f3ff",
        "name": "205 me deja en el mismo lugar",
        "info": "",
        "x": 2080,
        "y": 140,
        "wires": []
    },
    {
        "id": "d05cd3cf.f27be",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "msg.payload2 = msg.payload;\nmsg.payload = \"Cara detectada\";\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3400,
        "y": 240,
        "wires": [
            [
                "29a3351a.f28f6a"
            ]
        ]
    },
    {
        "id": "95d56bb9.c0f5a8",
        "type": "switch",
        "z": "2e3f68c7.2f3ff",
        "name": "rc.code",
        "property": "rc.code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 2900,
        "y": 240,
        "wires": [
            [
                "45d31bae.0356a4"
            ],
            [
                "49cc7104.28aa5"
            ]
        ]
    },
    {
        "id": "49cc7104.28aa5",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "msg.payload2 = msg.payload;\nmsg.payload = \"Cara no detectada. Este algoritmo no es compatible con lentes. Intenta de nuevo\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3140,
        "y": 280,
        "wires": [
            [
                "29a3351a.f28f6a"
            ]
        ]
    },
    {
        "id": "b3dfe40c.a21a08",
        "type": "exec",
        "z": "139909a2.e2cae6",
        "command": "",
        "addpay": "payload",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 1630,
        "y": 1480,
        "wires": [
            [
                "3f94c86f.214c88"
            ],
            [],
            []
        ]
    },
    {
        "id": "e0efb4d8.3c7898",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "msg.payload = \"python S:\\\\DeepFace\\\\Code\\\\FaceDetector-f\\\\fdf.py -i \"+msg.filename;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1420,
        "y": 1480,
        "wires": [
            [
                "b3dfe40c.a21a08"
            ]
        ]
    },
    {
        "id": "72c6b95a.bcbae8",
        "type": "json",
        "z": "139909a2.e2cae6",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 2050,
        "y": 1480,
        "wires": [
            [
                "d7fbb48f.148668",
                "ed5f3c2e.5d224"
            ]
        ]
    },
    {
        "id": "3f94c86f.214c88",
        "type": "switch",
        "z": "139909a2.e2cae6",
        "name": "rc.code",
        "property": "rc.code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1840,
        "y": 1480,
        "wires": [
            [
                "72c6b95a.bcbae8"
            ],
            [
                "d3e9552c.6b8b68"
            ]
        ]
    },
    {
        "id": "d3e9552c.6b8b68",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "msg.payload = msg.payload2;\nmsg.payload.sentMessageId = msg.originalMessage.chat.id;\nmsg.payload.type = \"message\";\nmsg.payload.content = \"Cara no detectada. Este algoritmo no es compatible con lentes. Intenta de nuevo.\";\n\n//msg.payload2 = msg.payload;\n//msg.payload = \"Cara no detectada. Intenta de nuevo\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2340,
        "y": 1600,
        "wires": [
            [
                "2731880.4e7ee78"
            ]
        ]
    },
    {
        "id": "303fa4a6.4c426c",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "msg.payload.sentMessageId = msg.originalMessage.chat.id;\nmsg.payload.type = \"message\";\nmsg.payload.content = \"Analizando\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 680,
        "y": 660,
        "wires": [
            [
                "cafb003.2838"
            ]
        ]
    },
    {
        "id": "cafb003.2838",
        "type": "telegram sender",
        "z": "139909a2.e2cae6",
        "name": "",
        "bot": "da70a51bc78adb2a",
        "haserroroutput": false,
        "outputs": 1,
        "x": 910,
        "y": 660,
        "wires": [
            []
        ]
    },
    {
        "id": "233b119e.7f252e",
        "type": "ui_toast",
        "z": "2e3f68c7.2f3ff",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "",
        "name": "",
        "x": 2730,
        "y": 180,
        "wires": []
    },
    {
        "id": "8ec5b978.bafa48",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "msg.payload = \"Analizando\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2480,
        "y": 180,
        "wires": [
            [
                "233b119e.7f252e"
            ]
        ]
    },
    {
        "id": "29a3351a.f28f6a",
        "type": "ui_toast",
        "z": "2e3f68c7.2f3ff",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "",
        "name": "",
        "x": 3650,
        "y": 240,
        "wires": []
    },
    {
        "id": "732cafe6.7e7ef",
        "type": "debug",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3390,
        "y": 60,
        "wires": []
    },
    {
        "id": "d4a04924.bb1568",
        "type": "ui_text",
        "z": "2e3f68c7.2f3ff",
        "group": "457235cd.67e71c",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Ubicación de 23",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "x": 2280,
        "y": 900,
        "wires": []
    },
    {
        "id": "274b68ef.1e4b58",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "msg.event = global.get (\"locationevent\");\nmsg.geofence = global.get (\"location\");\nif (msg.event == \"geofenceEnter\") {\n    msg.payload = \"23 está en: \"+msg.geofence;\n} else if (msg.event == \"geofenceExit\") {\n    msg.payload = \"23 está afuera\";\n}else {\n    msg.payload = \"23 está en: \"+msg.geofence;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2000,
        "y": 900,
        "wires": [
            [
                "d4a04924.bb1568"
            ]
        ]
    },
    {
        "id": "ee130de6.a4176",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "msg.topic=\"INSERT INTO selfiedashboard (filename, age, emotion, gender, race, angry, disgust, fear, happy, sad, surprise, neutral, asian, indian, black, white, middleeastern, latino) VALUES ('\"+global.get (\"nameset\")+\"','\"+msg.payload.angry.age+\"','\"+msg.payload.angry.dominant_emotion+\"','\"+msg.payload.angry.gender+\"','\"+msg.payload.angry.dominant_race+\"','\"+msg.payload.angry.emotion+\"','\"+msg.payload.disgust.emotion+\"','\"+msg.payload.fear.emotion+\"','\"+msg.payload.happy.emotion+\"','\"+msg.payload.sad.emotion+\"','\"+msg.payload.surprise.emotion+\"','\"+msg.payload.neutral.emotion+\"','\"+msg.payload.asian.race+\"','\"+msg.payload.indian.race+\"','\"+msg.payload.black.race+\"','\"+msg.payload.white.race+\"','\"+msg.payload[\"middle eastern\"].race+\"','\"+msg.payload[\"latino hispanic\"].race+\"')\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3400,
        "y": 180,
        "wires": [
            [
                "3209ee76.0ec392"
            ]
        ]
    },
    {
        "id": "3209ee76.0ec392",
        "type": "mysql",
        "z": "2e3f68c7.2f3ff",
        "mydb": "1a27214b.e39c3f",
        "name": "",
        "x": 3650,
        "y": 180,
        "wires": [
            [
                "33c33f59.a0108"
            ]
        ]
    },
    {
        "id": "4a79d5a3.df9adc",
        "type": "ui_text",
        "z": "2e3f68c7.2f3ff",
        "group": "457235cd.67e71c",
        "order": 2,
        "width": 6,
        "height": 3,
        "name": "",
        "label": "Lo que sé sobre ti gracias a tu foto.",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "x": 3700,
        "y": 120,
        "wires": []
    },
    {
        "id": "af11dc39.48de2",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "\n\nmsg.payload = \"Tienes aproximadamente \"+msg.payload.angry.age+\" años, tu genero es \"+msg.payload.angry.gender+\" tu grupo etnico es \"+msg.payload.angry.dominant_race+\" y tu estado de ánimo es \"+msg.payload.angry.dominant_emotion;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3400,
        "y": 120,
        "wires": [
            [
                "4a79d5a3.df9adc"
            ]
        ]
    },
    {
        "id": "33c33f59.a0108",
        "type": "debug",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3890,
        "y": 180,
        "wires": []
    },
    {
        "id": "d7fbb48f.148668",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "msg.topic=\"INSERT INTO selfiedashboard (filename, age, emotion, gender, race, angry, disgust, fear, happy, sad, surprise, neutral, asian, indian, black, white, middleeastern, latino) VALUES ('\"+global.get (\"nameset\")+\"','\"+msg.payload.angry.age+\"','\"+msg.payload.angry.dominant_emotion+\"','\"+msg.payload.angry.gender+\"','\"+msg.payload.angry.dominant_race+\"','\"+msg.payload.angry.emotion+\"','\"+msg.payload.disgust.emotion+\"','\"+msg.payload.fear.emotion+\"','\"+msg.payload.happy.emotion+\"','\"+msg.payload.sad.emotion+\"','\"+msg.payload.surprise.emotion+\"','\"+msg.payload.neutral.emotion+\"','\"+msg.payload.asian.race+\"','\"+msg.payload.indian.race+\"','\"+msg.payload.black.race+\"','\"+msg.payload.white.race+\"','\"+msg.payload[\"middle eastern\"].race+\"','\"+msg.payload[\"latino hispanic\"].race+\"')\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2340,
        "y": 1660,
        "wires": [
            [
                "a53b1c6a.cf0f6"
            ]
        ]
    },
    {
        "id": "a53b1c6a.cf0f6",
        "type": "mysql",
        "z": "139909a2.e2cae6",
        "mydb": "1a27214b.e39c3f",
        "name": "",
        "x": 2590,
        "y": 1660,
        "wires": [
            []
        ]
    },
    {
        "id": "6d901239.51e5cc",
        "type": "delay",
        "z": "139909a2.e2cae6",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 2340,
        "y": 1160,
        "wires": [
            [
                "a4399293.bbbb68"
            ]
        ]
    },
    {
        "id": "6c8952e0.e30c8c",
        "type": "json",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "property": "payload",
        "action": "obj",
        "pretty": false,
        "x": 450,
        "y": 600,
        "wires": [
            [
                "894ae1ef.b4114"
            ]
        ]
    },
    {
        "id": "91915460.f78208",
        "type": "mqtt in",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "topic": "hugo/se/sala",
        "qos": "2",
        "datatype": "auto",
        "broker": "4c35078.987c1f8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "x": 130,
        "y": 600,
        "wires": [
            [
                "6c8952e0.e30c8c"
            ]
        ]
    },
    {
        "id": "894ae1ef.b4114",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "global.set (\"personadetectadaE\",msg.payload.predictions[0].userid);\nglobal.set (\"confidenceE\", msg.payload.predictions[0].confidence);\n//msg.payload = msg.payload.predictions[0].userid;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 720,
        "y": 600,
        "wires": [
            [
                "9c632d11.72577"
            ]
        ]
    },
    {
        "id": "57458d7d.4d7cb4",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "msg.topic = \"Hugo Entretenimiento\";\nmsg.payload = global.get (\"confidenceE\");\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 1000,
        "wires": [
            [
                "62d7f239.ab755c"
            ]
        ]
    },
    {
        "id": "12f0077f.48ad59",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "Balance de detección",
        "func": "if (global.get (\"confidenceE\") > 0)\n{\n    global.set (\"confidenceW\", 0);\n    return msg;\n} else if (global.get (\"confidenceW\") > 0) \n{\n    global.set (\"confidenceE\", 0);\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 400,
        "y": 1040,
        "wires": [
            []
        ]
    },
    {
        "id": "e9ca1080.c06eb",
        "type": "ping",
        "z": "c2c0e0c1.0deb1",
        "protocol": "Automatic",
        "mode": "triggered",
        "name": "",
        "host": "",
        "timer": "60000",
        "inputs": 1,
        "x": 450,
        "y": 380,
        "wires": [
            [
                "ca4892cf.27299"
            ]
        ]
    },
    {
        "id": "a8cb4a6f.546608",
        "type": "inject",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "600",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "192.168.15.12",
        "payload": "192.168.15.12",
        "payloadType": "str",
        "x": 210,
        "y": 380,
        "wires": [
            [
                "e9ca1080.c06eb"
            ]
        ]
    },
    {
        "id": "19b9356c.e6135b",
        "type": "comment",
        "z": "c2c0e0c1.0deb1",
        "name": "Forzar envío de ubicación si se está en red local",
        "info": "",
        "x": 240,
        "y": 340,
        "wires": []
    },
    {
        "id": "5599cf1d.4bd79",
        "type": "function",
        "z": "5478817a.a9116",
        "name": "Localizar en casa",
        "func": "if (msg.payload.event.type == \"deviceUnknown\" || msg.event == \"deviceOnline\") {\n    global.set(\"locationevent\", msg.payload.event.type);\n    return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 570,
        "y": 220,
        "wires": [
            [
                "845ab348.4f25"
            ]
        ]
    },
    {
        "id": "60e7cde7.90f054",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "if (global.get (\"locationevent\") == \"deviceUnknown\") {\n    msg.topic = \"192.168.15.12\";\n    msg.topic2 = global.get (\"locationevent\");\n    msg.payload =\"192.168.15.12\";\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 460,
        "y": 480,
        "wires": [
            [
                "e9ca1080.c06eb",
                "6b1b7e04.52c72"
            ]
        ]
    },
    {
        "id": "845ab348.4f25",
        "type": "link out",
        "z": "5478817a.a9116",
        "name": "GPS desconectado",
        "links": [
            "aa352353.f8181"
        ],
        "x": 775,
        "y": 220,
        "wires": []
    },
    {
        "id": "aa352353.f8181",
        "type": "link in",
        "z": "c2c0e0c1.0deb1",
        "name": "GPS desconectado - checker",
        "links": [
            "845ab348.4f25"
        ],
        "x": 215,
        "y": 480,
        "wires": [
            [
                "60e7cde7.90f054"
            ]
        ]
    },
    {
        "id": "6af46b82.1a88f4",
        "type": "comment",
        "z": "c2c0e0c1.0deb1",
        "name": "Comprobar si 23 se encuentra en casa en caso de perderse conexión",
        "info": "",
        "x": 310,
        "y": 440,
        "wires": []
    },
    {
        "id": "84fba33e.7bd62",
        "type": "comment",
        "z": "c2c0e0c1.0deb1",
        "name": "Detectar a 23 en sala",
        "info": "",
        "x": 160,
        "y": 560,
        "wires": []
    },
    {
        "id": "6b1b7e04.52c72",
        "type": "debug",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 710,
        "y": 480,
        "wires": []
    },
    {
        "id": "ff5aa935.d87fd8",
        "type": "mqtt in",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "topic": "hugo/se/backdoor",
        "qos": "2",
        "datatype": "auto",
        "broker": "4c35078.987c1f8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "x": 290,
        "y": 240,
        "wires": [
            [
                "a6649275.44524"
            ]
        ]
    },
    {
        "id": "996b916e.c04b7",
        "type": "debug",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 990,
        "y": 320,
        "wires": []
    },
    {
        "id": "c40f4cff.26842",
        "type": "function",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "func": "\n\nif (msg.payload.predictions[0].userid == \"Hugo\" && msg.payload.predictions[0].confidence > 0.75) {\n    msg.payload = \"Alexa, abrir puerta\";\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 740,
        "y": 240,
        "wires": [
            [
                "7d90248.60601dc"
            ]
        ]
    },
    {
        "id": "7d90248.60601dc",
        "type": "ui_audio",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "group": "74be730e.33ff4c",
        "voice": "Microsoft Dalia Online (Natural) - Spanish (Mexico)",
        "always": true,
        "x": 980,
        "y": 240,
        "wires": []
    },
    {
        "id": "1cb36b18.1d8fe5",
        "type": "mqtt in",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "topic": "hugo/se/puerta",
        "qos": "2",
        "datatype": "auto",
        "broker": "4c35078.987c1f8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "x": 280,
        "y": 320,
        "wires": [
            [
                "f6e0a282.cd471"
            ]
        ]
    },
    {
        "id": "a6649275.44524",
        "type": "json",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 530,
        "y": 240,
        "wires": [
            [
                "c40f4cff.26842"
            ]
        ]
    },
    {
        "id": "f6e0a282.cd471",
        "type": "json",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 520,
        "y": 320,
        "wires": [
            [
                "c40f4cff.26842",
                "996b916e.c04b7"
            ]
        ]
    },
    {
        "id": "a7bddad7.172108",
        "type": "inject",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "Alexa, abrir puerta",
        "payloadType": "str",
        "x": 800,
        "y": 120,
        "wires": [
            [
                "7d90248.60601dc"
            ]
        ]
    },
    {
        "id": "57bddcb3.d77654",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get (\"existentfilename\") == 0 && global.get (\"existentsize\") == 0) {\n    msg.topic=\"INSERT INTO selfieregister (filename, filesize) VALUES ('\"+msg.req.files[0].originalname+\"','\"+msg.req.files[0].size+\"')\";\n    return msg;\n} else {\n    msg.payload = \"Ya existe ese archivo, prueba de nuevo.\";\n    msg.topic=\"repetido\";\n    return msg;\n}\n//msg.topic=\"SELECT uid FROM rfid WHERE filename ='\"+req.files[0].originalname+\"'\";\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2700,
        "y": 320,
        "wires": [
            [
                "5be8ee0c.c4dda",
                "b2f84e6b.acdee"
            ]
        ]
    },
    {
        "id": "f9f8a58c.583938",
        "type": "mysql",
        "z": "2e3f68c7.2f3ff",
        "mydb": "1a27214b.e39c3f",
        "name": "",
        "x": 3170,
        "y": 320,
        "wires": [
            [
                "e0c6f6eb.2c08c8"
            ]
        ]
    },
    {
        "id": "c5951628.5c4598",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "msg.topic=\"SELECT id FROM selfieregister WHERE filename ='\"+msg.req.files[0].originalname+\"'\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2000,
        "y": 320,
        "wires": [
            [
                "6a7522b.61917dc"
            ]
        ]
    },
    {
        "id": "6a7522b.61917dc",
        "type": "mysql",
        "z": "2e3f68c7.2f3ff",
        "mydb": "1a27214b.e39c3f",
        "name": "",
        "x": 2250,
        "y": 320,
        "wires": [
            [
                "7a54555b.3d913c"
            ]
        ]
    },
    {
        "id": "434392bf.517b1c",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "msg.topic=\"SELECT id FROM selfieregister WHERE filesize ='\"+msg.req.files[0].size+\"'\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2000,
        "y": 380,
        "wires": [
            [
                "3933ebf3.842d14"
            ]
        ]
    },
    {
        "id": "3933ebf3.842d14",
        "type": "mysql",
        "z": "2e3f68c7.2f3ff",
        "mydb": "1a27214b.e39c3f",
        "name": "",
        "x": 2250,
        "y": 380,
        "wires": [
            [
                "1d605feb.f29d1"
            ]
        ]
    },
    {
        "id": "7a54555b.3d913c",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (msg.payload == \"\") {\n    global.set (\"existentfilename\", 0);\n} else if (msg.payload[0].id > 0) {\n    global.set (\"existentfilename\", 1);\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2480,
        "y": 320,
        "wires": [
            [
                "57bddcb3.d77654"
            ]
        ]
    },
    {
        "id": "1d605feb.f29d1",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (msg.payload == \"\") {\n    global.set (\"existentsize\", 0);\n} else if (msg.payload[0].id > 0) {\n    global.set (\"existentsize\", 1);\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2480,
        "y": 380,
        "wires": [
            [
                "57bddcb3.d77654"
            ]
        ]
    },
    {
        "id": "69b7c747.e7ddc8",
        "type": "ui_toast",
        "z": "2e3f68c7.2f3ff",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "",
        "name": "",
        "x": 3170,
        "y": 380,
        "wires": []
    },
    {
        "id": "5be8ee0c.c4dda",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (msg.topic == \"repetido\") {\n    msg.topic = \"\";\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2900,
        "y": 380,
        "wires": [
            [
                "69b7c747.e7ddc8"
            ]
        ]
    },
    {
        "id": "b2f84e6b.acdee",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (msg.topic != \"repetido\") {\n    return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2900,
        "y": 320,
        "wires": [
            [
                "f9f8a58c.583938"
            ]
        ]
    },
    {
        "id": "89db60be.74429",
        "type": "comment",
        "z": "2e3f68c7.2f3ff",
        "name": "Control Manual",
        "info": "",
        "x": 1900,
        "y": 1000,
        "wires": []
    },
    {
        "id": "c636e585.1b0728",
        "type": "inject",
        "z": "2e3f68c7.2f3ff",
        "name": "5 clicls",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1890,
        "y": 1080,
        "wires": [
            [
                "4a7410ef.5c33d"
            ]
        ]
    },
    {
        "id": "97a14ec2.a5d24",
        "type": "inject",
        "z": "2e3f68c7.2f3ff",
        "name": "Vaciar clics",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1900,
        "y": 1180,
        "wires": [
            [
                "99a24eae.c2671"
            ]
        ]
    },
    {
        "id": "4a7410ef.5c33d",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "global.set (\"chances\",5);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2120,
        "y": 1080,
        "wires": [
            []
        ]
    },
    {
        "id": "99a24eae.c2671",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "global.set (\"chances\",0);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2120,
        "y": 1180,
        "wires": [
            []
        ]
    },
    {
        "id": "4eb7e904.e78ad8",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "if (global.get (\"existentfilename\") == 0 && global.get (\"existentsize\") == 0) {\n    msg.topic=\"INSERT INTO selfieregister (filename, filesize) VALUES ('\"+msg.payload2.content+\"','\"+msg.originalMessage.photo[msg.topic2-1].file_size+\"')\";\n    return msg;\n} else {\n    msg.payload = \"Ya existe ese archivo, prueba de nuevo.\";\n    msg.topic=\"repetido\";\n    return msg;\n}\n//msg.topic=\"SELECT uid FROM rfid WHERE filename ='\"+req.files[0].originalname+\"'\";\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1840,
        "y": 1280,
        "wires": [
            [
                "6297e878.2bef38",
                "eb4910ce.b8ac1"
            ]
        ]
    },
    {
        "id": "ac6e5794.b68438",
        "type": "mysql",
        "z": "139909a2.e2cae6",
        "mydb": "1a27214b.e39c3f",
        "name": "",
        "x": 2370,
        "y": 1280,
        "wires": [
            [
                "694f21ec.36f7c8"
            ]
        ]
    },
    {
        "id": "923f68e2.3b0ef8",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "msg.topic=\"SELECT id FROM selfieregister WHERE filename ='\"+msg.payload.content+\"'\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 880,
        "y": 1280,
        "wires": [
            [
                "86590d70.8a01"
            ]
        ]
    },
    {
        "id": "86590d70.8a01",
        "type": "mysql",
        "z": "139909a2.e2cae6",
        "mydb": "1a27214b.e39c3f",
        "name": "",
        "x": 1070,
        "y": 1280,
        "wires": [
            [
                "4627ecc5.15d2c4"
            ]
        ]
    },
    {
        "id": "72a924ce.2bed6c",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "msg.topic=\"SELECT id FROM selfieregister WHERE filesize = '\"+msg.payload.photos[msg.topic2-1].file_size+\"'\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 880,
        "y": 1340,
        "wires": [
            [
                "56a32745.504608"
            ]
        ]
    },
    {
        "id": "56a32745.504608",
        "type": "mysql",
        "z": "139909a2.e2cae6",
        "mydb": "1a27214b.e39c3f",
        "name": "",
        "x": 1070,
        "y": 1340,
        "wires": [
            [
                "b7dfc34e.fe217"
            ]
        ]
    },
    {
        "id": "4627ecc5.15d2c4",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "if (msg.payload == \"\") {\n    global.set (\"existentfilename\", 0);\n} else if (msg.payload[0].id > 0) {\n    global.set (\"existentfilename\", 1);\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1420,
        "y": 1280,
        "wires": [
            [
                "dc0101b6.16d93"
            ]
        ]
    },
    {
        "id": "b7dfc34e.fe217",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "if (msg.payload == \"\") {\n    global.set (\"existentsize\", 0);\n} else if (msg.payload[0].id > 0) {\n    global.set (\"existentsize\", 1);\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1420,
        "y": 1340,
        "wires": [
            []
        ]
    },
    {
        "id": "6297e878.2bef38",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "if (msg.topic == \"repetido\") {\n    msg.payload = msg.payload2;\n    msg.payload.sentMessageId = msg.originalMessage.chat.id;\n    msg.payload.type = \"message\";\n    msg.payload.content = \"Ese archivo ya existe, intenta de nuevo.\";\n    return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2060,
        "y": 1340,
        "wires": [
            [
                "2731880.4e7ee78"
            ]
        ]
    },
    {
        "id": "eb4910ce.b8ac1",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "if (msg.topic != \"repetido\") {\n    return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2060,
        "y": 1280,
        "wires": [
            [
                "ac6e5794.b68438"
            ]
        ]
    },
    {
        "id": "482f8931.1dea58",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "msg.topic2 = msg.payload.photos.length;\nmsg.payload2 = msg.payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 680,
        "y": 1280,
        "wires": [
            [
                "923f68e2.3b0ef8",
                "72a924ce.2bed6c"
            ]
        ]
    },
    {
        "id": "dc0101b6.16d93",
        "type": "delay",
        "z": "139909a2.e2cae6",
        "name": "",
        "pauseType": "delay",
        "timeout": "0.5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1650,
        "y": 1280,
        "wires": [
            [
                "4eb7e904.e78ad8"
            ]
        ]
    },
    {
        "id": "6adf4934.32c0b8",
        "type": "debug",
        "z": "139909a2.e2cae6",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 670,
        "y": 460,
        "wires": []
    },
    {
        "id": "817e01b3.66606",
        "type": "comment",
        "z": "139909a2.e2cae6",
        "name": "Comprobar archivo existente",
        "info": "",
        "x": 740,
        "y": 1220,
        "wires": []
    },
    {
        "id": "1019bac3.ff7535",
        "type": "comment",
        "z": "139909a2.e2cae6",
        "name": "Guardar foto no existente",
        "info": "",
        "x": 730,
        "y": 1420,
        "wires": []
    },
    {
        "id": "1826e665.f9f7ba",
        "type": "comment",
        "z": "5478817a.a9116",
        "name": "Obtener eventos",
        "info": "",
        "x": 180,
        "y": 80,
        "wires": []
    },
    {
        "id": "28a9c8a.f00fe38",
        "type": "switch",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "property": "payload.angry.dominant_emotion",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "happy",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "surprise",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "sad",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "neutral",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "fear",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "disgust",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "angry",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 7,
        "x": 3390,
        "y": 340,
        "wires": [
            [
                "fb865776.b31098"
            ],
            [
                "e3b381d3.7f9b5"
            ],
            [
                "e1a5159.d1a8de8"
            ],
            [
                "30fa7dbb.76bd42"
            ],
            [
                "dddbe1c6.99c8d"
            ],
            [
                "29aca989.f0d9f6"
            ],
            [
                "57f29e3.0ab806"
            ]
        ]
    },
    {
        "id": "fb865776.b31098",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "var add = parseInt (msg.payload.happy.emotion / 10);\nglobal.set (\"chances\", 7 + add);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3620,
        "y": 300,
        "wires": [
            [
                "3be94514.e1e62a"
            ]
        ]
    },
    {
        "id": "e3b381d3.7f9b5",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "var add = parseInt (msg.payload.surprise.emotion / 10);\nglobal.set (\"chances\", 6 + add);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3620,
        "y": 340,
        "wires": [
            [
                "3be94514.e1e62a"
            ]
        ]
    },
    {
        "id": "e1a5159.d1a8de8",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "var add = parseInt (msg.payload.sad.emotion / 10);\nglobal.set (\"chances\", 5 + add);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3620,
        "y": 380,
        "wires": [
            [
                "3be94514.e1e62a"
            ]
        ]
    },
    {
        "id": "30fa7dbb.76bd42",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "var add = parseInt (msg.payload.neutral.emotion / 10);\nglobal.set (\"chances\",4 + add);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3620,
        "y": 420,
        "wires": [
            [
                "3be94514.e1e62a"
            ]
        ]
    },
    {
        "id": "dddbe1c6.99c8d",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "var add = parseInt (msg.payload.fear.emotion / 10);\nglobal.set (\"chances\", 3 + add);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3620,
        "y": 460,
        "wires": [
            [
                "3be94514.e1e62a"
            ]
        ]
    },
    {
        "id": "29aca989.f0d9f6",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "var add = parseInt (msg.payload.disgust.emotion / 10);\nglobal.set (\"chances\", 2 + add);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3620,
        "y": 500,
        "wires": [
            [
                "3be94514.e1e62a"
            ]
        ]
    },
    {
        "id": "57f29e3.0ab806",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "var add = parseInt (msg.payload.angry.emotion / 10);\nglobal.set (\"chances\", 1 + add);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3620,
        "y": 540,
        "wires": [
            [
                "3be94514.e1e62a"
            ]
        ]
    },
    {
        "id": "3be94514.e1e62a",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (msg.payload.angry.gender == \"Man\") {\n    global.set (\"chances\", parseInt(global.get(\"chances\") /3));\n} else {\n    global.set (\"chances\", parseInt(global.get(\"chances\") /4));\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3900,
        "y": 300,
        "wires": [
            [
                "1a9a66f0.059209"
            ]
        ]
    },
    {
        "id": "1a9a66f0.059209",
        "type": "switch",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "property": "payload.angry.dominant_race",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "white",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "black",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "latino hispanic",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "indian",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "asian",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "middle eastern",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 6,
        "x": 4150,
        "y": 340,
        "wires": [
            [
                "c75a3033.3b4d8"
            ],
            [
                "2c9f796f.647026"
            ],
            [
                "2da8f8d2.e7f938"
            ],
            [
                "f82f83f2.37d63"
            ],
            [
                "509c450a.e60d5c"
            ],
            [
                "1b3f6167.fea83f"
            ]
        ]
    },
    {
        "id": "c75a3033.3b4d8",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "global.set (\"chances\", global.get (\"chances\") + 2);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4420,
        "y": 320,
        "wires": [
            [
                "69487f3.5fb918"
            ]
        ]
    },
    {
        "id": "2c9f796f.647026",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "global.set (\"chances\", global.get (\"chances\") + 1);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4420,
        "y": 360,
        "wires": [
            [
                "69487f3.5fb918"
            ]
        ]
    },
    {
        "id": "2da8f8d2.e7f938",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "global.set (\"chances\", global.get (\"chances\") - 2);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4420,
        "y": 400,
        "wires": [
            [
                "69487f3.5fb918"
            ]
        ]
    },
    {
        "id": "f82f83f2.37d63",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "global.set (\"chances\", global.get (\"chances\") - 2);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4420,
        "y": 440,
        "wires": [
            [
                "69487f3.5fb918"
            ]
        ]
    },
    {
        "id": "509c450a.e60d5c",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "global.set (\"chances\", global.get (\"chances\") -3);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4420,
        "y": 480,
        "wires": [
            [
                "69487f3.5fb918"
            ]
        ]
    },
    {
        "id": "1b3f6167.fea83f",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "global.set (\"chances\", global.get (\"chances\") -4);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4420,
        "y": 520,
        "wires": [
            [
                "69487f3.5fb918"
            ]
        ]
    },
    {
        "id": "22fbd4e4.8e86ec",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "global.set (\"chances\",-2);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2120,
        "y": 1260,
        "wires": [
            []
        ]
    },
    {
        "id": "93f981e9.d0f2e",
        "type": "inject",
        "z": "2e3f68c7.2f3ff",
        "name": "clics negativos",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1920,
        "y": 1260,
        "wires": [
            [
                "22fbd4e4.8e86ec"
            ]
        ]
    },
    {
        "id": "ed5f3c2e.5d224",
        "type": "link out",
        "z": "139909a2.e2cae6",
        "name": "request chances",
        "links": [
            "1866ea2d.dedda6"
        ],
        "x": 2295,
        "y": 1480,
        "wires": []
    },
    {
        "id": "aef06303.e87fb",
        "type": "link in",
        "z": "139909a2.e2cae6",
        "name": "deliver chances",
        "links": [
            "3a8d6d62.96e572"
        ],
        "x": 2015,
        "y": 1540,
        "wires": [
            [
                "750d973e.70f098"
            ]
        ]
    },
    {
        "id": "1866ea2d.dedda6",
        "type": "link in",
        "z": "2e3f68c7.2f3ff",
        "name": "request chances to",
        "links": [
            "ed5f3c2e.5d224"
        ],
        "x": 3215,
        "y": 460,
        "wires": [
            [
                "28a9c8a.f00fe38"
            ]
        ]
    },
    {
        "id": "69487f3.5fb918",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (msg.payload2.type = \"photo\"){\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4660,
        "y": 320,
        "wires": [
            [
                "3a8d6d62.96e572"
            ]
        ]
    },
    {
        "id": "3a8d6d62.96e572",
        "type": "link out",
        "z": "2e3f68c7.2f3ff",
        "name": "respond chances",
        "links": [
            "aef06303.e87fb"
        ],
        "x": 4795,
        "y": 320,
        "wires": []
    },
    {
        "id": "82925fe6.d83f",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "if (global.get (\"location\") == \"Casa\" && global.get (\"confidenceW\") > 0.5 && global.get (\"timeNow\") > global.get (\"meds\") && global.get (\"medstaken\") == 0) {\n    msg.payload = \"23, hora de tomar tus medicinas. 10 miligramos de hidroxicina y 10 miligramos de fluoxetina\";\n    global.set (\"medstaken\", 1);\n    global.set (\"snoozemeds\", global.get (\"timeNow\")+ 60000);\n    msg.topic = global.get (\"weekday\")+\",\"+\"1\";\n    return msg;\n}\nif (global.get (\"medstaken\") == \"1\" && global.get (\"timeNow\") > global.get (\"snoozemeds\")) {\n    msg.payload = \"23, te recuerdo que es hora de tomar tus medicinas. 10 miligramos de hidroxicina y 10 miligramos de fluoxetina\";\n    global.set (\"snoozemeds\", global.get (\"timeNow\")+ 60000);\n    global.set (\"medstaken\", 1);\n    msg.topic = global.get (\"weekday\")+\",\"+\"1\";\n    return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 180,
        "wires": [
            [
                "55536720.9e4b28",
                "bf35a442.9f4bc8"
            ]
        ]
    },
    {
        "id": "fb7b0fff.b153a",
        "type": "ui_text_input",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "label": "",
        "tooltip": "",
        "group": "2d6ab607.03dbb2",
        "order": 2,
        "width": 6,
        "height": 1,
        "passthru": true,
        "mode": "time",
        "delay": 300,
        "topic": "payload",
        "topicType": "msg",
        "x": 480,
        "y": 1840,
        "wires": [
            [
                "cd7066b1.a25d58"
            ]
        ]
    },
    {
        "id": "812d5c30.9cf76",
        "type": "ui_text",
        "z": "2e3f68c7.2f3ff",
        "group": "2d6ab607.03dbb2",
        "order": 1,
        "width": 6,
        "height": 3,
        "name": "",
        "label": "Cambia la hora a la que \"23\" toma sus medicamentos. Este comando sólo funciona una vez al día y requiere 5 clics. El el cambio sólo se aceptará si se encuentra entre las 10 y las 18h.",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "x": 1450,
        "y": 1800,
        "wires": []
    },
    {
        "id": "e54688bc.db1ef8",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get (\"timeNow\") > global.get (\"meds\")){\n    msg.payload = \"23 tomo sus medicamentos a las \" + global.get(\"meds_datetime\");\n} else {\n    msg.payload = \"23 tomará sus medicamentos a las \" + global.get(\"meds_datetime\");\n}\n\nif (global.get (\"newmeds_i\") == 1 || global.get (\"timeNow\") > parseInt(global.get (\"endofmeds\")) ||  global.get (\"timeNow\") > global.get (\"meds\")){\n    msg.payload = msg.payload +\". Hoy ya no puedes usar este comando\";\n} else {\n    msg.payload = msg.payload +\". Aún puedes usar este comando\";\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 480,
        "y": 1800,
        "wires": [
            [
                "812d5c30.9cf76"
            ]
        ]
    },
    {
        "id": "3bad8409.f2a71c",
        "type": "link out",
        "z": "2e3f68c7.2f3ff",
        "name": "Send-1-second",
        "links": [
            "62fc2c01.920294",
            "d1801290.4622e",
            "81134c17.0018c"
        ],
        "x": 1955,
        "y": 940,
        "wires": []
    },
    {
        "id": "62fc2c01.920294",
        "type": "link in",
        "z": "2e3f68c7.2f3ff",
        "name": "otros-textos-r",
        "links": [
            "3bad8409.f2a71c"
        ],
        "x": 355,
        "y": 1800,
        "wires": [
            [
                "e54688bc.db1ef8"
            ]
        ]
    },
    {
        "id": "cd7066b1.a25d58",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get (\"newmeds_i\", 1) == 0) {\n    global.set (\"newmeds\", msg.payload);\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 840,
        "y": 1840,
        "wires": [
            [
                "e50c58e1.c1bc78"
            ]
        ]
    },
    {
        "id": "e50c58e1.c1bc78",
        "type": "debug",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1030,
        "y": 1840,
        "wires": []
    },
    {
        "id": "34af97ef.423968",
        "type": "inject",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "00 00 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 490,
        "y": 1880,
        "wires": [
            [
                "bd555e9.89641a"
            ]
        ]
    },
    {
        "id": "bd555e9.89641a",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "global.set(\"midnight\", msg.payload);\nglobal.set (\"newmeds_i\", 0);\nglobal.set (\"promomeds_i\", 0);\nglobal.set (\"meds\", parseInt(global.get (\"midnight\")) + 37800000);\nglobal.set (\"endofmeds\", parseInt(global.get (\"midnight\")) + 64800000);\ndate = new Date (global.get (\"meds\"));\nmsg.payload = date;\nvar h = date.getHours();\nif (h <= 9) {\n    h = \"0\"+h;\n}\nvar m = date.getMinutes();\nif (m <= 9) {\n    m = \"0\"+m;\n}\nglobal.set (\"medstaken\", 0);\nglobal.set (\"meds_datetime\", h+\":\"+m);\nglobal.set (\"weekday\", msg.topic2.substr(0, 3));\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 840,
        "y": 1880,
        "wires": [
            [
                "802609db.8da088"
            ]
        ]
    },
    {
        "id": "ed6a68ad.455df8",
        "type": "ui_button",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "group": "2d6ab607.03dbb2",
        "order": 3,
        "width": 6,
        "height": 1,
        "passthru": false,
        "label": "Cambiar la hora de los medicamentos",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 570,
        "y": 1960,
        "wires": [
            [
                "b3dc9b2b.0e3008"
            ]
        ]
    },
    {
        "id": "b3dc9b2b.0e3008",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get (\"chances\")>= 5 && global.get (\"newmeds_i\") == 0){\n    global.set (\"onclic\", 1);\n    global.set (\"newmeds_i\", 1);\n    global.set (\"chances\" , global.get(\"chances\") - 5);\n    if (global.get (\"timeNow\") < global.get (\"newmeds\") + global.get (\"midnight\") && global.get (\"newmeds\") + global.get (\"midnight\") < global.get (\"endofmeds\") ) {\n        global.set (\"meds\", parseInt(global.get (\"newmeds\") + global.get (\"midnight\")));\n        date = new Date (global.get (\"meds\"));\n        var h = date.getHours();\n        if (h <= 9) {\n            h = \"0\"+h;\n        }\n        var m = date.getMinutes();\n        if (m <= 9) {\n           m = \"0\"+m;\n        }\n        global.set (\"meds_datetime\", h+\":\"+m);\n        msg.payload = \"Ahora 23 tomará sus medicinas a las \"+global.get (\"meds_datetime\");\n        msg.topic = \"Se ha cambiado la hora a la que se toman los medicamentos, el día de hoy será a las \" + h + \" horas con \" + m + \" minutos.\";\n    } else {\n    msg.payload = \"La hora configurada es incorrecta, intenta mañana\";\n    }\n} else {\n    msg.payload = \"\";\n    if ( global.get (\"chances\") < 5) {\n        msg.payload =msg.payload + \"No tienes suficientes clics.\";\n    }\n    if (global.get (\"newmeds_i\") == 1) {\n        msg.payload =msg.payload + \"Esta acción ya no está disponible hoy\";\n    }\n    \n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 840,
        "y": 1960,
        "wires": [
            [
                "ac2321b4.592d2"
            ]
        ]
    },
    {
        "id": "802609db.8da088",
        "type": "debug",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1030,
        "y": 1880,
        "wires": []
    },
    {
        "id": "f9d2af51.a1069",
        "type": "inject",
        "z": "2e3f68c7.2f3ff",
        "name": "10 clicls",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1890,
        "y": 1120,
        "wires": [
            [
                "df91964b.d18628"
            ]
        ]
    },
    {
        "id": "df91964b.d18628",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "global.set (\"chances\",10);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2120,
        "y": 1120,
        "wires": [
            []
        ]
    },
    {
        "id": "ca511e32.adb87",
        "type": "ui_toast",
        "z": "2e3f68c7.2f3ff",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "",
        "name": "",
        "x": 1330,
        "y": 2000,
        "wires": []
    },
    {
        "id": "ac2321b4.592d2",
        "type": "delay",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1040,
        "y": 1960,
        "wires": [
            [
                "ca511e32.adb87",
                "7c898f1f.a51ba"
            ]
        ]
    },
    {
        "id": "f9eff61.0f9db08",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "date = new Date(msg.payload);\nmsg.topic = date;\nmsg.topic2 = date.toString();\n//msg.topic = split(date,0, 10) + \"06:00:00.000Z\";\nmsg.topic3 = msg.topic2.substr(0, 16)  + \"00:00:00\" + msg.topic2.substr(24);\nvar d = new Date(msg.topic3);\nvar timeStamp = d.getTime();\nmsg.payload = timeStamp;\n\n\n/*\nvar months={1:\"January\",2:\"February\",3:\"March\",4:\"April\",5:\"May\",6:\"June\",7:\"July\",8:\"August\",9:\"September\",10:\"October\",11:\"November\",12:\"December\"};\nvar month=d.getMonth();\nvar month_name=months[month];*/\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 660,
        "y": 1920,
        "wires": [
            [
                "bd555e9.89641a"
            ]
        ]
    },
    {
        "id": "ebf9af19.921f7",
        "type": "inject",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "v": "",
                "vt": "date"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 480,
        "y": 1920,
        "wires": [
            [
                "f9eff61.0f9db08"
            ]
        ]
    },
    {
        "id": "d1801290.4622e",
        "type": "link in",
        "z": "66ae481f.c36c48",
        "name": "meds",
        "links": [
            "3bad8409.f2a71c"
        ],
        "x": 235,
        "y": 180,
        "wires": [
            [
                "82925fe6.d83f",
                "cf12bb58.6fc298",
                "55a957d6.75dc88"
            ]
        ]
    },
    {
        "id": "bf35a442.9f4bc8",
        "type": "ui_audio",
        "z": "66ae481f.c36c48",
        "name": "",
        "group": "74be730e.33ff4c",
        "voice": "Microsoft Dalia Online (Natural) - Spanish (Mexico)",
        "always": true,
        "x": 840,
        "y": 180,
        "wires": []
    },
    {
        "id": "c0816877.3308d8",
        "type": "debug",
        "z": "66ae481f.c36c48",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 830,
        "y": 280,
        "wires": []
    },
    {
        "id": "cf12bb58.6fc298",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "msg.payload = \"\";\nmsg.location = global.get (\"location\");\nmsg.confidence = global.get (\"confidenceW\");\nmsg.diff = global.get (\"timeNow\") - global.get (\"meds\");\nmsg.taken = global.get (\"medstaken\");\nmsg.weekday = global.get (\"weekday\");\nmsg.promomedsi = global.get(\"promomeds_i\");\nmsg.diffpromo = global.get (\"timeNow\") - global.get (\"snoozemedspromo\");\nmsg.takecoffe = global.get (\"takecoffe\");\nmsg.snoozecafe = global.get (\"snoozecafe\");\nmsg.diffcafe = global.get (\"timeNow\") - global.get (\"snoozecafe\");\nmsg.cafeterastate = global.get (\"cafeterastate\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 280,
        "wires": [
            [
                "c0816877.3308d8"
            ]
        ]
    },
    {
        "id": "255d03b2.52e81c",
        "type": "comment",
        "z": "66ae481f.c36c48",
        "name": "Medicamentos",
        "info": "",
        "x": 300,
        "y": 120,
        "wires": []
    },
    {
        "id": "4c6732fb.37e66c",
        "type": "mqtt in",
        "z": "66ae481f.c36c48",
        "name": "",
        "topic": "/hugo/se/medstaken",
        "qos": "2",
        "datatype": "auto",
        "broker": "4c35078.987c1f8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "x": 310,
        "y": 380,
        "wires": [
            [
                "c46bcf4e.d1ca"
            ]
        ]
    },
    {
        "id": "67f491c.b51be7",
        "type": "mqtt in",
        "z": "66ae481f.c36c48",
        "name": "",
        "topic": "hugo/se/promomeds",
        "qos": "2",
        "datatype": "auto",
        "broker": "4c35078.987c1f8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "x": 310,
        "y": 500,
        "wires": [
            [
                "3f1ac0f1.80726"
            ]
        ]
    },
    {
        "id": "c46bcf4e.d1ca",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "if (msg.payload == 200) {\n    global.set (\"medstaken\",2);\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "72ed0cc0.a286b4",
        "type": "mqtt out",
        "z": "66ae481f.c36c48",
        "name": "",
        "topic": "hugo/se/medsrequest",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "4c35078.987c1f8",
        "x": 1120,
        "y": 220,
        "wires": []
    },
    {
        "id": "55536720.9e4b28",
        "type": "change",
        "z": "66ae481f.c36c48",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "topic",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 860,
        "y": 220,
        "wires": [
            [
                "72ed0cc0.a286b4"
            ]
        ]
    },
    {
        "id": "6d3fbab3.7b4d74",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "200",
        "payloadType": "num",
        "x": 290,
        "y": 440,
        "wires": [
            [
                "c46bcf4e.d1ca"
            ]
        ]
    },
    {
        "id": "8e1212b5.17d7c",
        "type": "ui_button",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "group": "2d6ab607.03dbb2",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Tomar medicamento promocional",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 560,
        "y": 1520,
        "wires": [
            [
                "94207083.8dc1d"
            ]
        ]
    },
    {
        "id": "94207083.8dc1d",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>=5 && global.get (\"promomeds_i\") == 0) {\n    global.set (\"chances\", global.get(\"chances\")-5);\n    global.set (\"promomeds_i\", 1);\n    global.set (\"onclic\", 1);\n    global.set (\"snoozemedspromo\", global.get (\"timeNow\")+ 60000);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 840,
        "y": 1520,
        "wires": [
            [
                "9b44c4dc.3cb1d8"
            ]
        ]
    },
    {
        "id": "7c898f1f.a51ba",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "topic",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1320,
        "y": 1960,
        "wires": [
            [
                "cedfb042.60c86"
            ]
        ]
    },
    {
        "id": "9b44c4dc.3cb1d8",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "23, es momento de tomar el medicamento promocional, le hará bien a tu digestión",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1320,
        "y": 1520,
        "wires": [
            [
                "cedfb042.60c86"
            ]
        ]
    },
    {
        "id": "55a957d6.75dc88",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "if (global.get(\"promomeds_i\") == 1 && global.get (\"timeNow\") > global.get (\"snoozemedspromo\")) {\n    msg.payload = \"23, te recuerdo que debes tomar el medicamento promocional. Le hará bien a tu digestión.\";\n    msg.topic = global.get (\"weekday\")+\",\"+\"2\";\n    global.set (\"snoozemedspromo\", global.get (\"timeNow\")+ 60000);\n    global.set (\"promomeds_i\", 1);\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 220,
        "wires": [
            [
                "bf35a442.9f4bc8",
                "55536720.9e4b28"
            ]
        ]
    },
    {
        "id": "9834a43b.d21318",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "200",
        "payloadType": "num",
        "x": 290,
        "y": 560,
        "wires": [
            [
                "3f1ac0f1.80726"
            ]
        ]
    },
    {
        "id": "3f1ac0f1.80726",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "if (msg.payload == 200) {\n    global.set (\"promomeds_i\",2);\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "f766d0b8.742dc",
        "type": "comment",
        "z": "66ae481f.c36c48",
        "name": "Retro de pastillero",
        "info": "",
        "x": 310,
        "y": 340,
        "wires": []
    },
    {
        "id": "372f485b.c50f48",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get (\"location\") == \"Casa\" && global.get(\"chances\")>=5 && global.get (\"takecoffe\") == 0) {\n    global.set (\"chances\", global.get(\"chances\")-5);\n    global.set (\"takecoffe\", 1);\n    global.set (\"onclic\", 1);\n    msg.payload = \"check\";\n    msg.topic = \"23, es momento de tomar un café. comprobando cafetera\";\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 840,
        "y": 2260,
        "wires": [
            [
                "6cdbdabb.bb8824",
                "ac22d488.854368",
                "aa4c58ad.c421f8",
                "72cc2cc5.d2f104"
            ]
        ]
    },
    {
        "id": "674aafc5.32182",
        "type": "comment",
        "z": "2e3f68c7.2f3ff",
        "name": "Administrar medicamento",
        "info": "",
        "x": 530,
        "y": 1760,
        "wires": []
    },
    {
        "id": "6cdbdabb.bb8824",
        "type": "mqtt out",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "topic": "hugo/se/caferequest",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "4c35078.987c1f8",
        "x": 1080,
        "y": 2260,
        "wires": []
    },
    {
        "id": "f41e12b2.26558",
        "type": "delay",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1300,
        "y": 2320,
        "wires": [
            [
                "27cf7c06.822384"
            ]
        ]
    },
    {
        "id": "ac22d488.854368",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Preparando Café",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1060,
        "y": 2320,
        "wires": [
            [
                "f41e12b2.26558"
            ]
        ]
    },
    {
        "id": "27cf7c06.822384",
        "type": "ui_toast",
        "z": "2e3f68c7.2f3ff",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "",
        "name": "",
        "x": 1650,
        "y": 2320,
        "wires": []
    },
    {
        "id": "9de3b410.de0898",
        "type": "ui_audio",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "group": "74be730e.33ff4c",
        "voice": "Microsoft Dalia Online (Natural) - Spanish (Mexico)",
        "always": true,
        "x": 1300,
        "y": 2360,
        "wires": []
    },
    {
        "id": "aa4c58ad.c421f8",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "topic",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1060,
        "y": 2360,
        "wires": [
            [
                "9de3b410.de0898"
            ]
        ]
    },
    {
        "id": "72cc2cc5.d2f104",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "switch (global.get  (\"cafeterastate\")) {\n    case 0:\n        global.set (\"cafeorden\", \"23, es necesario colocar cafe y agua a la cafetera\");\n        global.set (\"snoozecafe\", global.get (\"timeNow\") + 60000);\n        msg.payload = global.get (\"cafeorden\");\n        break;\n    case 1:\n        global.set (\"cafeorden\", \"Alexa, enciende cafetera\");\n        global.set (\"snoozecafe\", global.get (\"timeNow\") + 60000);//Cambiar a lo que tarda en prepararse el cafe\n        msg.payload = global.get (\"cafeorden\");\n        break;\n    case 2:\n        global.set (\"cafeorden\", \"23, es momento de tomar una tasa de café\");\n        global.set (\"snoozecafe\", global.get (\"timeNow\") + 60000);\n        msg.payload = global.get (\"cafeorden\");\n        break; \n    case 3:\n        global.set (\"cafeorden\", \"23, disfruta tu café\");\n        global.set (\"snoozecafe\", global.get (\"timeNow\") + 60000);// el tiempo agregado debe ser 10 min 600000\n        msg.payload = global.get (\"cafeorden\");\n        break; \n    case 4:\n        global.set (\"cafeorden\", \"Cafetera en modo reposo\");\n        //global.set (\"snoozecafe\", global.get (\"timeNow\") + 60000);\n        msg.payload = global.get (\"cafeorden\");\n        global.set (\"takecoffe\",0);\n        break;\n    case 5:\n        global.set (\"cafeorden\", \"Alexa, apaga cafetera\");\n        //global.set (\"snoozecafe\", global.get (\"timeNow\") + 60000);\n        global.set (\"cafeterastate\", 0);\n        msg.payload = global.get (\"cafeorden\");\n        global.set (\"takecoffe\",0);\n        break;\n    default:\n        global.set (\"cafeorden\", \"23, la cafetera necesita tu atención\");\n        global.set (\"snoozecafe\", global.get (\"timeNow\") + 60000);\n        msg.payload = global.get (\"cafeorden\");\n        break;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1040,
        "y": 2400,
        "wires": [
            [
                "9de3b410.de0898"
            ]
        ]
    },
    {
        "id": "81134c17.0018c",
        "type": "link in",
        "z": "66ae481f.c36c48",
        "name": "meds",
        "links": [
            "3bad8409.f2a71c"
        ],
        "x": 235,
        "y": 660,
        "wires": [
            [
                "ffa7481.c54b9b8",
                "89d913cf.f2694"
            ]
        ]
    },
    {
        "id": "ffa7481.c54b9b8",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "if (global.get(\"takecoffe\") == 1 && global.get (\"timeNow\") > global.get (\"snoozecafe\")) {\n    if (global.get (\"cafeterastate\") == 3) {\n        global.set (\"snoozecafe\", global.get (\"timeNow\") + 60000);//el tiempo agregado debe ser 10 min 600000\n        msg.payload = \"23, ¿como te está sabiendo tu café?\";\n    }else {\n        global.set (\"snoozecafe\", global.get (\"timeNow\") + 60000);\n        msg.payload = global.get (\"cafeorden\") + \". La rutina de café sigue activa.\";\n    }\n    msg.topic = \"check\";\n    \n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 660,
        "wires": [
            [
                "3089fb2f.6875c4",
                "b8ea0247.01d8f"
            ]
        ]
    },
    {
        "id": "3089fb2f.6875c4",
        "type": "ui_audio",
        "z": "66ae481f.c36c48",
        "name": "",
        "group": "74be730e.33ff4c",
        "voice": "Microsoft Dalia Online (Natural) - Spanish (Mexico)",
        "always": true,
        "x": 840,
        "y": 660,
        "wires": []
    },
    {
        "id": "b8ea0247.01d8f",
        "type": "change",
        "z": "66ae481f.c36c48",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "topic",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 860,
        "y": 700,
        "wires": [
            [
                "2005bd00.3e2cb4"
            ]
        ]
    },
    {
        "id": "2005bd00.3e2cb4",
        "type": "mqtt out",
        "z": "66ae481f.c36c48",
        "name": "",
        "topic": "hugo/se/caferequest",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "4c35078.987c1f8",
        "x": 1120,
        "y": 700,
        "wires": []
    },
    {
        "id": "747c23ea.ed1d2c",
        "type": "mqtt in",
        "z": "66ae481f.c36c48",
        "name": "",
        "topic": "/hugo/se/caferesponse",
        "qos": "2",
        "datatype": "auto",
        "broker": "4c35078.987c1f8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "x": 320,
        "y": 860,
        "wires": [
            [
                "b3164182.2ea4b"
            ]
        ]
    },
    {
        "id": "b3164182.2ea4b",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "global.set (\"cafeterastate\",msg.payload);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 860,
        "wires": [
            [
                "9f3fb876.be92a8"
            ]
        ]
    },
    {
        "id": "cf0c58b7.6fd468",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 290,
        "y": 900,
        "wires": [
            [
                "b3164182.2ea4b"
            ]
        ]
    },
    {
        "id": "8dd06d50.63a7e",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "1",
        "payloadType": "num",
        "x": 290,
        "y": 940,
        "wires": [
            [
                "b3164182.2ea4b"
            ]
        ]
    },
    {
        "id": "5757d054.6129c",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2",
        "payloadType": "num",
        "x": 290,
        "y": 980,
        "wires": [
            [
                "b3164182.2ea4b"
            ]
        ]
    },
    {
        "id": "c481843c.482758",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "3",
        "payloadType": "num",
        "x": 290,
        "y": 1020,
        "wires": [
            [
                "b3164182.2ea4b"
            ]
        ]
    },
    {
        "id": "9f3fb876.be92a8",
        "type": "link out",
        "z": "66ae481f.c36c48",
        "name": "cafe response",
        "links": [
            "715424e0.343e3c"
        ],
        "x": 795,
        "y": 860,
        "wires": []
    },
    {
        "id": "715424e0.343e3c",
        "type": "link in",
        "z": "2e3f68c7.2f3ff",
        "name": "cafe response - b",
        "links": [
            "9f3fb876.be92a8"
        ],
        "x": 795,
        "y": 2400,
        "wires": [
            [
                "72cc2cc5.d2f104"
            ]
        ]
    },
    {
        "id": "cab03c7a.d197c",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "4",
        "payloadType": "num",
        "x": 290,
        "y": 1060,
        "wires": [
            [
                "b3164182.2ea4b"
            ]
        ]
    },
    {
        "id": "3d457d05.18fa12",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "5",
        "payloadType": "num",
        "x": 290,
        "y": 1100,
        "wires": [
            [
                "b3164182.2ea4b"
            ]
        ]
    },
    {
        "id": "6d174739.8e08d8",
        "type": "comment",
        "z": "66ae481f.c36c48",
        "name": "Rutina de tomar cafe",
        "info": "",
        "x": 310,
        "y": 620,
        "wires": []
    },
    {
        "id": "89d913cf.f2694",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "if (global.get (\"takecoffe\") == 1 ) {\n    msg.payload = \"23 está tomando café\";\n} else {\n    msg.payload = \"23 no está tomando café\";\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 740,
        "wires": [
            [
                "18c06b72.59c865"
            ]
        ]
    },
    {
        "id": "18c06b72.59c865",
        "type": "ui_text",
        "z": "66ae481f.c36c48",
        "group": "2d6ab607.03dbb2",
        "order": 6,
        "width": 3,
        "height": 1,
        "name": "",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "x": 830,
        "y": 740,
        "wires": []
    },
    {
        "id": "29e21012.03468",
        "type": "http request",
        "z": "c2c0e0c1.0deb1",
        "name": "Cam1",
        "method": "GET",
        "ret": "bin",
        "paytoqs": "ignore",
        "url": "192.168.15.24/capture",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 710,
        "y": 1440,
        "wires": [
            [
                "1d42d33a.6230ed"
            ]
        ]
    },
    {
        "id": "1d42d33a.6230ed",
        "type": "file",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "filename": "S:\\Captura\\work.jpg",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "setbymsg",
        "x": 1010,
        "y": 1440,
        "wires": [
            [
                "4addf015.68ec4"
            ]
        ]
    },
    {
        "id": "8c2d1bd3.0a3ef8",
        "type": "exec",
        "z": "c2c0e0c1.0deb1",
        "command": "",
        "addpay": "payload",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 1490,
        "y": 1440,
        "wires": [
            [
                "e199d623.0be6a8"
            ],
            [],
            []
        ]
    },
    {
        "id": "4addf015.68ec4",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "msg.filename = \"S:\\\\Captura\\\\work.jpg\"\nmsg.payload = \"python S:\\\\DeepFace\\\\Code\\\\FaceDetector-f\\\\fdf.py -i \"+msg.filename;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1260,
        "y": 1440,
        "wires": [
            [
                "8c2d1bd3.0a3ef8"
            ]
        ]
    },
    {
        "id": "e199d623.0be6a8",
        "type": "switch",
        "z": "c2c0e0c1.0deb1",
        "name": "rc.code",
        "property": "rc.code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 720,
        "y": 1500,
        "wires": [
            [
                "413a6917.34ad98"
            ],
            []
        ]
    },
    {
        "id": "413a6917.34ad98",
        "type": "json",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 970,
        "y": 1500,
        "wires": [
            [
                "2042a583.834a1a"
            ]
        ]
    },
    {
        "id": "d430b5c.b485448",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "msg.topic=\"INSERT INTO emotions23 (angry, disgust, fear, happy, sad, surprise, neutral) VALUES ('\"+global.get (\"angry23\")+\"','\"+global.get (\"disgust23\")+\"','\"+global.get (\"fear23\")+\"','\"+global.get (\"happyy23\")+\"','\"+global.get (\"sad23\")+\"','\"+global.get (\"surprise23\")+\"','\"+global.get (\"neutral23\")+\"')\";\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 400,
        "y": 1160,
        "wires": [
            [
                "9edae9a5.a880b8"
            ]
        ]
    },
    {
        "id": "9edae9a5.a880b8",
        "type": "mysql",
        "z": "c2c0e0c1.0deb1",
        "mydb": "1a27214b.e39c3f",
        "name": "",
        "x": 730,
        "y": 1160,
        "wires": [
            [
                "1a7ac32b.bcd32d"
            ]
        ]
    },
    {
        "id": "93e005d2.f44038",
        "type": "inject",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 420,
        "y": 1560,
        "wires": [
            [
                "29e21012.03468"
            ]
        ]
    },
    {
        "id": "2042a583.834a1a",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "/*msg.topic = msg.payload.angry.dominant_emotion;\nswitch (msg.payload.angry.dominant_emotion) {\n    case \"angry\":\n        msg.payload = msg.payload.angry.emotion;\n        break;\n    case \"disgust\":\n        msg.payload = msg.payload.disgust.emotion;\n        break;\n    case \"fear\":\n        msg.payload = msg.payload.fear.emotion;\n        break;\n    case \"happy\":\n        msg.payload = msg.payload.happy.emotion;\n        break;\n    case \"sad\":\n        msg.payload = msg.payload.sad.emotion;\n        break;\n    case \"surprise\":\n        msg.payload = msg.payload.surprise.emotion;\n        break;\n    case \"neutral\":\n        msg.payload = msg.payload.neutral.emotion;\n        break;\n}*/\n\n//var msg = {};\nvar msg1 = {};\nvar msg2 = {};\nvar msg3 = {};\nvar msg4 = {};\nvar msg5 = {};\nvar msg6 = {};\nvar msg7 = {};\n\nmsg1.topic = \"Angry\";\nmsg2.topic = \"disgust\";\nmsg3.topic = \"fear\";\nmsg4.topic = \"happy\";\nmsg5.topic = \"sad\";\nmsg6.topic = \"surprise\";\nmsg7.topic = \"neutral\";\n\nmsg1.payload = msg.payload.angry.emotion / 100;\nmsg2.payload = msg.payload.disgust.emotion / 100;\nmsg3.payload = msg.payload.fear.emotion / 100;\nmsg4.payload = msg.payload.happy.emotion / 100;\nmsg5.payload = msg.payload.sad.emotion / 100;\nmsg6.payload = msg.payload.surprise.emotion / 100;\nmsg7.payload = msg.payload.neutral.emotion / 100;\n\nglobal.set (\"angry23\", global.get (\"angry23\") + msg1.payload );\nglobal.set (\"disgust23\", global.get (\"disgust23\") + msg2.payload );\nglobal.set (\"fear23\", global.get (\"fear23\") + msg3.payload );\nglobal.set (\"happyy23\", global.get (\"happyy23\") + msg4.payload );\nglobal.set (\"sad23\", global.get (\"sad23\") + msg5.payload );\nglobal.set (\"surprise23\", global.get (\"surprise23\") + msg6.payload );\nglobal.set (\"neutral23\", global.get (\"neutral23\") + msg7.payload );\n\nreturn [[msg1, msg2, msg3, msg4, msg5, msg6, msg7]];",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1260,
        "y": 1500,
        "wires": [
            [
                "1f0aaeeb.b5c931"
            ]
        ]
    },
    {
        "id": "396e1914.27e706",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "if (global.get(\"confidenceW\") == 0 ) {\n    var msg1 = {};\n    var msg2 = {};\n    var msg3 = {};\n    var msg4 = {};\n    var msg5 = {};\n    var msg6 = {};\n    var msg7 = {};\n    \n    msg1.topic = \"Angry\";\n    msg2.topic = \"disgust\";\n    msg3.topic = \"fear\";\n    msg4.topic = \"happy\";\n    msg5.topic = \"sad\";\n    msg6.topic = \"surprise\";\n    msg7.topic = \"neutral\";\n    \n    msg1.payload = 0;\n    msg2.payload = 0;\n    msg3.payload = 0;\n    msg4.payload = 0;\n    msg5.payload = 0;\n    msg6.payload = 0;\n    msg7.payload = 0;\n    \n    return [[msg1, msg2, msg3, msg4, msg5, msg6, msg7]];\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 720,
        "y": 1620,
        "wires": [
            [
                "1f0aaeeb.b5c931"
            ]
        ]
    },
    {
        "id": "b03658d2.e1a4a8",
        "type": "delay",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "pauseType": "delay",
        "timeout": "30",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 420,
        "y": 1620,
        "wires": [
            [
                "396e1914.27e706"
            ]
        ]
    },
    {
        "id": "3061be48.f85d62",
        "type": "comment",
        "z": "66ae481f.c36c48",
        "name": "Retro cafetera",
        "info": "",
        "x": 290,
        "y": 820,
        "wires": []
    },
    {
        "id": "c0c53d57.e4b1f",
        "type": "link out",
        "z": "c2c0e0c1.0deb1",
        "name": "detect 23",
        "links": [
            "fda52bc9.c22d18",
            "50865647.90ccd8"
        ],
        "x": 915,
        "y": 280,
        "wires": []
    },
    {
        "id": "fda52bc9.c22d18",
        "type": "link in",
        "z": "c2c0e0c1.0deb1",
        "name": "check 23 emotionsW",
        "links": [
            "c0c53d57.e4b1f"
        ],
        "x": 455,
        "y": 1680,
        "wires": [
            [
                "29e21012.03468"
            ]
        ]
    },
    {
        "id": "1f0aaeeb.b5c931",
        "type": "link out",
        "z": "c2c0e0c1.0deb1",
        "name": "tograph emotions",
        "links": [
            "4314871f.853158"
        ],
        "x": 1455,
        "y": 1620,
        "wires": []
    },
    {
        "id": "4314871f.853158",
        "type": "link in",
        "z": "c2c0e0c1.0deb1",
        "name": "to graph emotions end",
        "links": [
            "1f0aaeeb.b5c931",
            "41006219.fb502c"
        ],
        "x": 395,
        "y": 920,
        "wires": [
            [
                "62d7f239.ab755c"
            ]
        ]
    },
    {
        "id": "a937b4e.7569148",
        "type": "inject",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "3600",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 150,
        "y": 1160,
        "wires": [
            [
                "d430b5c.b485448",
                "90f791e5.bbbc1"
            ]
        ]
    },
    {
        "id": "1a7ac32b.bcd32d",
        "type": "delay",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 960,
        "y": 1160,
        "wires": [
            [
                "3635c129.db553e"
            ]
        ]
    },
    {
        "id": "3635c129.db553e",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "global.set (\"angry23\", 0);\nglobal.set (\"disgust23\", 0);\nglobal.set (\"fear23\", 0);\nglobal.set (\"happyy23\", 0);\nglobal.set (\"sad23\", 0);\nglobal.set (\"surprise23\", 0);\nglobal.set (\"neutral23\",0);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1240,
        "y": 1160,
        "wires": [
            []
        ]
    },
    {
        "id": "90f791e5.bbbc1",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "msg.payload=[{\n    \"series\": [\"Angry\", \"Disgust\", \"Fear\", \"Happy\", \"Sad\", \"Surprise\", \"Neutral\" ],\n    \"data\": [ [global.get (\"angry23\")], [global.get (\"disgust23\")], [global.get (\"fear23\")], [global.get (\"happyy23\")], [global.get (\"sad23\")], [global.get (\"surprise23\")], [global.get (\"neutral23\")]],\n    \"labels\": [\"Emociones\" ]\n}];\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 400,
        "y": 1220,
        "wires": [
            [
                "823765.cb4c9898",
                "3e7bd6d0.7e03ba"
            ]
        ]
    },
    {
        "id": "823765.cb4c9898",
        "type": "ui_chart",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "group": "292e4d7c.349622",
        "order": 1,
        "width": 6,
        "height": 5,
        "label": "Estado de animo",
        "chartType": "bar",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "x": 730,
        "y": 1220,
        "wires": [
            []
        ]
    },
    {
        "id": "3e7bd6d0.7e03ba",
        "type": "debug",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 690,
        "y": 1260,
        "wires": []
    },
    {
        "id": "9e765bea.d59d08",
        "type": "inject",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 1220,
        "wires": [
            [
                "90f791e5.bbbc1"
            ]
        ]
    },
    {
        "id": "ba3286b0.68a2f8",
        "type": "comment",
        "z": "c2c0e0c1.0deb1",
        "name": "Graficar estado de animo",
        "info": "",
        "x": 170,
        "y": 1100,
        "wires": []
    },
    {
        "id": "c1947425.1fd4f8",
        "type": "mqtt in",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "topic": "hugo/se/sala/onrecord",
        "qos": "2",
        "datatype": "auto",
        "broker": "4c35078.987c1f8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "x": 200,
        "y": 1780,
        "wires": [
            [
                "95aeb367.9f745"
            ]
        ]
    },
    {
        "id": "fd725b3e.edcb28",
        "type": "mqtt in",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "topic": "hugo/se/sala/onstop",
        "qos": "2",
        "datatype": "auto",
        "broker": "4c35078.987c1f8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "x": 190,
        "y": 1840,
        "wires": [
            [
                "29755054.11e62",
                "1d183acb.6225b5"
            ]
        ]
    },
    {
        "id": "95aeb367.9f745",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "if (global.get (\"confidenceE\") > 0) {\n    if(global.get('firstRecordE')== 0)\n    {\n        global.set ('firstRecordE',global.get('timeNow'));\n    }\n    global.set('lastRecordE',global.get('timeNow'));\n    if ((global.get('lastRecordE') - global.get('lastStopE'))<300000)\n    {\n        global.set('chilltime', global.get('chilltime')+(global.get('lastRecordE') - global.get('lastStopE')));\n    }\n    msg.payload = global.get('lastRecordE');\n    global.set(\"confidenceW\", 0);\n    /*\n    global.set (\"personadetectadaE\", msg.payload.predictions[0].userid);\n    global.set (\"confidenceE\", msg.payload.predictions[0].confidence);\n    msg.topic = global.get (\"personadetectada\");\n    msg.payload = global.get (\"confidence\");\n    */\n    return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 420,
        "y": 1780,
        "wires": [
            [
                "7cb07f81.5ad52"
            ]
        ]
    },
    {
        "id": "29755054.11e62",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "global.set('lastStopE',global.get('timeNow'));\nmsg.payload = (global.get('lastStopE') - global.get('lastRecordE'));\nglobal.set('chilltime', global.get('chilltime')+msg.payload);\nif (global.get (\"timeNow\") - global.get (\"lastStopE\") > 600000) \n{\n    global.set (\"confidenceE\", 0);\n}\nreturn msg;\n\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 420,
        "y": 1840,
        "wires": [
            []
        ]
    },
    {
        "id": "7cb07f81.5ad52",
        "type": "http request",
        "z": "c2c0e0c1.0deb1",
        "name": "Cam4",
        "method": "GET",
        "ret": "bin",
        "paytoqs": "ignore",
        "url": "192.168.15.21/capture",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 710,
        "y": 1780,
        "wires": [
            [
                "45feee21.31d72"
            ]
        ]
    },
    {
        "id": "45feee21.31d72",
        "type": "file",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "filename": "S:\\Captura\\chill.jpg",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "setbymsg",
        "x": 1010,
        "y": 1780,
        "wires": [
            [
                "bd5eab2a.bffc68"
            ]
        ]
    },
    {
        "id": "6d9efcaa.334474",
        "type": "exec",
        "z": "c2c0e0c1.0deb1",
        "command": "",
        "addpay": "payload",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 1490,
        "y": 1780,
        "wires": [
            [
                "d6805bc.430cda8"
            ],
            [],
            []
        ]
    },
    {
        "id": "bd5eab2a.bffc68",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "msg.filename = \"S:\\\\Captura\\\\chill.jpg\"\nmsg.payload = \"python S:\\\\DeepFace\\\\Code\\\\FaceDetector-f\\\\fdf.py -i \"+msg.filename;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1260,
        "y": 1780,
        "wires": [
            [
                "6d9efcaa.334474"
            ]
        ]
    },
    {
        "id": "d6805bc.430cda8",
        "type": "switch",
        "z": "c2c0e0c1.0deb1",
        "name": "rc.code",
        "property": "rc.code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 720,
        "y": 1840,
        "wires": [
            [
                "710d0383.06dd0c"
            ],
            []
        ]
    },
    {
        "id": "710d0383.06dd0c",
        "type": "json",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 970,
        "y": 1840,
        "wires": [
            [
                "16c964d3.68cb2b"
            ]
        ]
    },
    {
        "id": "efb92e6.2e5a4d",
        "type": "inject",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 420,
        "y": 1900,
        "wires": [
            [
                "7cb07f81.5ad52"
            ]
        ]
    },
    {
        "id": "16c964d3.68cb2b",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "/*msg.topic = msg.payload.angry.dominant_emotion;\nswitch (msg.payload.angry.dominant_emotion) {\n    case \"angry\":\n        msg.payload = msg.payload.angry.emotion;\n        break;\n    case \"disgust\":\n        msg.payload = msg.payload.disgust.emotion;\n        break;\n    case \"fear\":\n        msg.payload = msg.payload.fear.emotion;\n        break;\n    case \"happy\":\n        msg.payload = msg.payload.happy.emotion;\n        break;\n    case \"sad\":\n        msg.payload = msg.payload.sad.emotion;\n        break;\n    case \"surprise\":\n        msg.payload = msg.payload.surprise.emotion;\n        break;\n    case \"neutral\":\n        msg.payload = msg.payload.neutral.emotion;\n        break;\n}*/\n\n//var msg = {};\nvar msg1 = {};\nvar msg2 = {};\nvar msg3 = {};\nvar msg4 = {};\nvar msg5 = {};\nvar msg6 = {};\nvar msg7 = {};\n\nmsg1.topic = \"Angry\";\nmsg2.topic = \"disgust\";\nmsg3.topic = \"fear\";\nmsg4.topic = \"happy\";\nmsg5.topic = \"sad\";\nmsg6.topic = \"surprise\";\nmsg7.topic = \"neutral\";\n\nmsg1.payload = msg.payload.angry.emotion / 100;\nmsg2.payload = msg.payload.disgust.emotion / 100;\nmsg3.payload = msg.payload.fear.emotion / 100;\nmsg4.payload = msg.payload.happy.emotion / 100;\nmsg5.payload = msg.payload.sad.emotion / 100;\nmsg6.payload = msg.payload.surprise.emotion / 100;\nmsg7.payload = msg.payload.neutral.emotion / 100;\n\nglobal.set (\"angry23\", global.get (\"angry23\") + msg1.payload );\nglobal.set (\"disgust23\", global.get (\"disgust23\") + msg2.payload );\nglobal.set (\"fear23\", global.get (\"fear23\") + msg3.payload );\nglobal.set (\"happyy23\", global.get (\"happyy23\") + msg4.payload );\nglobal.set (\"sad23\", global.get (\"sad23\") + msg5.payload );\nglobal.set (\"surprise23\", global.get (\"surprise23\") + msg6.payload );\nglobal.set (\"neutral23\", global.get (\"neutral23\") + msg7.payload );\n\nreturn [[msg1, msg2, msg3, msg4, msg5, msg6, msg7]];",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1260,
        "y": 1840,
        "wires": [
            [
                "41006219.fb502c"
            ]
        ]
    },
    {
        "id": "6eeefcee.491e84",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "if (global.get(\"confidenceE\") == 0 ) {\n    var msg1 = {};\n    var msg2 = {};\n    var msg3 = {};\n    var msg4 = {};\n    var msg5 = {};\n    var msg6 = {};\n    var msg7 = {};\n    \n    msg1.topic = \"Angry\";\n    msg2.topic = \"disgust\";\n    msg3.topic = \"fear\";\n    msg4.topic = \"happy\";\n    msg5.topic = \"sad\";\n    msg6.topic = \"surprise\";\n    msg7.topic = \"neutral\";\n    \n    msg1.payload = 0;\n    msg2.payload = 0;\n    msg3.payload = 0;\n    msg4.payload = 0;\n    msg5.payload = 0;\n    msg6.payload = 0;\n    msg7.payload = 0;\n    \n    return [[msg1, msg2, msg3, msg4, msg5, msg6, msg7]];\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 720,
        "y": 1960,
        "wires": [
            [
                "41006219.fb502c"
            ]
        ]
    },
    {
        "id": "1d183acb.6225b5",
        "type": "delay",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "pauseType": "delay",
        "timeout": "30",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 420,
        "y": 1960,
        "wires": [
            [
                "6eeefcee.491e84"
            ]
        ]
    },
    {
        "id": "41006219.fb502c",
        "type": "link out",
        "z": "c2c0e0c1.0deb1",
        "name": "tograph emotions",
        "links": [
            "4314871f.853158"
        ],
        "x": 1455,
        "y": 1960,
        "wires": []
    },
    {
        "id": "cf7ff00e.01d",
        "type": "link in",
        "z": "c2c0e0c1.0deb1",
        "name": "check emotionsE",
        "links": [
            "9c632d11.72577"
        ],
        "x": 455,
        "y": 2020,
        "wires": [
            [
                "7cb07f81.5ad52"
            ]
        ]
    },
    {
        "id": "9c632d11.72577",
        "type": "link out",
        "z": "c2c0e0c1.0deb1",
        "name": "detect 23 -E",
        "links": [
            "cf7ff00e.01d"
        ],
        "x": 915,
        "y": 600,
        "wires": []
    },
    {
        "id": "3663898a.1ff2a6",
        "type": "ui_gauge",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "group": "510df368.d3c8dc",
        "order": 2,
        "width": 3,
        "height": 3,
        "gtype": "wave",
        "title": "Entretenimiento",
        "label": "Horas",
        "format": "{{value}}",
        "min": 0,
        "max": 10,
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 720,
        "y": 840,
        "wires": []
    },
    {
        "id": "c9656ef2.2ee49",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "Get chilltime",
        "func": "msg.payload = global.get ('chilltime')/1000/60/60;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 840,
        "wires": [
            [
                "3663898a.1ff2a6"
            ]
        ]
    },
    {
        "id": "486d31f1.dc54c",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "global.set('firstRecordE',0);\nglobal.set('chilltime',18000);\nglobal.set('lastRecordE',0);\nglobal.set('lastStopE',0);\nglobal.set('firstRecordO',0);\nglobal.set('outsidetime',180000);\nglobal.set('lastRecordO',0);\nglobal.set('lastStopO',0);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1390,
        "y": 860,
        "wires": [
            []
        ]
    },
    {
        "id": "f7bba466.8159e8",
        "type": "inject",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1150,
        "y": 880,
        "wires": [
            [
                "486d31f1.dc54c"
            ]
        ]
    },
    {
        "id": "5795c654.e8da28",
        "type": "function",
        "z": "5478817a.a9116",
        "name": "",
        "func": "if (global.get (\"location\") == \"Casa\") {\n    if(global.get('firstRecordO')== 0)\n    {\n        global.set ('firstRecordO',global.get('timeNow'));\n    }\n    global.set('lastRecordO',global.get('timeNow'));\n    if ((global.get('lastRecordO') - global.get('lastStopO'))<300000)\n    {\n        global.set('outsidetime', global.get('outsidetime')+(global.get('lastRecordO') - global.get('lastStopO')));\n    }\n    msg.payload = global.get('lastRecordO');\n    //global.set(\"confidenceE\", 0);\n    /*\n    global.set (\"personadetectadaE\", msg.payload.predictions[0].userid);\n    global.set (\"confidenceE\", msg.payload.predictions[0].confidence);\n    msg.topic = global.get (\"personadetectada\");\n    msg.payload = global.get (\"confidence\");\n    */\n    return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "20692d75.148472",
        "type": "function",
        "z": "5478817a.a9116",
        "name": "",
        "func": "if (global.get (\"location\") == \"Casa\") {\n    global.set('lastStopO',global.get('timeNow'));\n    msg.payload = (global.get('lastStopO') - global.get('lastRecordO'));\n    global.set('outsidetime', global.get('outsidetime')+msg.payload);\n    /*if (global.get (\"timeNow\") - global.get (\"lastStopO\") > 600000) \n    {\n        global.set (\"confidenceW\", 0);\n    }*/\n    return msg;\n}\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "73eaa55f.1f47dc",
        "type": "ui_gauge",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "group": "510df368.d3c8dc",
        "order": 3,
        "width": 3,
        "height": 3,
        "gtype": "compass",
        "title": "Tiempo en exteriores",
        "label": "horas",
        "format": "{{value}}",
        "min": 0,
        "max": "15",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 740,
        "y": 880,
        "wires": []
    },
    {
        "id": "1d4cef70.932a51",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "Get outsidetime",
        "func": "msg.payload = global.get ('outsidetime')/1000/60/60;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 880,
        "wires": [
            [
                "73eaa55f.1f47dc"
            ]
        ]
    }
]