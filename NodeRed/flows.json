[
    {
        "id": "64d34e70.fcce4",
        "type": "tab",
        "label": "Inicializadores",
        "disabled": false,
        "info": ""
    },
    {
        "id": "c2c0e0c1.0deb1",
        "type": "tab",
        "label": "Medidores",
        "disabled": false,
        "info": ""
    },
    {
        "id": "2e3f68c7.2f3ff",
        "type": "tab",
        "label": "Control ",
        "disabled": false,
        "info": ""
    },
    {
        "id": "5478817a.a9116",
        "type": "tab",
        "label": "Traccar Handler",
        "disabled": false,
        "info": ""
    },
    {
        "id": "83fb4ff5.ce7c8",
        "type": "tab",
        "label": "Abrir puertas",
        "disabled": false,
        "info": ""
    },
    {
        "id": "66ae481f.c36c48",
        "type": "tab",
        "label": "Rutinas",
        "disabled": false,
        "info": ""
    },
    {
        "id": "139909a2.e2cae6",
        "type": "tab",
        "label": "estocolmosindrome_bot",
        "disabled": false,
        "info": ""
    },
    {
        "id": "d41b2b2b.ffe75",
        "type": "tab",
        "label": "Evasion",
        "disabled": true,
        "info": ""
    },
    {
        "id": "4391d02d.238c8",
        "type": "tab",
        "label": "RPi",
        "disabled": false,
        "info": ""
    },
    {
        "id": "4c35078.987c1f8",
        "type": "mqtt-broker",
        "name": "",
        "broker": "192.168.15.101",
        "port": "1883",
        "clientid": "hugo-main",
        "usetls": false,
        "protocolVersion": "3",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "c36274aa.a9a458",
        "type": "ui_base",
        "theme": {
            "name": "theme-custom",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#0094CE",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#0094ce",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "customTheme": {
                "name": "Untitled Theme 1",
                "default": "#4B7930",
                "baseColor": "#1e89a4",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "reset": false
            },
            "themeState": {
                "base-color": {
                    "default": "#4B7930",
                    "value": "#1e89a4",
                    "edited": true
                },
                "page-titlebar-backgroundColor": {
                    "value": "#1e89a4",
                    "edited": false
                },
                "page-backgroundColor": {
                    "value": "#000000",
                    "edited": true
                },
                "page-sidebar-backgroundColor": {
                    "value": "#343232",
                    "edited": true
                },
                "group-textColor": {
                    "value": "#ffffff",
                    "edited": true
                },
                "group-borderColor": {
                    "value": "#181b1f",
                    "edited": true
                },
                "group-backgroundColor": {
                    "value": "#181b1f",
                    "edited": true
                },
                "widget-textColor": {
                    "value": "#ffffff",
                    "edited": true
                },
                "widget-backgroundColor": {
                    "value": "#1e89a4",
                    "edited": false
                },
                "widget-borderColor": {
                    "value": "#181b1f",
                    "edited": true
                },
                "base-font": {
                    "value": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
                }
            },
            "angularTheme": {
                "primary": "indigo",
                "accents": "blue",
                "warn": "red",
                "background": "grey",
                "palette": "light"
            }
        },
        "site": {
            "name": "Node-RED Dashboard",
            "hideToolbar": "false",
            "allowSwipe": "false",
            "lockMenu": "false",
            "allowTempTheme": "true",
            "dateFormat": "DD/MM/YYYY",
            "sizes": {
                "sx": 48,
                "sy": 48,
                "gx": 6,
                "gy": 6,
                "cx": 6,
                "cy": 6,
                "px": 0,
                "py": 0
            }
        }
    },
    {
        "id": "2d9c279c.6d8118",
        "type": "ui_tab",
        "name": "Síndrome de Estocolmo - Estadísticas",
        "icon": "dashboard",
        "order": 3,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "495b2837.af3328",
        "type": "ui_group",
        "name": "Persona Detectada",
        "tab": "2d9c279c.6d8118",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "3d11139a.e2adac",
        "type": "ui_group",
        "name": "Cargos por desobediencia de 23",
        "tab": "2d9c279c.6d8118",
        "order": 5,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "510df368.d3c8dc",
        "type": "ui_group",
        "name": "Actividades de 23",
        "tab": "2d9c279c.6d8118",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "dc91a617.de1d",
        "type": "ui_tab",
        "d": true,
        "name": "Dispositivos de evasión",
        "icon": "dashboard",
        "order": 1,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "2030a344.81f834",
        "type": "ui_group",
        "name": "Shape Shifting Mask - Estado",
        "tab": "dc91a617.de1d",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "9018b4b.23d3448",
        "type": "ui_group",
        "name": "Anti signos vitales - Estado",
        "tab": "dc91a617.de1d",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "bc4ef73c.32b6a8",
        "type": "ui_group",
        "name": "Anti Camara",
        "tab": "dc91a617.de1d",
        "order": 3,
        "disp": true,
        "width": "12",
        "collapse": false
    },
    {
        "id": "c237ad78.44b508",
        "type": "ui_group",
        "name": "Control de Shape Shifting Mask",
        "tab": "dc91a617.de1d",
        "order": 4,
        "disp": true,
        "width": 12,
        "collapse": false
    },
    {
        "id": "ef0586c8.097518",
        "type": "ui_tab",
        "name": "Controla el departamento del futuro",
        "icon": "dashboard",
        "order": 2,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "2d6ab607.03dbb2",
        "type": "ui_group",
        "name": "Acciones",
        "tab": "ef0586c8.097518",
        "order": 4,
        "disp": true,
        "width": 6,
        "collapse": false
    },
    {
        "id": "74be730e.33ff4c",
        "type": "ui_group",
        "name": "Comandos de alexa",
        "tab": "ef0586c8.097518",
        "order": 5,
        "disp": true,
        "width": 6,
        "collapse": false
    },
    {
        "id": "457235cd.67e71c",
        "type": "ui_group",
        "name": "Contexto",
        "tab": "ef0586c8.097518",
        "order": 2,
        "disp": true,
        "width": 6,
        "collapse": false
    },
    {
        "id": "1e6be336.24c9e5",
        "type": "ui_group",
        "name": "Focos",
        "tab": "ef0586c8.097518",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "8feab182.895b9",
        "type": "ui_group",
        "name": "En vivo",
        "tab": "ef0586c8.097518",
        "order": 6,
        "disp": true,
        "width": 6,
        "collapse": false
    },
    {
        "id": "f0d39309.5d582",
        "type": "ui_group",
        "name": "Permisos",
        "tab": "ef0586c8.097518",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "da70a51bc78adb2a",
        "type": "telegram bot",
        "botname": "EstocolmoSindrome_bot",
        "usernames": "",
        "chatids": "",
        "baseapiurl": "",
        "updatemode": "polling",
        "pollinterval": "300",
        "usesocks": false,
        "sockshost": "",
        "socksport": "6667",
        "socksusername": "anonymous",
        "sockspassword": "",
        "bothost": "",
        "botpath": "",
        "localbotport": "8443",
        "publicbotport": "8443",
        "privatekey": "",
        "certificate": "",
        "useselfsignedcertificate": false,
        "sslterminated": false,
        "verboselogging": false
    },
    {
        "id": "1a27214b.e39c3f",
        "type": "MySQLdatabase",
        "name": "",
        "host": "127.0.0.1",
        "port": "3306",
        "db": "estocolmosindrome",
        "tz": "UTC-6",
        "charset": "UTF8"
    },
    {
        "id": "292e4d7c.349622",
        "type": "ui_group",
        "name": "Estado de animo de 23",
        "tab": "2d9c279c.6d8118",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "5289daa5.51ddc4",
        "type": "alexa-remote-account",
        "name": "Alexa1",
        "authMethod": "cookie",
        "proxyOwnIp": "192.168.15.101",
        "proxyPort": "3456",
        "cookieFile": "S:\\Alexa\\auth",
        "refreshInterval": "3",
        "alexaServiceHost": "pitangui.amazon.com",
        "amazonPage": "amazon.com",
        "acceptLanguage": "en-US",
        "userAgent": "",
        "useWsMqtt": "on",
        "autoInit": "on"
    },
    {
        "id": "68c6d3dd.905fec",
        "type": "ui_group",
        "name": "Redes sociales de \"23\"",
        "tab": "2d9c279c.6d8118",
        "order": 4,
        "disp": true,
        "width": "12",
        "collapse": false
    },
    {
        "id": "540dd557.1827bc",
        "type": "twitter-credentials",
        "screen_name": "hugoescalpelo"
    },
    {
        "id": "a47ef347.5510c",
        "type": "twitter-credentials",
        "screen_name": "estocolmo_23"
    },
    {
        "id": "3625f62.86f920a",
        "type": "ui_tab",
        "name": "Tweets",
        "icon": "dashboard",
        "disabled": false,
        "hidden": false
    },
    {
        "id": "73edd5c2.06a8bc",
        "type": "ui_group",
        "name": "Tweets automáticos",
        "tab": "3625f62.86f920a",
        "order": 1,
        "disp": true,
        "width": "8",
        "collapse": false
    },
    {
        "id": "27ae81e6.590c3e",
        "type": "mqtt in",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "topic": "hugo/se/main",
        "qos": "0",
        "datatype": "utf8",
        "broker": "4c35078.987c1f8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "x": 130,
        "y": 1040,
        "wires": [
            [
                "bf7dd07c.42f4d"
            ]
        ]
    },
    {
        "id": "bf7dd07c.42f4d",
        "type": "json",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "property": "payload",
        "action": "obj",
        "pretty": false,
        "x": 410,
        "y": 1040,
        "wires": [
            [
                "b8ea15c4.74d638",
                "40c9cee7.836be",
                "f628a7d1.ee7868"
            ]
        ]
    },
    {
        "id": "986f3bc1.d1a1e8",
        "type": "ui_text_input",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "label": "Persona Detectada",
        "tooltip": "",
        "group": "495b2837.af3328",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "mode": "text",
        "delay": 300,
        "topic": "topic",
        "topicType": "msg",
        "x": 1210,
        "y": 1040,
        "wires": [
            []
        ]
    },
    {
        "id": "62d7f239.ab755c",
        "type": "ui_chart",
        "z": "c2c0e0c1.0deb1",
        "d": true,
        "name": "",
        "group": "495b2837.af3328",
        "order": 2,
        "width": 6,
        "height": 5,
        "label": "Reconocimiento facial",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "Reconocimiento facial",
        "dot": false,
        "ymin": "0",
        "ymax": "1",
        "removeOlder": "6",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "x": 760,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "b8ea15c4.74d638",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "var longitud = msg.payload.predictions.length;\nif (longitud == 1) {\n    global.set (\"confidenceW\", msg.payload.predictions[0].confidence);\n    if (msg.payload.predictions[0].userid == \"Hugo\") {\n        msg.payload = \"23\";\n        global.set (\"personadetectadaW\", \"23\");\n        global.set (\"onRecordW\", 1);\n        global.set (\"onRecordE\", 0);\n        global.set (\"confidenceE\", 0);\n        global.set (\"numberPeople\", 0);\n        global.set (\"isAwaken\", 1);\n        global.set (\"isAwakenCount\", global.get (\"isAwakenCount\") + 5);\n        global.set (\"autoOff\", 0);\n        return msg;\n    }\n} else {\n    var newUser = 0;\n    var userList = \"\";\n    for (var i = 0; i < longitud; i++) {\n        if (msg.payload.predictions[i].userid == \"Hugo\") {\n            global.set (\"personadetectadaW\",\"23\");\n            global.set (\"confidenceW\", msg.payload.predictions[i].confidence);\n            global.set (\"onRecordW\", 1);\n            global.set (\"onRecordE\", 0);\n            global.set (\"confidenceE\", 0);\n            global.set (\"isAwaken\", 1);\n            global.set (\"isAwakenCount\", global.get (\"isAwakenCount\") + 5);\n            global.set (\"autoOff\", 0);\n            userList = userList + \"23\" + \", \"; \n        } else if (msg.payload.predictions[i].userid == \"unknown\"){\n            newUser ++;\n            userList = userList + \"Desconocido\" + \", \";\n        } else {\n            userList = userList + msg.payload.predictions[i].userid + \", \";\n        }\n    }\n    msg.payload = userList;\n    global.set (\"numberPeople\", newUser);\n    return msg;\n}\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 720,
        "y": 1040,
        "wires": [
            [
                "c0c53d57.e4b1f",
                "8d29c165.3452a",
                "ad1a997d.808768"
            ]
        ]
    },
    {
        "id": "fd53fb5e.685b88",
        "type": "mqtt in",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "topic": "hugo/se/main-record",
        "qos": "0",
        "datatype": "utf8",
        "broker": "4c35078.987c1f8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "x": 150,
        "y": 1580,
        "wires": [
            [
                "61814314.a3b70c",
                "c1e61015.957eb"
            ]
        ]
    },
    {
        "id": "61814314.a3b70c",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "if (global.get (\"confidenceW\") > 0) {\n    global.set (\"onRecordW\", 1);\n    global.set (\"confidenceE\", 0);\n}\n\n/*\nif(global.get('firstRecord')== 0)\n{\n    global.set ('firstRecord',global.get('timeNow'));\n}\nglobal.set('lastRecord',global.get('timeNow'));\nif ((global.get('lastRecord') - global.get('lastStop'))<300000)\n{\n    global.set('worktime', global.get('worktime')+(global.get('lastRecord') - global.get('lastStop')));\n}\nmsg.payload = global.get('lastRecord');\nglobal.set(\"confidenceE\", 0);\n/*\nglobal.set (\"personadetectadaE\", msg.payload.predictions[0].userid);\nglobal.set (\"confidenceE\", msg.payload.predictions[0].confidence);\nmsg.topic = global.get (\"personadetectada\");\nmsg.payload = global.get (\"confidence\");\n*/\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 420,
        "y": 1580,
        "wires": [
            [
                "29e21012.03468"
            ]
        ]
    },
    {
        "id": "adb48ca3.0d06a",
        "type": "inject",
        "z": "c2c0e0c1.0deb1",
        "name": "Every 1 sec - Master",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 80,
        "wires": [
            [
                "541f603d.9f2af"
            ]
        ]
    },
    {
        "id": "541f603d.9f2af",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "Set timeNow",
        "func": "global.set ('timeNow',msg.payload);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "3c195095.58d7f",
        "type": "comment",
        "z": "c2c0e0c1.0deb1",
        "name": "Detección de 23 en camara desktop",
        "info": "",
        "x": 200,
        "y": 1000,
        "wires": []
    },
    {
        "id": "decb93ae.6be1",
        "type": "comment",
        "z": "c2c0e0c1.0deb1",
        "name": "TimeNow",
        "info": "",
        "x": 120,
        "y": 40,
        "wires": []
    },
    {
        "id": "f093deab.95168",
        "type": "comment",
        "z": "c2c0e0c1.0deb1",
        "name": "Calcula tiempo trabajado",
        "info": "",
        "x": 170,
        "y": 1540,
        "wires": []
    },
    {
        "id": "b53ecd41.8fa5a",
        "type": "mqtt in",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "topic": "hugo/se/main-stop",
        "qos": "0",
        "datatype": "auto",
        "broker": "4c35078.987c1f8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "x": 150,
        "y": 1640,
        "wires": [
            [
                "4b12ff33.5ba71",
                "c1e61015.957eb"
            ]
        ]
    },
    {
        "id": "4b12ff33.5ba71",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "global.set (\"onRecordW\", 0);\nglobal.set (\"lastDetect\", global.get (\"timeNow\"));\n//global.set (\"confidenceW\", 0);\n/*\nglobal.set('lastStop',global.get('timeNow'));\nmsg.payload = (global.get('lastStop') - global.get('lastRecord'));\nglobal.set('worktime', global.get('worktime')+msg.payload);\nif (global.get (\"timeNow\") - global.get (\"lastStop\") > 600000) \n{\n    global.set (\"confidenceW\", 0);\n}*/\nreturn msg;\n\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 420,
        "y": 1640,
        "wires": [
            []
        ]
    },
    {
        "id": "95c57fc6.2038c",
        "type": "ui_gauge",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "group": "510df368.d3c8dc",
        "order": 1,
        "width": 3,
        "height": 3,
        "gtype": "donut",
        "title": "WorkTime",
        "label": "h",
        "format": "{{value}}",
        "min": 0,
        "max": "15",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "8",
        "seg2": "10",
        "x": 720,
        "y": 320,
        "wires": []
    },
    {
        "id": "bc9f28ec.327378",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "Get worktime",
        "func": "msg.payload = global.get ('worktime')/1000/60/60;\nmsg.payload = msg.payload.toFixed(2);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 320,
        "wires": [
            [
                "95c57fc6.2038c"
            ]
        ]
    },
    {
        "id": "40c9cee7.836be",
        "type": "debug",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 710,
        "y": 1080,
        "wires": []
    },
    {
        "id": "e92dadfb.34e66",
        "type": "ui_button",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "group": "2030a344.81f834",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "On/Off",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 290,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "6300560d.57f8c8",
        "type": "ui_switch",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "label": "Conexión a Internet",
        "tooltip": "",
        "group": "2030a344.81f834",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 330,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "bce73a2f.4e613",
        "type": "ui_gauge",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "group": "2030a344.81f834",
        "order": 1,
        "width": 6,
        "height": 4,
        "gtype": "gage",
        "title": "Bateria",
        "label": "%",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#ff0000",
            "#e6e600",
            "#008000"
        ],
        "seg1": "20",
        "seg2": "30",
        "x": 300,
        "y": 160,
        "wires": []
    },
    {
        "id": "bdfa9f9c.084838",
        "type": "comment",
        "z": "d41b2b2b.ffe75",
        "name": "Shape Shifting Mask - Estado",
        "info": "",
        "x": 160,
        "y": 60,
        "wires": []
    },
    {
        "id": "554f039f.2c4254",
        "type": "ui_switch",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "label": "Estado de funcionamiento",
        "tooltip": "",
        "group": "2030a344.81f834",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 360,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "655b900c.159cf",
        "type": "comment",
        "z": "d41b2b2b.ffe75",
        "name": "Evasión de monitoreo",
        "info": "",
        "x": 660,
        "y": 60,
        "wires": []
    },
    {
        "id": "7643043f.384ba4",
        "type": "ui_gauge",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "group": "9018b4b.23d3448",
        "order": 1,
        "width": 6,
        "height": 4,
        "gtype": "gage",
        "title": "Bateria",
        "label": "%",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#ff0000",
            "#e6e600",
            "#008000"
        ],
        "seg1": "20",
        "seg2": "40",
        "x": 800,
        "y": 160,
        "wires": []
    },
    {
        "id": "e008f753.3239e",
        "type": "ui_switch",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "label": "Conexión a Internet",
        "tooltip": "",
        "group": "9018b4b.23d3448",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 830,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "61f6608a.d65f3",
        "type": "ui_button",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "group": "9018b4b.23d3448",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "On/Off",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 790,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "689c0337.63e40c",
        "type": "ui_switch",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "label": "Estado de funcionamiento",
        "tooltip": "",
        "group": "9018b4b.23d3448",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 860,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "226c82a8.27a4c6",
        "type": "inject",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "85",
        "payloadType": "num",
        "x": 120,
        "y": 160,
        "wires": [
            [
                "bce73a2f.4e613"
            ]
        ]
    },
    {
        "id": "959d5170.bf3e88",
        "type": "inject",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "38",
        "payloadType": "num",
        "x": 630,
        "y": 160,
        "wires": [
            [
                "7643043f.384ba4"
            ]
        ]
    },
    {
        "id": "d804d704.b3c8c",
        "type": "comment",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "info": "",
        "x": 1100,
        "y": 60,
        "wires": []
    },
    {
        "id": "63623aea.304344",
        "type": "ui_button",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "group": "bc4ef73c.32b6a8",
        "order": 4,
        "width": 4,
        "height": 1,
        "passthru": false,
        "label": "On/Off Camara Escritorio",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 1150,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "907248b8.4754",
        "type": "ui_button",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "group": "bc4ef73c.32b6a8",
        "order": 1,
        "width": 4,
        "height": 1,
        "passthru": false,
        "label": "On/Off Camara Librero",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 1150,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "b25312f8.955fa8",
        "type": "ui_button",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "group": "bc4ef73c.32b6a8",
        "order": 7,
        "width": 4,
        "height": 1,
        "passthru": false,
        "label": "On/Off Camara Sala",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 1140,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "7dceb3e8.4c8b1c",
        "type": "ui_button",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "group": "bc4ef73c.32b6a8",
        "order": 10,
        "width": 4,
        "height": 1,
        "passthru": false,
        "label": "On/Off Camara Cocina",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 1150,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "ed208c3c.6a8ee8",
        "type": "ui_button",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "group": "bc4ef73c.32b6a8",
        "order": 13,
        "width": 4,
        "height": 1,
        "passthru": false,
        "label": "On/Off Camara Puerta",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 1140,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "5b7a4df7.a67134",
        "type": "ui_button",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "group": "bc4ef73c.32b6a8",
        "order": 16,
        "width": 4,
        "height": 1,
        "passthru": false,
        "label": "On/Off Camara Habitación",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 1160,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "d6598b48.507aa",
        "type": "ui_switch",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "label": "Estado de funcionamiento",
        "tooltip": "",
        "group": "bc4ef73c.32b6a8",
        "order": 2,
        "width": 4,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 1440,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "b429c766.0a3ef8",
        "type": "ui_switch",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "label": "Conexión a Internet",
        "tooltip": "",
        "group": "bc4ef73c.32b6a8",
        "order": 12,
        "width": 4,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 1710,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "dcf8b236.c91b18",
        "type": "ui_switch",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "label": "Estado de funcionamiento",
        "tooltip": "",
        "group": "bc4ef73c.32b6a8",
        "order": 17,
        "width": 4,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 1440,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "6f87c79a.f76da",
        "type": "ui_switch",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "label": "Conexión a Internet",
        "tooltip": "",
        "group": "bc4ef73c.32b6a8",
        "order": 9,
        "width": 4,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 1710,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "96bbf056.582f9",
        "type": "ui_switch",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "label": "Estado de funcionamiento",
        "tooltip": "",
        "group": "bc4ef73c.32b6a8",
        "order": 11,
        "width": 4,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 1440,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "6a40af84.1da328",
        "type": "ui_switch",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "label": "Conexión a Internet",
        "tooltip": "",
        "group": "bc4ef73c.32b6a8",
        "order": 6,
        "width": 4,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 1710,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "ef8a03f4.9ed4d",
        "type": "ui_switch",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "label": "Estado de funcionamiento",
        "tooltip": "",
        "group": "bc4ef73c.32b6a8",
        "order": 5,
        "width": 4,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 1440,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "4038767c.67fc68",
        "type": "ui_switch",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "label": "Conexión a Internet",
        "tooltip": "",
        "group": "bc4ef73c.32b6a8",
        "order": 18,
        "width": 4,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 1710,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "d0452699.b53e3",
        "type": "ui_switch",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "label": "Estado de funcionamiento",
        "tooltip": "",
        "group": "bc4ef73c.32b6a8",
        "order": 8,
        "width": 4,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 1440,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "53ffbd6d.4d7ba4",
        "type": "ui_switch",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "label": "Conexión a Internet",
        "tooltip": "",
        "group": "bc4ef73c.32b6a8",
        "order": 15,
        "width": 4,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 1710,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "cde11233.ff296",
        "type": "ui_switch",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "label": "Estado de funcionamiento",
        "tooltip": "",
        "group": "bc4ef73c.32b6a8",
        "order": 14,
        "width": 4,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 1440,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "c17130a3.636f",
        "type": "ui_switch",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "label": "Conexión a Internet",
        "tooltip": "",
        "group": "bc4ef73c.32b6a8",
        "order": 3,
        "width": 4,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 1710,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "3cd2b74.9c52c48",
        "type": "ui_dropdown",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "label": "Escena",
        "tooltip": "",
        "place": "Select option",
        "group": "bc4ef73c.32b6a8",
        "order": 19,
        "width": 0,
        "height": 0,
        "passthru": true,
        "multiple": false,
        "options": [
            {
                "label": "",
                "value": "Trabajando",
                "type": "str"
            },
            {
                "label": "",
                "value": "Cocinando",
                "type": "str"
            },
            {
                "label": "",
                "value": "Comiendo",
                "type": "str"
            },
            {
                "label": "",
                "value": "Ausente",
                "type": "str"
            },
            {
                "label": "",
                "value": "Durmiendo",
                "type": "str"
            },
            {
                "label": "",
                "value": "",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "x": 1100,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "ff94e1e.379b42",
        "type": "comment",
        "z": "d41b2b2b.ffe75",
        "name": "Shape Shifting mask",
        "info": "",
        "x": 130,
        "y": 460,
        "wires": []
    },
    {
        "id": "b9441045.e3f5e",
        "type": "ui_button",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "group": "c237ad78.44b508",
        "order": 4,
        "width": 4,
        "height": 1,
        "passthru": false,
        "label": "Persona 1",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 110,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "b18e502e.0ab0d",
        "type": "ui_button",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "group": "c237ad78.44b508",
        "order": 5,
        "width": 4,
        "height": 1,
        "passthru": false,
        "label": "Persona 2",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 110,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "54b9a43d.a45374",
        "type": "ui_button",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "group": "c237ad78.44b508",
        "order": 6,
        "width": 4,
        "height": 1,
        "passthru": false,
        "label": "Persona 3",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 110,
        "y": 600,
        "wires": [
            []
        ]
    },
    {
        "id": "bb742dfb.f9e138",
        "type": "ui_button",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "group": "c237ad78.44b508",
        "order": 7,
        "width": 4,
        "height": 1,
        "passthru": false,
        "label": "Feliz",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 90,
        "y": 640,
        "wires": [
            []
        ]
    },
    {
        "id": "490560a4.7bb6b",
        "type": "ui_button",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "group": "c237ad78.44b508",
        "order": 11,
        "width": 4,
        "height": 1,
        "passthru": false,
        "label": "Calmado",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 100,
        "y": 680,
        "wires": [
            []
        ]
    },
    {
        "id": "8e9acc5b.bb1bd",
        "type": "ui_button",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "group": "c237ad78.44b508",
        "order": 10,
        "width": 4,
        "height": 1,
        "passthru": false,
        "label": "Enojado",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 280,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "d970c11c.257af8",
        "type": "ui_button",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "group": "c237ad78.44b508",
        "order": 9,
        "width": 4,
        "height": 1,
        "passthru": false,
        "label": "Cansado",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 280,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "9c7e2939.5faaa",
        "type": "ui_button",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "group": "c237ad78.44b508",
        "order": 12,
        "width": 4,
        "height": 1,
        "passthru": false,
        "label": "Triste",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 270,
        "y": 600,
        "wires": [
            []
        ]
    },
    {
        "id": "75c2e420.9165fc",
        "type": "ui_button",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "group": "c237ad78.44b508",
        "order": 8,
        "width": 4,
        "height": 1,
        "passthru": false,
        "label": "Estresado",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 290,
        "y": 640,
        "wires": [
            []
        ]
    },
    {
        "id": "759eaa7e.bb59d4",
        "type": "ui_button",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "group": "c237ad78.44b508",
        "order": 2,
        "width": 4,
        "height": 1,
        "passthru": false,
        "label": "Abrir",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 270,
        "y": 680,
        "wires": [
            []
        ]
    },
    {
        "id": "1778ea15.5501a6",
        "type": "ui_button",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "group": "c237ad78.44b508",
        "order": 3,
        "width": 4,
        "height": 1,
        "passthru": false,
        "label": "Cerrar",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 90,
        "y": 720,
        "wires": [
            []
        ]
    },
    {
        "id": "7806debe.5a1858",
        "type": "ui_button",
        "z": "d41b2b2b.ffe75",
        "name": "",
        "group": "c237ad78.44b508",
        "order": 1,
        "width": 4,
        "height": 1,
        "passthru": false,
        "label": "Demo",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 270,
        "y": 720,
        "wires": [
            []
        ]
    },
    {
        "id": "f245c3a2.25a3c",
        "type": "comment",
        "z": "2e3f68c7.2f3ff",
        "name": "Control de dispositivos",
        "info": "",
        "x": 180,
        "y": 80,
        "wires": []
    },
    {
        "id": "623b97dc.04ed58",
        "type": "ui_switch",
        "z": "2e3f68c7.2f3ff",
        "d": true,
        "name": "",
        "label": "TV On/Off",
        "tooltip": "",
        "group": "74be730e.33ff4c",
        "order": 9,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "payload",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 620,
        "y": 2720,
        "wires": [
            [
                "fe02ae6d.d374e"
            ]
        ]
    },
    {
        "id": "92669c1d.f15208",
        "type": "ui_button",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "group": "2d6ab607.03dbb2",
        "order": 5,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Tomar un café",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 640,
        "y": 3000,
        "wires": [
            [
                "372f485b.c50f48"
            ]
        ]
    },
    {
        "id": "ea5e3c92.fb5ba",
        "type": "ui_switch",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "label": "Foco Sala",
        "tooltip": "",
        "group": "1e6be336.24c9e5",
        "order": 5,
        "width": 6,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "payload",
        "topicType": "msg",
        "style": "",
        "onvalue": "ON",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "OFF",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 620,
        "y": 420,
        "wires": [
            [
                "2b885981.61ac76"
            ]
        ]
    },
    {
        "id": "4defac05.73e454",
        "type": "ui_slider",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "label": "Brillo foco sala",
        "tooltip": "",
        "group": "1e6be336.24c9e5",
        "order": 6,
        "width": 6,
        "height": 1,
        "passthru": true,
        "outs": "end",
        "topic": "payload",
        "topicType": "msg",
        "min": "10",
        "max": "100",
        "step": "10",
        "x": 640,
        "y": 540,
        "wires": [
            [
                "9d31aad9.e69678"
            ]
        ]
    },
    {
        "id": "4aec905b.4aaee",
        "type": "ui_switch",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "label": "Foco Pasillo",
        "tooltip": "",
        "group": "1e6be336.24c9e5",
        "order": 8,
        "width": 6,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "payloaad",
        "topicType": "msg",
        "style": "",
        "onvalue": "ON",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "OFF",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 630,
        "y": 660,
        "wires": [
            [
                "c1cef348.6a0cd"
            ]
        ]
    },
    {
        "id": "9034188c.950e08",
        "type": "ui_switch",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "label": "Foco Oficina",
        "tooltip": "",
        "group": "1e6be336.24c9e5",
        "order": 11,
        "width": 6,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "payload",
        "topicType": "msg",
        "style": "",
        "onvalue": "ON",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "OFF",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 630,
        "y": 900,
        "wires": [
            [
                "d40f8251.7ec3a"
            ]
        ]
    },
    {
        "id": "320aac71.9c44c4",
        "type": "ui_switch",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "label": "Foco Lavamanos",
        "tooltip": "",
        "group": "1e6be336.24c9e5",
        "order": 17,
        "width": 6,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "payload",
        "topicType": "msg",
        "style": "",
        "onvalue": "ON",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "Off",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 650,
        "y": 1420,
        "wires": [
            [
                "118a2b92.77c854"
            ]
        ]
    },
    {
        "id": "bec668c4.eff1",
        "type": "ui_slider",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "label": "Brillo foco Pasillo",
        "tooltip": "",
        "group": "1e6be336.24c9e5",
        "order": 9,
        "width": 6,
        "height": 1,
        "passthru": true,
        "outs": "end",
        "topic": "payload",
        "topicType": "msg",
        "min": "10",
        "max": "100",
        "step": "10",
        "x": 650,
        "y": 780,
        "wires": [
            [
                "a5f143c6.a790c8"
            ]
        ]
    },
    {
        "id": "5b433097.60cb88",
        "type": "ui_slider",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "label": "Brillo foco Oficina",
        "tooltip": "",
        "group": "1e6be336.24c9e5",
        "order": 12,
        "width": 6,
        "height": 1,
        "passthru": true,
        "outs": "end",
        "topic": "payload",
        "topicType": "msg",
        "min": "10",
        "max": "100",
        "step": "10",
        "x": 650,
        "y": 1020,
        "wires": [
            [
                "1c0b82cb.a0efbd"
            ]
        ]
    },
    {
        "id": "8220afcf.de83a",
        "type": "ui_slider",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "label": "Brillo foco Cocina",
        "tooltip": "",
        "group": "1e6be336.24c9e5",
        "order": 15,
        "width": 6,
        "height": 1,
        "passthru": true,
        "outs": "end",
        "topic": "payload",
        "topicType": "msg",
        "min": "10",
        "max": "100",
        "step": "10",
        "x": 650,
        "y": 1280,
        "wires": [
            [
                "2507e68d.25364a"
            ]
        ]
    },
    {
        "id": "d7de0f14.b96788",
        "type": "ui_slider",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "label": "Brillo foco lavamanos",
        "tooltip": "",
        "group": "1e6be336.24c9e5",
        "order": 18,
        "width": 6,
        "height": 1,
        "passthru": true,
        "outs": "end",
        "topic": "topic",
        "topicType": "msg",
        "min": "10",
        "max": "100",
        "step": "10",
        "x": 660,
        "y": 1540,
        "wires": [
            [
                "2252e710.8fdcc8"
            ]
        ]
    },
    {
        "id": "eee45340.4a9f4",
        "type": "ui_switch",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "label": "Foco Cocina",
        "tooltip": "",
        "group": "1e6be336.24c9e5",
        "order": 14,
        "width": 6,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "payload",
        "topicType": "msg",
        "style": "",
        "onvalue": "ON",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "OFF",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 630,
        "y": 1160,
        "wires": [
            [
                "13aea833.21be78"
            ]
        ]
    },
    {
        "id": "ac3c7867.507fa",
        "type": "ui_button",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "group": "74be730e.33ff4c",
        "order": 1,
        "width": 6,
        "height": 1,
        "passthru": true,
        "label": "Enviar mensaje de voz a 23",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 680,
        "y": 1720,
        "wires": [
            [
                "35b90e5d.c7c972"
            ]
        ]
    },
    {
        "id": "c7b52406.8089e",
        "type": "ui_text_input",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "label": "Escribe aquí tu mensaje",
        "tooltip": "Escribe aquí tu mensaje",
        "group": "74be730e.33ff4c",
        "order": 2,
        "width": 6,
        "height": 1,
        "passthru": true,
        "mode": "text",
        "delay": "300",
        "topic": "payload",
        "topicType": "msg",
        "x": 670,
        "y": 1780,
        "wires": [
            [
                "19b706a3.cdc399"
            ]
        ]
    },
    {
        "id": "1e3effe1.53e7e",
        "type": "ui_button",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "group": "74be730e.33ff4c",
        "order": 4,
        "width": 6,
        "height": 1,
        "passthru": true,
        "label": "Poner música aleatoria en Alexa",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 690,
        "y": 1840,
        "wires": [
            [
                "c15af2bb.661f1"
            ]
        ]
    },
    {
        "id": "f64070e1.63711",
        "type": "ui_switch",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "label": "Lampara de mesa",
        "tooltip": "",
        "group": "1e6be336.24c9e5",
        "order": 2,
        "width": 6,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "payload",
        "topicType": "msg",
        "style": "",
        "onvalue": "ON",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "OFF",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 650,
        "y": 300,
        "wires": [
            [
                "54587617.1caed8"
            ]
        ]
    },
    {
        "id": "c72986c4.5b4228",
        "type": "ui_switch",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "label": "Lampara derecha (switch 1)",
        "tooltip": "",
        "group": "1e6be336.24c9e5",
        "order": 4,
        "width": 6,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 680,
        "y": 2800,
        "wires": [
            [
                "c00b2be7.13f088"
            ]
        ]
    },
    {
        "id": "e15f4bf2.6807f",
        "type": "ui_switch",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "label": "Lampara de piso",
        "tooltip": "",
        "group": "1e6be336.24c9e5",
        "order": 1,
        "width": 6,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "payload",
        "topicType": "msg",
        "style": "",
        "onvalue": "ON",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "OFF",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 650,
        "y": 180,
        "wires": [
            [
                "1d4535c1.7afe7a"
            ]
        ]
    },
    {
        "id": "fe159c4.cb6f86",
        "type": "ui_switch",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "label": "Lampara izquierda (switch 2)",
        "tooltip": "",
        "group": "1e6be336.24c9e5",
        "order": 3,
        "width": 6,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 680,
        "y": 2880,
        "wires": [
            [
                "c3259ab6.2e3078"
            ]
        ]
    },
    {
        "id": "fe02ae6d.d374e",
        "type": "switch",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "true",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "false",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 930,
        "y": 2720,
        "wires": [
            [
                "ba01a703.f0e458"
            ],
            [
                "b82bf557.a4f648"
            ]
        ]
    },
    {
        "id": "ba01a703.f0e458",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Alexa. Enciende la tele",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1400,
        "y": 2720,
        "wires": [
            [
                "c45cbd28.df519"
            ]
        ]
    },
    {
        "id": "b82bf557.a4f648",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Alexa, apaga la tele",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1400,
        "y": 2760,
        "wires": [
            [
                "c45cbd28.df519"
            ]
        ]
    },
    {
        "id": "19b706a3.cdc399",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "global.set (\"customMsg\", msg.payload);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 1780,
        "wires": [
            []
        ]
    },
    {
        "id": "154f2e47.a350f2",
        "type": "ui_button",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "group": "74be730e.33ff4c",
        "order": 5,
        "width": 6,
        "height": 1,
        "passthru": true,
        "label": "Detener la música",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 650,
        "y": 1900,
        "wires": [
            [
                "c9424c27.f9af98"
            ]
        ]
    },
    {
        "id": "7fc06c3e.c99ae4",
        "type": "ui_button",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "group": "74be730e.33ff4c",
        "order": 6,
        "width": 6,
        "height": 1,
        "passthru": false,
        "label": "Reproducir canción específica",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 690,
        "y": 1960,
        "wires": [
            [
                "69a17bd2.389764"
            ]
        ]
    },
    {
        "id": "27ecb0ac.e2247",
        "type": "ui_text_input",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "label": "Escribe aquí el nombre de la canción",
        "tooltip": "Escribe aquí el nombre de la canción",
        "group": "74be730e.33ff4c",
        "order": 7,
        "width": 6,
        "height": 1,
        "passthru": true,
        "mode": "text",
        "delay": 300,
        "topic": "topic",
        "topicType": "msg",
        "x": 710,
        "y": 2020,
        "wires": [
            [
                "5671450c.b0c45c"
            ]
        ]
    },
    {
        "id": "5671450c.b0c45c",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "global.set(\"customSong\", msg.payload);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 2020,
        "wires": [
            []
        ]
    },
    {
        "id": "dcb434ae.6f52b8",
        "type": "ui_slider",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "label": "Cambiar volumen de Alexa",
        "tooltip": "",
        "group": "74be730e.33ff4c",
        "order": 8,
        "width": 6,
        "height": 1,
        "passthru": true,
        "outs": "end",
        "topic": "payload",
        "topicType": "msg",
        "min": "15",
        "max": "45",
        "step": "5",
        "x": 680,
        "y": 2080,
        "wires": [
            [
                "c944ee90.b1eb8"
            ]
        ]
    },
    {
        "id": "ffff05d8.854988",
        "type": "switch",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "ON",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "OFF",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1170,
        "y": 300,
        "wires": [
            [
                "4af0cce3.691864"
            ],
            [
                "18fe369e.c248f9"
            ]
        ]
    },
    {
        "id": "15184a81.1c7795",
        "type": "switch",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "true",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "false",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1170,
        "y": 2800,
        "wires": [
            [
                "e4d758a5.73e718"
            ],
            [
                "1e45e7df.f6d458"
            ]
        ]
    },
    {
        "id": "e4d758a5.73e718",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Alexa, enciende lampara derecha",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1400,
        "y": 2800,
        "wires": [
            [
                "c45cbd28.df519"
            ]
        ]
    },
    {
        "id": "1e45e7df.f6d458",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Alexa, apaga lampara derecha",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1400,
        "y": 2840,
        "wires": [
            [
                "c45cbd28.df519"
            ]
        ]
    },
    {
        "id": "d63b6dbb.0fdeb",
        "type": "switch",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "true",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "false",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1170,
        "y": 2880,
        "wires": [
            [
                "a3fb50b2.669c7"
            ],
            [
                "e4d9db22.4edfe8"
            ]
        ]
    },
    {
        "id": "a3fb50b2.669c7",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Alexa, enciende lampara izquierda",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1400,
        "y": 2880,
        "wires": [
            [
                "c45cbd28.df519"
            ]
        ]
    },
    {
        "id": "e4d9db22.4edfe8",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Alexa, apaga lampara izquierda",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1400,
        "y": 2920,
        "wires": [
            [
                "c45cbd28.df519"
            ]
        ]
    },
    {
        "id": "cc8bf57a.7b8c48",
        "type": "telegram receiver",
        "z": "139909a2.e2cae6",
        "name": "",
        "bot": "da70a51bc78adb2a",
        "saveDataDir": "",
        "filterCommands": false,
        "x": 110,
        "y": 340,
        "wires": [
            [
                "51893f8f.76475"
            ],
            []
        ]
    },
    {
        "id": "f29f2c4a.be53e8",
        "type": "switch",
        "z": "139909a2.e2cae6",
        "name": "",
        "property": "payload.content",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "/start",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "/ayuda",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "/focosala",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "/focooficina",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "/focopasillo",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "/enciendefocos",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "/focoscolores",
                "vt": "str"
            },
            {
                "t": "else"
            },
            {
                "t": "eq",
                "v": "/musica",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "/comando",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "/reportarproblema",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "/cargasaldo",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "/escritoriocam",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "/puertacam",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "/librerocam",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "/mirillacam",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "/salacam",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "/cocinacam",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 18,
        "x": 1030,
        "y": 420,
        "wires": [
            [
                "c82717f1.fb5908"
            ],
            [
                "64fbdc7.a1e9624"
            ],
            [
                "24a985f6.ef382a"
            ],
            [
                "1c79f757.a6f3c1"
            ],
            [
                "1d4dc0dd.7ae08f"
            ],
            [
                "eb6e0c05.1e821"
            ],
            [
                "7fd8649e.4b5584"
            ],
            [
                "9892f397.ccad68"
            ],
            [
                "9b64f2fa.a33018"
            ],
            [
                "dcd2c4e9.ec4b58"
            ],
            [
                "ca8f3811.e0bc18"
            ],
            [
                "a651497c.072ef8"
            ],
            [
                "5ca242a2.5ea55c"
            ],
            [
                "5ca242a2.5ea55c"
            ],
            [
                "5ca242a2.5ea55c"
            ],
            [
                "5ca242a2.5ea55c"
            ],
            [
                "5ca242a2.5ea55c"
            ],
            [
                "5ca242a2.5ea55c"
            ]
        ]
    },
    {
        "id": "c82717f1.fb5908",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "msg.payload.sentMessageId = msg.originalMessage.chat.id;\nmsg.payload.content = \"Hola \"+msg.originalMessage.chat.first_name+\" \"+msg.originalMessage.chat.last_name+ \".\\nPara comenzar, selecciona uno de los siguientes comandos:\\n /ayuda - Conoce más sobre el proyecto\\n /focosala - Enciende foco sala y apaga si está encendido\\n /focooficina - Enciende foco oficina y apaga si está encendido\\n /focopasillo - Enciende foco pasillo y apaga si está encendido\\n /enciendefocos - Enciende todos los focos, apaga si están encendido\\n /focoscolores - Cambia el color de todos los focos\\n /musica - Reproduce música aleatoria en el departamento\\n /comando - Puedes escribir un mensaje de voz para que \\\"23\\\" lo escuche en el departamento\\n /reportaproblema - Reporta en caso de que el streaming o el sitio no funcione\\n\\nSi cambiaste algún foco, puedes ver los resultados pidiendo la foto de alguna cámara\\n/escritoriocam\\n/cocinacam\\n/salacam\\n/librerocam\\n/puertacam \\n\\nPara que los comandos funcionen, necesitas subir una selfie, la cual te dará oportunidad de enviar 5 comandos.\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1420,
        "y": 360,
        "wires": [
            [
                "c3bc9e2f.98a608"
            ]
        ]
    },
    {
        "id": "c3bc9e2f.98a608",
        "type": "telegram sender",
        "z": "139909a2.e2cae6",
        "name": "",
        "bot": "da70a51bc78adb2a",
        "haserroroutput": false,
        "outputs": 1,
        "x": 2090,
        "y": 360,
        "wires": [
            [
                "50f43893.1ee898",
                "405f85b1.9c39fc",
                "d819823.105d28"
            ]
        ]
    },
    {
        "id": "64fbdc7.a1e9624",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "msg.payload.sentMessageId = msg.originalMessage.chat.id;\nmsg.payload.content = \"En \\\"Sindrome de Estocolmo\\\", el puedes controlar el comportamiento de \\\"23\\\", el habitante de un departamento del futuro. Podrás enviarle instrucciones a su Alexa, y por lo tanto controlar sus aparatos, la musica que escucha y darle instrucciones sobre qué hacer. \\n Para conocer la lista de comandos, haz clic en /start \\n Para ver sus cámaras de seguridad en vivo y observar como le controlas, dirígete a estocolmosindrome.com\";  \nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1420,
        "y": 400,
        "wires": [
            [
                "c3bc9e2f.98a608"
            ]
        ]
    },
    {
        "id": "24a985f6.ef382a",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "var focosalatemp = global.get (\"focosalalast\");\n\nif (focosalatemp == \"true\"){\n    global.set (\"focosalanow\", \"false\");\n    global.set (\"estado\", \"apagado\");\n}else if (focosalatemp == \"false\") {\n    global.set (\"focosalanow\", \"true\");\n    global.set (\"estado\", \"encendido\");\n}\nglobal.set (\"focosalalast\", global.get (\"focosalanow\"));\nglobal.set (\"retro\", 1);\nmsg.payload2 = msg.payload;\nmsg.payload = global.get (\"focosalanow\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1420,
        "y": 440,
        "wires": [
            [
                "68ec003b.90ebc8",
                "66de85b6.4287c4"
            ]
        ]
    },
    {
        "id": "68ec003b.90ebc8",
        "type": "link out",
        "z": "139909a2.e2cae6",
        "name": "foco sala send",
        "links": [
            "c0f6330b.b5b348"
        ],
        "x": 1595,
        "y": 440,
        "wires": []
    },
    {
        "id": "1c79f757.a6f3c1",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "if (global.get (\"focooficinalast\") == \"true\"){\n    global.set (\"focooficinanow\", \"false\");\n    global.set (\"estado\", \"apagado\");\n}else if (global.get (\"focooficinalast\") == \"false\") {\n    global.set (\"focooficinanow\", \"true\");\n    global.set (\"estado\", \"encendido\");\n}\nglobal.set (\"focooficinalast\", global.get (\"focooficinanow\"));\nglobal.set (\"retro\", 1);\nmsg.payload2 = msg.payload;\nmsg.payload = global.get (\"focooficinanow\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1420,
        "y": 520,
        "wires": [
            [
                "7894c68b.f67c28",
                "e9c4c4d2.f98698"
            ]
        ]
    },
    {
        "id": "1d4dc0dd.7ae08f",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "if (global.get (\"focopasillolast\") == \"true\"){\n    global.set (\"focopasillonow\", \"false\");\n    global.set (\"estado\", \"apagado\");\n}else if (global.get (\"focopasillolast\") == \"false\") {\n    global.set (\"focopasillonow\", \"true\");\n    global.set (\"estado\", \"encendido\");\n}\nglobal.set (\"focopasillolast\", global.get (\"focopasillonow\"));\nglobal.set (\"retro\", 1);\nmsg.payload2 = msg.payload;\nmsg.payload = global.get (\"focopasillonow\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1420,
        "y": 600,
        "wires": [
            [
                "f5ab47d4.ae6e1",
                "a633a2a3.40c578"
            ]
        ]
    },
    {
        "id": "7894c68b.f67c28",
        "type": "link out",
        "z": "139909a2.e2cae6",
        "name": "foco oficina send",
        "links": [
            "d1fd585f.8162d"
        ],
        "x": 1595,
        "y": 520,
        "wires": []
    },
    {
        "id": "f5ab47d4.ae6e1",
        "type": "link out",
        "z": "139909a2.e2cae6",
        "name": "foco pasillo send",
        "links": [
            "6f8aa3f7.e94dc4"
        ],
        "x": 1595,
        "y": 600,
        "wires": []
    },
    {
        "id": "eb6e0c05.1e821",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "if (global.get (\"todosfocoslast\") == \"true\"){\n    global.set (\"todosfocosnow\", \"false\");\n    global.set (\"estado\", \"apagado\");\n}else if (global.get (\"todosfocoslast\") == \"false\") {\n    global.set (\"todosfocosnow\", \"true\");\n    global.set (\"estado\", \"encendido\");\n}\nglobal.set (\"todosfocoslast\", global.get (\"todosfocosnow\"));\nglobal.set (\"retro\", 1);\nmsg.payload2 = msg.payload;\nmsg.payload = global.get (\"todosfocosnow\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1420,
        "y": 680,
        "wires": [
            [
                "87e5b1bf.30d6",
                "2333eeb9.bed59a"
            ]
        ]
    },
    {
        "id": "87e5b1bf.30d6",
        "type": "link out",
        "z": "139909a2.e2cae6",
        "name": "todos los focos send",
        "links": [
            "ce8cf9a9.4f82f8"
        ],
        "x": 1595,
        "y": 680,
        "wires": []
    },
    {
        "id": "66de85b6.4287c4",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "msg.payload = msg.payload2;\nmsg.payload.sentMessageId = msg.originalMessage.chat.id;\nmsg.payload.content = \"Foco de la sala \"+global.get(\"estado\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1640,
        "y": 480,
        "wires": [
            [
                "ac953597.3407d8"
            ]
        ]
    },
    {
        "id": "e9c4c4d2.f98698",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "msg.payload = msg.payload2;\nmsg.payload.sentMessageId = msg.originalMessage.chat.id;\nmsg.payload.content = \"Foco de la oficina \"+global.get(\"estado\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1640,
        "y": 560,
        "wires": [
            [
                "ac953597.3407d8"
            ]
        ]
    },
    {
        "id": "a633a2a3.40c578",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "msg.payload = msg.payload2;\nmsg.payload.sentMessageId = msg.originalMessage.chat.id;\nmsg.payload.content = \"Foco del pasillo \"+global.get(\"estado\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1640,
        "y": 640,
        "wires": [
            [
                "ac953597.3407d8"
            ]
        ]
    },
    {
        "id": "ac953597.3407d8",
        "type": "delay",
        "z": "139909a2.e2cae6",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1860,
        "y": 480,
        "wires": [
            [
                "c3bc9e2f.98a608",
                "17d3ca2c.c739e6"
            ]
        ]
    },
    {
        "id": "2333eeb9.bed59a",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "msg.payload = msg.payload2;\nmsg.payload.sentMessageId = msg.originalMessage.chat.id;\nmsg.payload.content = \"El estado de todos los focos es \"+global.get(\"estado\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1640,
        "y": 720,
        "wires": [
            [
                "ac953597.3407d8"
            ]
        ]
    },
    {
        "id": "7fd8649e.4b5584",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "global.set(\"color\",1);\nmsg.payload.sentMessageId = msg.originalMessage.chat.id;\nmsg.payload.content = \"Escribe el color alque quieres cambiar los focos.\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1420,
        "y": 760,
        "wires": [
            [
                "ac953597.3407d8"
            ]
        ]
    },
    {
        "id": "9892f397.ccad68",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "otherwise",
        "func": "msg.payload2 = msg.payload;\nif (global.get (\"color\") == 1) {\n    msg.payload = \"Alexa, todos los focos color \" + msg.payload.content;\n    global.set (\"retro\", 1);\n    return msg;\n}\nif (global.get (\"comando\") == 1) {\n    msg.payload = msg.originalMessage.from.first_name+\" \"+msg.originalMessage.from.last_name+\" dice: \" + msg.payload.content;\n    //global.set (\"retro\", 1);\n    return msg;\n}\nif (global.get (\"falla\") == 1) {\n    msg.payload = \"Se ha encontrado una falla. Fue reportada por\"+msg.originalMessage.from.first_name+\" \"+msg.originalMessage.from.last_name+\". Se reportó lo siguiente. \"+ msg.payload.content;\n    return msg;\n}/* else {\n    msg.payload = \"Comando no reconocido. Intenta de nuevo. Consulta lo que puedes hacer dando clic en /start\";\n    return msg;\n}*/",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1420,
        "y": 800,
        "wires": [
            [
                "8f34f864.09f848",
                "7cf23107.3de68"
            ]
        ]
    },
    {
        "id": "8f34f864.09f848",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "msg.payload = msg.payload2;\nmsg.payload.sentMessageId = msg.originalMessage.chat.id;\nif (global.get (\"color\") == 1) {\n    msg.payload.content = \"Se ha cambiado el color de los focos a \"+msg.payload2.content;\n    global.set (\"color\", 0);\n}\nif (global.get (\"comando\") == 1) {\n    msg.payload.content = \"Se ha enviado el comando \"+msg.payload2.content;\n    global.set (\"comando\", 0);\n}\nif (global.get (\"falla\") == 1) {\n    msg.payload.content = \"Se ha enviado tu reporte. En un momento pongo a 23 a arreglarlo.\";\n    global.set (\"falla\", 0);\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1640,
        "y": 840,
        "wires": [
            [
                "ac953597.3407d8"
            ]
        ]
    },
    {
        "id": "7cf23107.3de68",
        "type": "link out",
        "z": "139909a2.e2cae6",
        "name": "color send",
        "links": [
            "c135f020.01211"
        ],
        "x": 1595,
        "y": 800,
        "wires": []
    },
    {
        "id": "dcd2c4e9.ec4b58",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "global.set(\"comando\",1);\nmsg.payload.sentMessageId = msg.originalMessage.chat.id;\nmsg.payload.content = \"El mensaje que escribas a continuación será escuchado por 23.\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1420,
        "y": 960,
        "wires": [
            [
                "ac953597.3407d8"
            ]
        ]
    },
    {
        "id": "9b64f2fa.a33018",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "if (global.get (\"musicalast\") == \"true\"){\n    global.set (\"musicanow\", \"false\");\n    global.set (\"estado\", \"apagado\");\n}else if (global.get (\"musicalast\") == \"false\") {\n    global.set (\"musicanow\", \"true\");\n    global.set (\"estado\", \"encendido\");\n}\nglobal.set (\"musicalast\", global.get (\"musicanow\"));\nmsg.payload2 = msg.payload;\nmsg.payload = global.get (\"musicanow\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1420,
        "y": 880,
        "wires": [
            [
                "656b5a09.c7fbc4",
                "40d64d9b.aa8b7c"
            ]
        ]
    },
    {
        "id": "656b5a09.c7fbc4",
        "type": "link out",
        "z": "139909a2.e2cae6",
        "name": "musica send",
        "links": [
            "5b4e55aa.77a09c"
        ],
        "x": 1595,
        "y": 880,
        "wires": []
    },
    {
        "id": "40d64d9b.aa8b7c",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "msg.payload = msg.payload2;\nmsg.payload.sentMessageId = msg.originalMessage.chat.id;\nmsg.payload.content = \"El estado de la musica es \"+global.get(\"estado\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1640,
        "y": 920,
        "wires": [
            [
                "ac953597.3407d8"
            ]
        ]
    },
    {
        "id": "ca8f3811.e0bc18",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "msg.payload.sentMessageId = msg.originalMessage.chat.id;\nmsg.payload.content = \"Escribe el problema que encontraste. Asegurate de incluir la funcion que está fallando y el lugar de origen.\";\nglobal.set (\"falla\", 1);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1420,
        "y": 1000,
        "wires": [
            [
                "ac953597.3407d8"
            ]
        ]
    },
    {
        "id": "d080b724.afde6",
        "type": "http request",
        "z": "139909a2.e2cae6",
        "name": "Cam6",
        "method": "GET",
        "ret": "bin",
        "paytoqs": "ignore",
        "url": "192.168.15.21/capture",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1030,
        "y": 260,
        "wires": [
            [
                "b9ea31d0.9fac7"
            ]
        ]
    },
    {
        "id": "b9ea31d0.9fac7",
        "type": "file",
        "z": "139909a2.e2cae6",
        "name": "",
        "filename": "S:\\Captura\\sala1.jpg",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 1460,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "4b086a3b.cfc6e4",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "/*\nif (msg.payload.content[0] == \"/\") {\n    return msg;\n}\n*/\nif (msg.payload.content != \"/start\" && msg.payload.content == \"/ayuda\" && global.get (\"color\") == 0 && global.get (\"comando\") == 0 && global.get (\"falla\") == 0) {\n    return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 680,
        "y": 60,
        "wires": [
            [
                "d080b724.afde6",
                "451ddb24.930664",
                "81e5606c.933d1",
                "bfb4b2f6.d9231",
                "7d867d.581a3984",
                "a0242040.3a728"
            ]
        ]
    },
    {
        "id": "35a3a7ce.42de38",
        "type": "delay",
        "z": "139909a2.e2cae6",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1840,
        "y": 1160,
        "wires": [
            [
                "12f12bb0.3c80b4",
                "6d901239.51e5cc"
            ]
        ]
    },
    {
        "id": "12f12bb0.3c80b4",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "var pl = {\n  content: global.get (\"img0\"),\n  caption: \"Antes\",\n  type : 'photo',\n  chatId: msg.originalMessage.chat.id,\n  chat: msg.payload.content.chat,\n  from: msg.originalMessage.from,\n  message_id : msg.originalMessage.message_id\n}\n\nmsg.payload = pl;\n\n\n/* type can be one of the following\nphoto\naudio\nvideo\nsticker\nvoice\ndocument\n*/\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2560,
        "y": 1100,
        "wires": [
            [
                "971e117c.fc8a3"
            ]
        ]
    },
    {
        "id": "51893f8f.76475",
        "type": "switch",
        "z": "139909a2.e2cae6",
        "name": "",
        "property": "payload.type",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "message",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "photo",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 330,
        "y": 340,
        "wires": [
            [
                "dc712992.c658f8",
                "de74a601.848b58",
                "4b086a3b.cfc6e4"
            ],
            [
                "303fa4a6.4c426c",
                "482f8931.1dea58",
                "6adf4934.32c0b8"
            ]
        ]
    },
    {
        "id": "bd6eb30.ae3d2d",
        "type": "http request",
        "z": "139909a2.e2cae6",
        "name": "",
        "method": "use",
        "ret": "bin",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 890,
        "y": 1480,
        "wires": [
            [
                "4699abe0.610124"
            ]
        ]
    },
    {
        "id": "4699abe0.610124",
        "type": "file",
        "z": "139909a2.e2cae6",
        "name": "",
        "filename": "",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "setbymsg",
        "x": 1030,
        "y": 1480,
        "wires": [
            [
                "e0efb4d8.3c7898"
            ]
        ]
    },
    {
        "id": "694f21ec.36f7c8",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "msg.method = \"GET\";\nmsg.url = msg.payload2.weblink;\nmsg.filename = \"S:\\\\Captura\\\\recibido\\\\\"+msg.originalMessage.from.first_name+\"-\"+msg.originalMessage.from.last_name+\"-\"+msg.payload2.date+\".jpg\";\nglobal.set (\"nameset\", msg.originalMessage.from.first_name+\"-\"+msg.originalMessage.from.last_name+\"-\"+msg.payload2.date+\".jpg\");\n//global.set (\"chances\", 5);\n//msg.payload2=msg.payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 680,
        "y": 1480,
        "wires": [
            [
                "bd6eb30.ae3d2d"
            ]
        ]
    },
    {
        "id": "971e117c.fc8a3",
        "type": "telegram sender",
        "z": "139909a2.e2cae6",
        "name": "",
        "bot": "da70a51bc78adb2a",
        "haserroroutput": false,
        "outputs": 1,
        "x": 2870,
        "y": 1100,
        "wires": [
            []
        ]
    },
    {
        "id": "a4399293.bbbb68",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "var pl = {\n  content: global.get (\"img1\"),\n  message: \":D\",\n  caption: \"Despues\",\n  type : 'photo',\n  chatId: msg.originalMessage.chat.id,\n  chat: msg.payload.content.chat,\n  from: msg.originalMessage.from,\n  message_id : msg.originalMessage.message_id\n}\n\nmsg.payload = pl;\n\n\n/* type can be one of the following\nphoto\naudio\nvideo\nsticker\nvoice\ndocument\n*/\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2560,
        "y": 1160,
        "wires": [
            [
                "971e117c.fc8a3"
            ]
        ]
    },
    {
        "id": "17d3ca2c.c739e6",
        "type": "delay",
        "z": "139909a2.e2cae6",
        "name": "",
        "pauseType": "delay",
        "timeout": "4",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 2060,
        "y": 480,
        "wires": [
            [
                "834eb41c.9a7948",
                "ff951881.e2a3a8",
                "72d50e06.74e5f",
                "cdb1554f.410108",
                "bd97beea.ce073",
                "1f73926e.f6568e"
            ]
        ]
    },
    {
        "id": "2b482f39.fcb5",
        "type": "file",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "filename": "",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "setbymsg",
        "x": 930,
        "y": 3640,
        "wires": [
            [
                "adac19d0.be4668",
                "8ec5b978.bafa48"
            ]
        ]
    },
    {
        "id": "9032bd.00c8d54",
        "type": "http in",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "url": "/upload",
        "method": "post",
        "upload": true,
        "swaggerDoc": "",
        "x": 630,
        "y": 3420,
        "wires": [
            [
                "f9ca23bd.9a549",
                "c5951628.5c4598",
                "434392bf.517b1c"
            ]
        ]
    },
    {
        "id": "e0c6f6eb.2c08c8",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "toBase64",
        "func": "msg.payload = msg.req.files[0].buffer;\nmsg.topic = \"\";\nmsg.filename = \"S:\\\\Captura\\\\usuarios\\\\\"+global.get(\"timetime\")+\".jpg\";\nglobal.set (\"nameset\",global.get(\"timeNow\")+\".jpg\");\n//global.set (\"chances\", 5);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 620,
        "y": 3640,
        "wires": [
            [
                "2b482f39.fcb5"
            ]
        ]
    },
    {
        "id": "c1f765b7.c9e628",
        "type": "ui_gauge",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "group": "f0d39309.5d582",
        "order": 1,
        "width": 6,
        "height": 3,
        "gtype": "gage",
        "title": "Clics disponibles",
        "label": "Clics",
        "format": "{{value}}",
        "min": 0,
        "max": "5",
        "colors": [
            "#ff0000",
            "#e6e600",
            "#268721"
        ],
        "seg1": "1",
        "seg2": "2",
        "x": 2550,
        "y": 640,
        "wires": []
    },
    {
        "id": "dd98f635.b4f34",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "//global.set (\"timetime\", msg.payload);\nmsg.payload = global.get(\"chances\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2260,
        "y": 640,
        "wires": [
            [
                "c1f765b7.c9e628"
            ]
        ]
    },
    {
        "id": "53dbce6d.f087b",
        "type": "inject",
        "z": "2e3f68c7.2f3ff",
        "name": "Every 1 sec",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 2010,
        "y": 640,
        "wires": [
            [
                "dd98f635.b4f34",
                "5add34fd.4e8c44",
                "3bad8409.f2a71c"
            ]
        ]
    },
    {
        "id": "54587617.1caed8",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>0) {\n    global.set (\"chances\", global.get(\"chances\")-1);\n    global.set (\"lamparamesa.power\", msg.payload);\n    global.set (\"onclic\", 1);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 300,
        "wires": [
            [
                "ffff05d8.854988"
            ]
        ]
    },
    {
        "id": "35b90e5d.c7c972",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>0) {\n    global.set (\"chances\", global.get(\"chances\")-1);\n    global.set (\"onclic\", 1);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 1720,
        "wires": [
            [
                "a8247ae2.105b78"
            ]
        ]
    },
    {
        "id": "c9424c27.f9af98",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>0) {\n    global.set (\"chances\", global.get(\"chances\")-1);\n    global.set (\"onclic\", 1);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 1900,
        "wires": [
            [
                "9cafb659.2cb7b8"
            ]
        ]
    },
    {
        "id": "69a17bd2.389764",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>0) {\n    global.set (\"chances\", global.get(\"chances\")-1);\n    global.set (\"onclic\", 1);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 1960,
        "wires": [
            [
                "773b0cb6.6a0e64"
            ]
        ]
    },
    {
        "id": "1d4535c1.7afe7a",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>0) {\n    global.set (\"chances\", global.get(\"chances\")-1);\n    global.set (\"onclic\", 1);\n    global.set (\"lamparapiso.power\", msg.payload);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 180,
        "wires": [
            [
                "eac8296c.ff33d8"
            ]
        ]
    },
    {
        "id": "c00b2be7.13f088",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>0) {\n    global.set (\"chances\", global.get(\"chances\")-1);\n    global.set (\"onclic\", 1);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 2800,
        "wires": [
            [
                "15184a81.1c7795"
            ]
        ]
    },
    {
        "id": "c3259ab6.2e3078",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>0) {\n    global.set (\"chances\", global.get(\"chances\")-1);\n    global.set (\"onclic\", 1);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 2880,
        "wires": [
            [
                "d63b6dbb.0fdeb"
            ]
        ]
    },
    {
        "id": "2b885981.61ac76",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>0) {\n    global.set (\"chances\", global.get(\"chances\")-1);\n    global.set (\"focosala.power\",msg.payload);\n    global.set (\"onclic\", 1);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 420,
        "wires": [
            [
                "755b5fe.e4176a"
            ]
        ]
    },
    {
        "id": "c1cef348.6a0cd",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>0) {\n    global.set (\"chances\", global.get(\"chances\")-1);\n    global.set (\"focopasillo.power\",msg.payload);\n    global.set (\"onclic\", 1);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 660,
        "wires": [
            [
                "4f80e623.c69de8"
            ]
        ]
    },
    {
        "id": "a5f143c6.a790c8",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>0) {\n    global.set (\"chances\", global.get(\"chances\")-1);\n    global.get (\"focopasillo.brightness\", msg.payload);\n    global.set (\"onclic\", 1);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 780,
        "wires": [
            [
                "ba0f1cab.d48c9"
            ]
        ]
    },
    {
        "id": "5add34fd.4e8c44",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get (\"chances\") == 0 && global.get (\"onclic\") == 1) {\n    msg.payload = \"Debes cargar una selfie para poder controlar el espacio\";\n    global.set (\"onclic\", 0);\n    return msg;\n} else if (global.get (\"chances\") >0 && global.get (\"onclic\") == 1) {\n    msg.payload = global.get (\"chances\")+\" clics restantes\";\n    global.set (\"onclic\", 0);\n    return msg;\n} else if (global.get (\"chances\") < 0 && global.get (\"onclic\") == 1) {\n    msg.payload = \"Tu grupo etnico detectado te ha negado clics\";\n    global.set (\"onclic\", 0);\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2260,
        "y": 680,
        "wires": [
            [
                "b718e2ac.b40678"
            ]
        ]
    },
    {
        "id": "b718e2ac.b40678",
        "type": "ui_toast",
        "z": "2e3f68c7.2f3ff",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "",
        "name": "",
        "x": 2550,
        "y": 680,
        "wires": []
    },
    {
        "id": "d5acc1db.ebd19",
        "type": "delay",
        "z": "139909a2.e2cae6",
        "name": "",
        "pauseType": "delay",
        "timeout": "2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 2580,
        "y": 360,
        "wires": [
            [
                "d95314fa.a1bd08"
            ]
        ]
    },
    {
        "id": "d95314fa.a1bd08",
        "type": "telegram sender",
        "z": "139909a2.e2cae6",
        "name": "",
        "bot": "da70a51bc78adb2a",
        "haserroroutput": false,
        "outputs": 1,
        "x": 2870,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "50f43893.1ee898",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "msg.payload.sentMessageId = msg.originalMessage.chat.id;\nif (global.get(\"chances\")>0 && global.get(\"color\")==0 && global.get(\"comando\")==0 && global.get(\"falla\")==0) {\nmsg.payload.content = \"Te quedan \"+global.get(\"chances\")+\" comandos..\";\nreturn msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2340,
        "y": 260,
        "wires": [
            [
                "d5acc1db.ebd19"
            ]
        ]
    },
    {
        "id": "750d973e.70f098",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "msg.payload = msg.payload2;\nmsg.payload.sentMessageId = msg.originalMessage.chat.id;\nmsg.payload.type = \"message\";\nmsg.payload.content = \"Cara detectada. Clics disponibles: \"+global.get (\"chances\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2340,
        "y": 1540,
        "wires": [
            [
                "2731880.4e7ee78"
            ]
        ]
    },
    {
        "id": "2731880.4e7ee78",
        "type": "telegram sender",
        "z": "139909a2.e2cae6",
        "name": "",
        "bot": "da70a51bc78adb2a",
        "haserroroutput": false,
        "outputs": 1,
        "x": 2590,
        "y": 1540,
        "wires": [
            []
        ]
    },
    {
        "id": "dc712992.c658f8",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "\n//if (global.get (\"chances\")> 0 && (msg.payload.content == \"/start\" || msg.payload.content == \"/ayuda\" || global.get (\"color\") == 1 || global.get (\"comando\") == 1 || global.get (\"falla\") == 1)) {\nif (global.get (\"chances\")> 0 || msg.payload.content == \"/start\" || msg.payload.content == \"/ayuda\" || global.get (\"color\") == 1 || global.get (\"comando\") == 1 || global.get (\"falla\") == 1) {\n    return msg;\n} else if (global.get (\"chances\")>= 0) {\n    msg.payload.content = \"/cargasaldo\";\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 680,
        "y": 340,
        "wires": [
            [
                "f29f2c4a.be53e8",
                "97e06fa6.eed6f"
            ]
        ]
    },
    {
        "id": "a651497c.072ef8",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "msg.payload.sentMessageId = msg.originalMessage.chat.id;\nmsg.payload.content = \"Para que los comandos funcionen debes adjuntar una selfie. Las selfies valen 5 comandos\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1420,
        "y": 1040,
        "wires": [
            [
                "ac953597.3407d8"
            ]
        ]
    },
    {
        "id": "de74a601.848b58",
        "type": "debug",
        "z": "139909a2.e2cae6",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 670,
        "y": 380,
        "wires": []
    },
    {
        "id": "451ddb24.930664",
        "type": "http request",
        "z": "139909a2.e2cae6",
        "name": "Cam5",
        "method": "GET",
        "ret": "bin",
        "paytoqs": "ignore",
        "url": "192.168.15.8/capture",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1030,
        "y": 220,
        "wires": [
            [
                "58ca8f6.1400a7"
            ]
        ]
    },
    {
        "id": "81e5606c.933d1",
        "type": "http request",
        "z": "139909a2.e2cae6",
        "name": "Cam4",
        "method": "GET",
        "ret": "bin",
        "paytoqs": "ignore",
        "url": "192.168.15.7/capture",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1030,
        "y": 180,
        "wires": [
            [
                "1deb4f28.a8e331"
            ]
        ]
    },
    {
        "id": "bfb4b2f6.d9231",
        "type": "http request",
        "z": "139909a2.e2cae6",
        "name": "Cam3",
        "method": "GET",
        "ret": "bin",
        "paytoqs": "ignore",
        "url": "192.168.15.23/capture",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1030,
        "y": 140,
        "wires": [
            [
                "62eb1efa.75519"
            ]
        ]
    },
    {
        "id": "7d867d.581a3984",
        "type": "http request",
        "z": "139909a2.e2cae6",
        "name": "Cam2",
        "method": "GET",
        "ret": "bin",
        "paytoqs": "ignore",
        "url": "192.168.15.22/capture",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1030,
        "y": 100,
        "wires": [
            [
                "ece37180.fca3d"
            ]
        ]
    },
    {
        "id": "a0242040.3a728",
        "type": "http request",
        "z": "139909a2.e2cae6",
        "name": "Cam1",
        "method": "GET",
        "ret": "bin",
        "paytoqs": "ignore",
        "url": "192.168.15.24/capture",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1030,
        "y": 60,
        "wires": [
            [
                "f2e47e1f.aecfe"
            ]
        ]
    },
    {
        "id": "f2e47e1f.aecfe",
        "type": "file",
        "z": "139909a2.e2cae6",
        "name": "",
        "filename": "S:\\Captura\\desk1.jpg",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 1460,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "ece37180.fca3d",
        "type": "file",
        "z": "139909a2.e2cae6",
        "name": "",
        "filename": "S:\\Captura\\puerta1.jpg",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 1460,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "62eb1efa.75519",
        "type": "file",
        "z": "139909a2.e2cae6",
        "name": "",
        "filename": "S:\\Captura\\librero1.jpg",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 1460,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "1deb4f28.a8e331",
        "type": "file",
        "z": "139909a2.e2cae6",
        "name": "",
        "filename": "S:\\Captura\\mirilla1.jpg",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 1460,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "58ca8f6.1400a7",
        "type": "file",
        "z": "139909a2.e2cae6",
        "name": "",
        "filename": "S:\\Captura\\cocina1.jpg",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 1460,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "97e06fa6.eed6f",
        "type": "debug",
        "z": "139909a2.e2cae6",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 870,
        "y": 460,
        "wires": []
    },
    {
        "id": "405f85b1.9c39fc",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "msg.payload.sentMessageId = msg.originalMessage.chat.id;\nif (global.get(\"chances\") ==0 && (global.get(\"color\")==0 && global.get(\"comando\")==0 && global.get(\"falla\")==0)) {\n    msg.payload.content = \"Para que los comandos sean validos, necesitas subir una selfie\";\n    return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2340,
        "y": 360,
        "wires": [
            [
                "d5acc1db.ebd19"
            ]
        ]
    },
    {
        "id": "cc28d0b2.fa407",
        "type": "comment",
        "z": "139909a2.e2cae6",
        "name": "Recibir mensaje",
        "info": "",
        "x": 100,
        "y": 300,
        "wires": []
    },
    {
        "id": "15fd856d.c79dab",
        "type": "comment",
        "z": "139909a2.e2cae6",
        "name": "Distinguir entre imagen y mensaje",
        "info": "",
        "x": 420,
        "y": 300,
        "wires": []
    },
    {
        "id": "4abfca36.e630e4",
        "type": "comment",
        "z": "139909a2.e2cae6",
        "name": "Tomar foto en caso de recibir comando",
        "info": "",
        "x": 770,
        "y": 20,
        "wires": []
    },
    {
        "id": "d1d4b460.f44c88",
        "type": "ui_button",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "group": "f0d39309.5d582",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Reportar problema",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 650,
        "y": 2180,
        "wires": [
            [
                "9652e499.15c908"
            ]
        ]
    },
    {
        "id": "9652e499.15c908",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "msg.payload = global.get (\"problemo\");\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 2180,
        "wires": [
            [
                "e2feb2f0.81d2f",
                "15b430c5.8dfc4f"
            ]
        ]
    },
    {
        "id": "8ecb5524.8211e8",
        "type": "ui_text_input",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "label": "Escribe aqui tu problema",
        "tooltip": "Escribe aqui tu problema",
        "group": "f0d39309.5d582",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": true,
        "mode": "text",
        "delay": 300,
        "topic": "topic",
        "topicType": "msg",
        "x": 670,
        "y": 2220,
        "wires": [
            [
                "fa58a2a3.17b2b"
            ]
        ]
    },
    {
        "id": "fa58a2a3.17b2b",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "global.set (\"problemo\", msg.payload);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 2220,
        "wires": [
            []
        ]
    },
    {
        "id": "e2feb2f0.81d2f",
        "type": "e-mail",
        "z": "2e3f68c7.2f3ff",
        "server": "smtp.gmail.com",
        "port": "465",
        "secure": true,
        "tls": true,
        "name": "estocolmosindromeproyecto@gmail.com",
        "dname": "",
        "x": 1280,
        "y": 2180,
        "wires": []
    },
    {
        "id": "20ed334f.b04f3c",
        "type": "ui_toast",
        "z": "2e3f68c7.2f3ff",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "",
        "name": "",
        "x": 1410,
        "y": 2220,
        "wires": []
    },
    {
        "id": "15b430c5.8dfc4f",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Se ha enviado tu mensaje, pronto se reparará",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1200,
        "y": 2220,
        "wires": [
            [
                "20ed334f.b04f3c"
            ]
        ]
    },
    {
        "id": "50e9356d.d9667c",
        "type": "comment",
        "z": "2e3f68c7.2f3ff",
        "name": "Reporte de problemas",
        "info": "",
        "x": 660,
        "y": 2140,
        "wires": []
    },
    {
        "id": "6ec06e0d.50921",
        "type": "comment",
        "z": "139909a2.e2cae6",
        "name": "Permitir consultas, comandos y redirigir cuando no hay clics",
        "info": "",
        "x": 840,
        "y": 300,
        "wires": []
    },
    {
        "id": "1f73926e.f6568e",
        "type": "http request",
        "z": "139909a2.e2cae6",
        "name": "Cam6",
        "method": "GET",
        "ret": "bin",
        "paytoqs": "ignore",
        "url": "192.168.15.21/capture",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 2330,
        "y": 680,
        "wires": [
            [
                "d7a187a3.37dc48"
            ]
        ]
    },
    {
        "id": "d7a187a3.37dc48",
        "type": "file",
        "z": "139909a2.e2cae6",
        "name": "",
        "filename": "S:\\Captura\\sala2.jpg",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 2600,
        "y": 680,
        "wires": [
            []
        ]
    },
    {
        "id": "bd97beea.ce073",
        "type": "http request",
        "z": "139909a2.e2cae6",
        "name": "Cam5",
        "method": "GET",
        "ret": "bin",
        "paytoqs": "ignore",
        "url": "192.168.15.8/capture",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 2330,
        "y": 640,
        "wires": [
            [
                "d637ca9.fe38d38"
            ]
        ]
    },
    {
        "id": "cdb1554f.410108",
        "type": "http request",
        "z": "139909a2.e2cae6",
        "name": "Cam4",
        "method": "GET",
        "ret": "bin",
        "paytoqs": "ignore",
        "url": "192.168.15.7/capture",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 2330,
        "y": 600,
        "wires": [
            [
                "4849ef53.afafe"
            ]
        ]
    },
    {
        "id": "72d50e06.74e5f",
        "type": "http request",
        "z": "139909a2.e2cae6",
        "name": "Cam3",
        "method": "GET",
        "ret": "bin",
        "paytoqs": "ignore",
        "url": "192.168.15.23/capture",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 2330,
        "y": 560,
        "wires": [
            [
                "11af7134.802ecf"
            ]
        ]
    },
    {
        "id": "ff951881.e2a3a8",
        "type": "http request",
        "z": "139909a2.e2cae6",
        "name": "Cam2",
        "method": "GET",
        "ret": "bin",
        "paytoqs": "ignore",
        "url": "192.168.15.22/capture",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 2330,
        "y": 520,
        "wires": [
            [
                "f09d1216.618a7"
            ]
        ]
    },
    {
        "id": "834eb41c.9a7948",
        "type": "http request",
        "z": "139909a2.e2cae6",
        "name": "Cam1",
        "method": "GET",
        "ret": "bin",
        "paytoqs": "ignore",
        "url": "192.168.15.24/capture",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 2330,
        "y": 480,
        "wires": [
            [
                "78fac808.c9bae8"
            ]
        ]
    },
    {
        "id": "78fac808.c9bae8",
        "type": "file",
        "z": "139909a2.e2cae6",
        "name": "",
        "filename": "S:\\Captura\\desk2.jpg",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 2600,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "f09d1216.618a7",
        "type": "file",
        "z": "139909a2.e2cae6",
        "name": "",
        "filename": "S:\\Captura\\puerta2.jpg",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 2600,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "11af7134.802ecf",
        "type": "file",
        "z": "139909a2.e2cae6",
        "name": "",
        "filename": "S:\\Captura\\librero2.jpg",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 2600,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "4849ef53.afafe",
        "type": "file",
        "z": "139909a2.e2cae6",
        "name": "",
        "filename": "S:\\Captura\\mirilla2.jpg",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 2600,
        "y": 600,
        "wires": [
            []
        ]
    },
    {
        "id": "d637ca9.fe38d38",
        "type": "file",
        "z": "139909a2.e2cae6",
        "name": "",
        "filename": "S:\\Captura\\cocina2.jpg",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 2600,
        "y": 640,
        "wires": [
            []
        ]
    },
    {
        "id": "5ca242a2.5ea55c",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "if (msg.payload.content == \"/escritoriocam\") {\n    msg.filename = \"S:/Captura/desk1.jpg\";\n} else if (msg.payload.content == \"/puertacam\") {\n    msg.filename = \"S:/Captura/puerta1.jpg\"\n} else if (msg.payload.content == \"/librerocam\") {\n    msg.filename = \"S:/Captura/librero1.jpg\"\n} else if (msg.payload.content == \"/mirillacam\") {\n    msg.filename = \"S:/Captura/mirilla1.jpg\"\n} else if (msg.payload.content == \"/salacam\") {\n    msg.filename = \"S:/Captura/sala1.jpg\"\n} else if (msg.payload.content == \"/cocinacam\") {\n    msg.filename = \"S:/Captura/cocina1.jpg\"\n}\nmsg.payload2 = msg.payload;\n\nmsg.payload.sentMessageId = msg.originalMessage.chat.id;\nmsg.payload.content = \"Enviando fotos\";\nglobal.set (\"chances\", global.get (\"chances\")-1)\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1420,
        "y": 1100,
        "wires": [
            [
                "c1aa5c4e.052c",
                "35a3a7ce.42de38",
                "ac953597.3407d8"
            ]
        ]
    },
    {
        "id": "c1aa5c4e.052c",
        "type": "file in",
        "z": "139909a2.e2cae6",
        "name": "",
        "filename": "",
        "format": "",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "x": 1630,
        "y": 1100,
        "wires": [
            [
                "b6d5cfea.b3016"
            ]
        ]
    },
    {
        "id": "b6d5cfea.b3016",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "global.set (\"img0\", msg.payload);\nif (msg.payload2.content == \"/escritoriocam\") {\n    msg.filename = \"S:/Captura/desk2.jpg\";\n} else if (msg.payload2.content == \"/puertacam\") {\n    msg.filename = \"S:/Captura/puerta2.jpg\"\n} else if (msg.payload2.content == \"/librerocam\") {\n    msg.filename = \"S:/Captura/librero2.jpg\"\n} else if (msg.payload2.content == \"/mirillacam\") {\n    msg.filename = \"S:/Captura/mirilla2.jpg\"\n} else if (msg.payload2.content == \"/salacam\") {\n    msg.filename = \"S:/Captura/sala2.jpg\"\n} else if (msg.payload2.content == \"/cocinacam\") {\n    msg.filename = \"S:/Captura/cocina2.jpg\"\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1850,
        "y": 1100,
        "wires": [
            [
                "108db5b0.1f9e1a"
            ]
        ]
    },
    {
        "id": "108db5b0.1f9e1a",
        "type": "file in",
        "z": "139909a2.e2cae6",
        "name": "",
        "filename": "",
        "format": "",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "x": 2050,
        "y": 1100,
        "wires": [
            [
                "810e0c64.4122e"
            ]
        ]
    },
    {
        "id": "810e0c64.4122e",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "global.set (\"img1\", msg.payload);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2340,
        "y": 1100,
        "wires": [
            []
        ]
    },
    {
        "id": "d819823.105d28",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "\n\nmsg.payload = \"chances=\"+global.get(\"chances\")+\" color=\"+global.get(\"color\")+\" comando=\"+global.get(\"comando\")+\" falla=\"+global.get(\"falla\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2560,
        "y": 280,
        "wires": [
            [
                "879fe808.e94e68"
            ]
        ]
    },
    {
        "id": "879fe808.e94e68",
        "type": "ui_text",
        "z": "139909a2.e2cae6",
        "d": true,
        "group": "8feab182.895b9",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "text",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 2830,
        "y": 280,
        "wires": []
    },
    {
        "id": "8b758924.5ea558",
        "type": "comment",
        "z": "2e3f68c7.2f3ff",
        "name": "Indicador de clics disponibles",
        "info": "",
        "x": 2060,
        "y": 580,
        "wires": []
    },
    {
        "id": "70e04f6f.8a35",
        "type": "debug",
        "z": "5478817a.a9116",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 530,
        "y": 300,
        "wires": []
    },
    {
        "id": "81402b1.9a5a1d8",
        "type": "http in",
        "z": "5478817a.a9116",
        "name": "",
        "url": "/traccarevent",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 190,
        "y": 100,
        "wires": [
            [
                "70e04f6f.8a35",
                "79e40535.29d31c",
                "b056b987.ba0958",
                "5599cf1d.4bd79",
                "8f9884b7.34ba18",
                "1e9af46d.248e4c"
            ]
        ]
    },
    {
        "id": "79e40535.29d31c",
        "type": "http response",
        "z": "5478817a.a9116",
        "name": "",
        "statusCode": "200",
        "headers": {},
        "x": 540,
        "y": 100,
        "wires": []
    },
    {
        "id": "b056b987.ba0958",
        "type": "function",
        "z": "5478817a.a9116",
        "name": "Actualizar estados exitosos",
        "func": "if (msg.payload.event.type != \"deviceUnknown\" && msg.payload.event.type != \"deviceOnline\" ) {\n    global.set(\"locationevent\", msg.payload.event.type);\n    if (msg.payload.position.latitude < 19.4227417 + 0.00034 && msg.payload.position.latitude > 19.4227417 - 0.00034 && msg.payload.position.longitude < -99.1483259 + 0.00034 && msg.payload.position.longitude > -99.1483259 - 0.00034) {\n        global.set (\"location\", \"Casa\");\n    } else if (msg.payload.event.type == \"geofenceEnter\") {\n        global.set (\"location\", msg.payload.geofence.name);\n    } else if (msg.payload.event.type == \"geofenceExit\") {\n        global.set (\"location\", \"Afuera\");\n    }\n    return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 600,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "68ff88f9.c08638",
        "type": "inject",
        "z": "5478817a.a9116",
        "name": "every 10 minutes",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "600",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 190,
        "y": 360,
        "wires": [
            [
                "f98f1a91.4e8bb8"
            ]
        ]
    },
    {
        "id": "373b357d.13a5ca",
        "type": "debug",
        "z": "5478817a.a9116",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 810,
        "y": 360,
        "wires": []
    },
    {
        "id": "f98f1a91.4e8bb8",
        "type": "function",
        "z": "5478817a.a9116",
        "name": "",
        "func": "msg.event = global.get (\"locationevent\");\nmsg.geofence = global.get (\"location\");\nif (msg.event == \"geofenceEnter\") {\n    msg.payload = \"23 está en: \"+msg.geofence;\n} else if (msg.event == \"geofenceExit\") {\n    msg.payload = \"23 está afuera\";\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 360,
        "wires": [
            [
                "373b357d.13a5ca"
            ]
        ]
    },
    {
        "id": "3364dffc.57ab",
        "type": "exec",
        "z": "2e3f68c7.2f3ff",
        "command": "",
        "addpay": "payload",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 1370,
        "y": 3640,
        "wires": [
            [
                "95d56bb9.c0f5a8"
            ],
            [],
            []
        ]
    },
    {
        "id": "adac19d0.be4668",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "msg.payload = \"python S:\\\\DeepFace\\\\Code\\\\FaceDetector-f\\\\fdf.py -i \"+msg.filename;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1180,
        "y": 3640,
        "wires": [
            [
                "3364dffc.57ab"
            ]
        ]
    },
    {
        "id": "45d31bae.0356a4",
        "type": "json",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 1990,
        "y": 3640,
        "wires": [
            [
                "d05cd3cf.f27be",
                "ee130de6.a4176",
                "af11dc39.48de2",
                "28a9c8a.f00fe38"
            ]
        ]
    },
    {
        "id": "f9ca23bd.9a549",
        "type": "http response",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "statusCode": "205",
        "headers": {},
        "x": 940,
        "y": 3420,
        "wires": []
    },
    {
        "id": "249667ae.8f70e8",
        "type": "comment",
        "z": "2e3f68c7.2f3ff",
        "name": "Carga de fotos",
        "info": "",
        "x": 640,
        "y": 3360,
        "wires": []
    },
    {
        "id": "d05cd3cf.f27be",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "msg.payload2 = msg.payload;\nmsg.payload = \"Cara detectada\";\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2280,
        "y": 3760,
        "wires": [
            [
                "29a3351a.f28f6a"
            ]
        ]
    },
    {
        "id": "95d56bb9.c0f5a8",
        "type": "switch",
        "z": "2e3f68c7.2f3ff",
        "name": "rc.code",
        "property": "rc.code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1700,
        "y": 3640,
        "wires": [
            [
                "45d31bae.0356a4"
            ],
            [
                "49cc7104.28aa5"
            ]
        ]
    },
    {
        "id": "49cc7104.28aa5",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "msg.payload2 = msg.payload;\nmsg.payload = \"Cara no detectada. Este algoritmo no es compatible con lentes. Intenta de nuevo\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2000,
        "y": 3800,
        "wires": [
            [
                "29a3351a.f28f6a"
            ]
        ]
    },
    {
        "id": "b3dfe40c.a21a08",
        "type": "exec",
        "z": "139909a2.e2cae6",
        "command": "",
        "addpay": "payload",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 1630,
        "y": 1480,
        "wires": [
            [
                "3f94c86f.214c88"
            ],
            [],
            []
        ]
    },
    {
        "id": "e0efb4d8.3c7898",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "msg.payload = \"python S:\\\\DeepFace\\\\Code\\\\FaceDetector-f\\\\fdf.py -i \"+msg.filename;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1420,
        "y": 1480,
        "wires": [
            [
                "b3dfe40c.a21a08"
            ]
        ]
    },
    {
        "id": "72c6b95a.bcbae8",
        "type": "json",
        "z": "139909a2.e2cae6",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 2050,
        "y": 1480,
        "wires": [
            [
                "d7fbb48f.148668",
                "ed5f3c2e.5d224"
            ]
        ]
    },
    {
        "id": "3f94c86f.214c88",
        "type": "switch",
        "z": "139909a2.e2cae6",
        "name": "rc.code",
        "property": "rc.code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1840,
        "y": 1480,
        "wires": [
            [
                "72c6b95a.bcbae8"
            ],
            [
                "d3e9552c.6b8b68"
            ]
        ]
    },
    {
        "id": "d3e9552c.6b8b68",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "msg.payload = msg.payload2;\nmsg.payload.sentMessageId = msg.originalMessage.chat.id;\nmsg.payload.type = \"message\";\nmsg.payload.content = \"Cara no detectada. Este algoritmo no es compatible con lentes. Intenta de nuevo.\";\n\n//msg.payload2 = msg.payload;\n//msg.payload = \"Cara no detectada. Intenta de nuevo\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2340,
        "y": 1600,
        "wires": [
            [
                "2731880.4e7ee78"
            ]
        ]
    },
    {
        "id": "303fa4a6.4c426c",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "msg.payload.sentMessageId = msg.originalMessage.chat.id;\nmsg.payload.type = \"message\";\nmsg.payload.content = \"Analizando\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 680,
        "y": 660,
        "wires": [
            [
                "cafb003.2838"
            ]
        ]
    },
    {
        "id": "cafb003.2838",
        "type": "telegram sender",
        "z": "139909a2.e2cae6",
        "name": "",
        "bot": "da70a51bc78adb2a",
        "haserroroutput": false,
        "outputs": 1,
        "x": 910,
        "y": 660,
        "wires": [
            []
        ]
    },
    {
        "id": "233b119e.7f252e",
        "type": "ui_toast",
        "z": "2e3f68c7.2f3ff",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "",
        "name": "",
        "x": 1410,
        "y": 3700,
        "wires": []
    },
    {
        "id": "8ec5b978.bafa48",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "msg.payload = \"Analizando\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1180,
        "y": 3700,
        "wires": [
            [
                "233b119e.7f252e"
            ]
        ]
    },
    {
        "id": "29a3351a.f28f6a",
        "type": "ui_toast",
        "z": "2e3f68c7.2f3ff",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "",
        "name": "",
        "x": 2550,
        "y": 3800,
        "wires": []
    },
    {
        "id": "ee130de6.a4176",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "msg.topic=\"INSERT INTO selfiedashboard (filename, age, emotion, gender, race, angry, disgust, fear, happy, sad, surprise, neutral, asian, indian, black, white, middleeastern, latino) VALUES ('\"+global.get (\"nameset\")+\"','\"+msg.payload.angry.age+\"','\"+msg.payload.angry.dominant_emotion+\"','\"+msg.payload.angry.gender+\"','\"+msg.payload.angry.dominant_race+\"','\"+msg.payload.angry.emotion+\"','\"+msg.payload.disgust.emotion+\"','\"+msg.payload.fear.emotion+\"','\"+msg.payload.happy.emotion+\"','\"+msg.payload.sad.emotion+\"','\"+msg.payload.surprise.emotion+\"','\"+msg.payload.neutral.emotion+\"','\"+msg.payload.asian.race+\"','\"+msg.payload.indian.race+\"','\"+msg.payload.black.race+\"','\"+msg.payload.white.race+\"','\"+msg.payload[\"middle eastern\"].race+\"','\"+msg.payload[\"latino hispanic\"].race+\"')\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2280,
        "y": 3700,
        "wires": [
            [
                "3209ee76.0ec392"
            ]
        ]
    },
    {
        "id": "3209ee76.0ec392",
        "type": "mysql",
        "z": "2e3f68c7.2f3ff",
        "mydb": "1a27214b.e39c3f",
        "name": "",
        "x": 2550,
        "y": 3700,
        "wires": [
            []
        ]
    },
    {
        "id": "4a79d5a3.df9adc",
        "type": "ui_text",
        "z": "2e3f68c7.2f3ff",
        "group": "457235cd.67e71c",
        "order": 2,
        "width": 6,
        "height": 3,
        "name": "",
        "label": "Lo que sé sobre ti gracias a tu foto.",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "x": 2600,
        "y": 3640,
        "wires": []
    },
    {
        "id": "af11dc39.48de2",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "\n\nmsg.payload = \"Tienes aproximadamente \"+msg.payload.angry.age+\" años, tu genero es \"+msg.payload.angry.gender+\" tu grupo etnico es \"+msg.payload.angry.dominant_race+\" y tu estado de ánimo es \"+msg.payload.angry.dominant_emotion;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2280,
        "y": 3640,
        "wires": [
            [
                "4a79d5a3.df9adc"
            ]
        ]
    },
    {
        "id": "d7fbb48f.148668",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "msg.topic=\"INSERT INTO selfiedashboard (filename, age, emotion, gender, race, angry, disgust, fear, happy, sad, surprise, neutral, asian, indian, black, white, middleeastern, latino) VALUES ('\"+global.get (\"nameset\")+\"','\"+msg.payload.angry.age+\"','\"+msg.payload.angry.dominant_emotion+\"','\"+msg.payload.angry.gender+\"','\"+msg.payload.angry.dominant_race+\"','\"+msg.payload.angry.emotion+\"','\"+msg.payload.disgust.emotion+\"','\"+msg.payload.fear.emotion+\"','\"+msg.payload.happy.emotion+\"','\"+msg.payload.sad.emotion+\"','\"+msg.payload.surprise.emotion+\"','\"+msg.payload.neutral.emotion+\"','\"+msg.payload.asian.race+\"','\"+msg.payload.indian.race+\"','\"+msg.payload.black.race+\"','\"+msg.payload.white.race+\"','\"+msg.payload[\"middle eastern\"].race+\"','\"+msg.payload[\"latino hispanic\"].race+\"')\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2340,
        "y": 1660,
        "wires": [
            [
                "a53b1c6a.cf0f6"
            ]
        ]
    },
    {
        "id": "a53b1c6a.cf0f6",
        "type": "mysql",
        "z": "139909a2.e2cae6",
        "mydb": "1a27214b.e39c3f",
        "name": "",
        "x": 2590,
        "y": 1660,
        "wires": [
            []
        ]
    },
    {
        "id": "6d901239.51e5cc",
        "type": "delay",
        "z": "139909a2.e2cae6",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 2340,
        "y": 1160,
        "wires": [
            [
                "a4399293.bbbb68"
            ]
        ]
    },
    {
        "id": "6c8952e0.e30c8c",
        "type": "json",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "property": "payload",
        "action": "obj",
        "pretty": false,
        "x": 410,
        "y": 1180,
        "wires": [
            [
                "894ae1ef.b4114",
                "f628a7d1.ee7868",
                "40c9cee7.836be"
            ]
        ]
    },
    {
        "id": "91915460.f78208",
        "type": "mqtt in",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "topic": "hugo/se/sala",
        "qos": "0",
        "datatype": "auto",
        "broker": "4c35078.987c1f8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "x": 130,
        "y": 1180,
        "wires": [
            [
                "6c8952e0.e30c8c"
            ]
        ]
    },
    {
        "id": "894ae1ef.b4114",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "var longitud = msg.payload.predictions.length;\nif (longitud == 1) {\n    global.set (\"confidenceE\", msg.payload.predictions[0].confidence);\n    if (msg.payload.predictions[0].userid == \"Hugo\") {\n        msg.payload = \"23\";\n        global.set (\"personadetectadaE\", \"23\");\n        global.set (\"onRecordE\", 1);\n        global.set (\"onRecordW\", 0);\n        global.set (\"confidenceW\", 0);\n        global.set (\"numberPeople\", 0);\n        global.set (\"isAwaken\", 1);\n        global.set (\"isAwakenCount\", global.get (\"isAwakenCount\") + 10);\n        global.set (\"autoOff\", 0);\n        return msg;\n    }\n} else {\n    var newUser = 0;\n    var userList = \"\";\n    for (var i = 0; i < longitud; i++) {\n        if (msg.payload.predictions[i].userid == \"Hugo\") {\n            global.set (\"personadetectadaE\",\"23\");\n            global.set (\"confidenceE\", msg.payload.predictions[i].confidence);\n            global.set (\"onRecordE\", 1);\n            global.set (\"onRecordW\", 0);\n            global.set (\"confidenceW\", 0);\n            global.set (\"isAwaken\", 1);\n            global.set (\"isAwakenCount\", global.get (\"isAwakenCount\") + 10);\n            global.set (\"autoOff\", 0);\n            userList = userList + \"23\" + \", \"; \n        } else if (msg.payload.predictions[i].userid == \"unknown\"){\n            newUser ++;\n            userList = userList + \"Desconocido\" + \", \";\n        } else {\n            userList = userList + msg.payload.predictions[i].userid + \", \";\n        }\n    }\n    msg.payload = userList;\n    global.set (\"numberPeople\", newUser);\n    return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 720,
        "y": 1180,
        "wires": [
            [
                "9c632d11.72577",
                "8d29c165.3452a",
                "ad1a997d.808768"
            ]
        ]
    },
    {
        "id": "57458d7d.4d7cb4",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "Get Confidence E",
        "func": "if (global.get (\"confidenceE\") > 0 ) {\n    msg.payload = global.get (\"confidenceE\") * 100;\n    msg.topic = global.get (\"personadetectadaE\");\nreturn msg;\n} else if (global.get (\"confidenceW\") > 0 ) {\n    msg.payload = global.get (\"confidenceW\") * 100;\n    msg.topic = global.get (\"personadetectadaW\");\nreturn msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 450,
        "y": 220,
        "wires": [
            [
                "62d7f239.ab755c",
                "8bf56408.aa2ec8"
            ]
        ]
    },
    {
        "id": "5599cf1d.4bd79",
        "type": "function",
        "z": "5478817a.a9116",
        "name": "Localizar en casa",
        "func": "if (msg.payload.event.type == \"deviceUnknown\" || msg.event == \"deviceOnline\") {\n    global.set(\"locationevent\", msg.payload.event.type);\n    if (msg.payload.position.latitude < 19.4227417 + 0.00034 && msg.payload.position.latitude > 19.4227417 - 0.00034 && msg.payload.position.longitude < -99.1483259 + 0.00034 && msg.payload.position.longitude > -99.1483259 - 0.00034) {\n        global.set (\"location\", \"Casa\");\n    } else if (msg.payload.event.type == \"geofenceEnter\") {\n        global.set (\"location\", msg.payload.geofence.name);\n    } else if (msg.payload.event.type == \"geofenceExit\") {\n        global.set (\"location\", \"Afuera\");\n    }\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 570,
        "y": 180,
        "wires": [
            [
                "845ab348.4f25"
            ]
        ]
    },
    {
        "id": "845ab348.4f25",
        "type": "link out",
        "z": "5478817a.a9116",
        "name": "GPS desconectado",
        "links": [
            "aa352353.f8181",
            "6828a9ca.94a2d8"
        ],
        "x": 775,
        "y": 180,
        "wires": []
    },
    {
        "id": "84fba33e.7bd62",
        "type": "comment",
        "z": "c2c0e0c1.0deb1",
        "name": "Detectar a 23 en sala",
        "info": "",
        "x": 160,
        "y": 1140,
        "wires": []
    },
    {
        "id": "ff5aa935.d87fd8",
        "type": "mqtt in",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "topic": "hugo/se/backdoor",
        "qos": "0",
        "datatype": "utf8",
        "broker": "4c35078.987c1f8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "x": 270,
        "y": 180,
        "wires": [
            [
                "a6649275.44524"
            ]
        ]
    },
    {
        "id": "996b916e.c04b7",
        "type": "debug",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 750,
        "y": 320,
        "wires": []
    },
    {
        "id": "c40f4cff.26842",
        "type": "function",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "func": "if (msg.payload2.predictions[0].confidence > 0.60) {\n    global.set (\"doorDetect\", msg.payload2.predictions[0].userid);\n}\n\nif (msg.payload2.predictions[0].userid == \"Hugo\" && msg.payload2.predictions[0].confidence > 0.60 && global.get(\"location\") == \"Casa\") {\n    //msg.payload = \"Hasta luego, \"+msg.payload.predictions[0].userid;\n    global.set (\"doorDetect\", \"23\");\n    msg.payload = \"Hasta luego, 23\";\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1180,
        "y": 380,
        "wires": [
            [
                "d5965e16.edb96",
                "b11b614d.699f8",
                "24d67bb1.6fc574"
            ]
        ]
    },
    {
        "id": "1cb36b18.1d8fe5",
        "type": "mqtt in",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "topic": "hugo/se/puerta",
        "qos": "0",
        "datatype": "utf8",
        "broker": "4c35078.987c1f8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "x": 260,
        "y": 460,
        "wires": [
            [
                "f6e0a282.cd471"
            ]
        ]
    },
    {
        "id": "a6649275.44524",
        "type": "json",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 510,
        "y": 180,
        "wires": [
            [
                "996b916e.c04b7",
                "f1fc0744.409188"
            ]
        ]
    },
    {
        "id": "f6e0a282.cd471",
        "type": "json",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 510,
        "y": 460,
        "wires": [
            [
                "996b916e.c04b7",
                "2da19f75.bf95b"
            ]
        ]
    },
    {
        "id": "57bddcb3.d77654",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get (\"existentfilename\") == 0 && global.get (\"existentsize\") == 0) {\n    msg.topic=\"INSERT INTO selfieregister (filename, filesize) VALUES ('\"+msg.req.files[0].originalname+\"','\"+msg.req.files[0].size+\"')\";\n    return msg;\n} else {\n    msg.payload = \"Ya existe ese archivo, prueba de nuevo.\";\n    msg.topic=\"repetido\";\n    return msg;\n}\n//msg.topic=\"SELECT uid FROM rfid WHERE filename ='\"+req.files[0].originalname+\"'\";\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1700,
        "y": 3460,
        "wires": [
            [
                "5be8ee0c.c4dda",
                "b2f84e6b.acdee"
            ]
        ]
    },
    {
        "id": "f9f8a58c.583938",
        "type": "mysql",
        "z": "2e3f68c7.2f3ff",
        "mydb": "1a27214b.e39c3f",
        "name": "",
        "x": 2290,
        "y": 3520,
        "wires": [
            [
                "e0c6f6eb.2c08c8"
            ]
        ]
    },
    {
        "id": "c5951628.5c4598",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "msg.topic=\"SELECT id FROM selfieregister WHERE filename ='\"+msg.req.files[0].originalname+\"'\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 3460,
        "wires": [
            [
                "6a7522b.61917dc"
            ]
        ]
    },
    {
        "id": "6a7522b.61917dc",
        "type": "mysql",
        "z": "2e3f68c7.2f3ff",
        "mydb": "1a27214b.e39c3f",
        "name": "",
        "x": 1210,
        "y": 3460,
        "wires": [
            [
                "7a54555b.3d913c"
            ]
        ]
    },
    {
        "id": "434392bf.517b1c",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "msg.topic=\"SELECT id FROM selfieregister WHERE filesize ='\"+msg.req.files[0].size+\"'\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 3520,
        "wires": [
            [
                "3933ebf3.842d14"
            ]
        ]
    },
    {
        "id": "3933ebf3.842d14",
        "type": "mysql",
        "z": "2e3f68c7.2f3ff",
        "mydb": "1a27214b.e39c3f",
        "name": "",
        "x": 1210,
        "y": 3520,
        "wires": [
            [
                "1d605feb.f29d1"
            ]
        ]
    },
    {
        "id": "7a54555b.3d913c",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (msg.payload == \"\") {\n    global.set (\"existentfilename\", 0);\n} else if (msg.payload[0].id > 0) {\n    global.set (\"existentfilename\", 1);\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1380,
        "y": 3460,
        "wires": [
            [
                "57bddcb3.d77654"
            ]
        ]
    },
    {
        "id": "1d605feb.f29d1",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (msg.payload == \"\") {\n    global.set (\"existentsize\", 0);\n} else if (msg.payload[0].id > 0) {\n    global.set (\"existentsize\", 1);\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1380,
        "y": 3520,
        "wires": [
            [
                "57bddcb3.d77654"
            ]
        ]
    },
    {
        "id": "69b7c747.e7ddc8",
        "type": "ui_toast",
        "z": "2e3f68c7.2f3ff",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "",
        "name": "",
        "x": 2290,
        "y": 3460,
        "wires": []
    },
    {
        "id": "5be8ee0c.c4dda",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (msg.topic == \"repetido\") {\n    msg.topic = \"\";\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2000,
        "y": 3460,
        "wires": [
            [
                "69b7c747.e7ddc8"
            ]
        ]
    },
    {
        "id": "b2f84e6b.acdee",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (msg.topic != \"repetido\") {\n    return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2000,
        "y": 3520,
        "wires": [
            [
                "f9f8a58c.583938"
            ]
        ]
    },
    {
        "id": "4eb7e904.e78ad8",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "if (global.get (\"existentfilename\") == 0 && global.get (\"existentsize\") == 0) {\n    msg.topic=\"INSERT INTO selfieregister (filename, filesize) VALUES ('\"+msg.payload2.content+\"','\"+msg.originalMessage.photo[msg.topic2-1].file_size+\"')\";\n    return msg;\n} else {\n    msg.payload = \"Ya existe ese archivo, prueba de nuevo.\";\n    msg.topic=\"repetido\";\n    return msg;\n}\n//msg.topic=\"SELECT uid FROM rfid WHERE filename ='\"+req.files[0].originalname+\"'\";\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1840,
        "y": 1280,
        "wires": [
            [
                "6297e878.2bef38",
                "eb4910ce.b8ac1"
            ]
        ]
    },
    {
        "id": "ac6e5794.b68438",
        "type": "mysql",
        "z": "139909a2.e2cae6",
        "mydb": "1a27214b.e39c3f",
        "name": "",
        "x": 2370,
        "y": 1280,
        "wires": [
            [
                "694f21ec.36f7c8"
            ]
        ]
    },
    {
        "id": "923f68e2.3b0ef8",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "msg.topic=\"SELECT id FROM selfieregister WHERE filename ='\"+msg.payload.content+\"'\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 880,
        "y": 1280,
        "wires": [
            [
                "86590d70.8a01"
            ]
        ]
    },
    {
        "id": "86590d70.8a01",
        "type": "mysql",
        "z": "139909a2.e2cae6",
        "mydb": "1a27214b.e39c3f",
        "name": "",
        "x": 1070,
        "y": 1280,
        "wires": [
            [
                "4627ecc5.15d2c4"
            ]
        ]
    },
    {
        "id": "72a924ce.2bed6c",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "msg.topic=\"SELECT id FROM selfieregister WHERE filesize = '\"+msg.payload.photos[msg.topic2-1].file_size+\"'\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 880,
        "y": 1340,
        "wires": [
            [
                "56a32745.504608"
            ]
        ]
    },
    {
        "id": "56a32745.504608",
        "type": "mysql",
        "z": "139909a2.e2cae6",
        "mydb": "1a27214b.e39c3f",
        "name": "",
        "x": 1070,
        "y": 1340,
        "wires": [
            [
                "b7dfc34e.fe217"
            ]
        ]
    },
    {
        "id": "4627ecc5.15d2c4",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "if (msg.payload == \"\") {\n    global.set (\"existentfilename\", 0);\n} else if (msg.payload[0].id > 0) {\n    global.set (\"existentfilename\", 1);\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1420,
        "y": 1280,
        "wires": [
            [
                "dc0101b6.16d93"
            ]
        ]
    },
    {
        "id": "b7dfc34e.fe217",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "if (msg.payload == \"\") {\n    global.set (\"existentsize\", 0);\n} else if (msg.payload[0].id > 0) {\n    global.set (\"existentsize\", 1);\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1420,
        "y": 1340,
        "wires": [
            []
        ]
    },
    {
        "id": "6297e878.2bef38",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "if (msg.topic == \"repetido\") {\n    msg.payload = msg.payload2;\n    msg.payload.sentMessageId = msg.originalMessage.chat.id;\n    msg.payload.type = \"message\";\n    msg.payload.content = \"Ese archivo ya existe, intenta de nuevo.\";\n    return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2060,
        "y": 1340,
        "wires": [
            [
                "2731880.4e7ee78"
            ]
        ]
    },
    {
        "id": "eb4910ce.b8ac1",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "if (msg.topic != \"repetido\") {\n    return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2060,
        "y": 1280,
        "wires": [
            [
                "ac6e5794.b68438"
            ]
        ]
    },
    {
        "id": "482f8931.1dea58",
        "type": "function",
        "z": "139909a2.e2cae6",
        "name": "",
        "func": "msg.topic2 = msg.payload.photos.length;\nmsg.payload2 = msg.payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 680,
        "y": 1280,
        "wires": [
            [
                "923f68e2.3b0ef8",
                "72a924ce.2bed6c"
            ]
        ]
    },
    {
        "id": "dc0101b6.16d93",
        "type": "delay",
        "z": "139909a2.e2cae6",
        "name": "",
        "pauseType": "delay",
        "timeout": "0.5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1650,
        "y": 1280,
        "wires": [
            [
                "4eb7e904.e78ad8"
            ]
        ]
    },
    {
        "id": "6adf4934.32c0b8",
        "type": "debug",
        "z": "139909a2.e2cae6",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 670,
        "y": 460,
        "wires": []
    },
    {
        "id": "817e01b3.66606",
        "type": "comment",
        "z": "139909a2.e2cae6",
        "name": "Comprobar archivo existente",
        "info": "",
        "x": 740,
        "y": 1220,
        "wires": []
    },
    {
        "id": "1019bac3.ff7535",
        "type": "comment",
        "z": "139909a2.e2cae6",
        "name": "Guardar foto no existente",
        "info": "",
        "x": 730,
        "y": 1420,
        "wires": []
    },
    {
        "id": "1826e665.f9f7ba",
        "type": "comment",
        "z": "5478817a.a9116",
        "name": "Obtener eventos",
        "info": "",
        "x": 180,
        "y": 40,
        "wires": []
    },
    {
        "id": "28a9c8a.f00fe38",
        "type": "switch",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "property": "payload.angry.dominant_emotion",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "happy",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "surprise",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "sad",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "neutral",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "fear",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "disgust",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "angry",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 7,
        "x": 590,
        "y": 3980,
        "wires": [
            [
                "fb865776.b31098"
            ],
            [
                "e3b381d3.7f9b5"
            ],
            [
                "e1a5159.d1a8de8"
            ],
            [
                "30fa7dbb.76bd42"
            ],
            [
                "dddbe1c6.99c8d"
            ],
            [
                "29aca989.f0d9f6"
            ],
            [
                "57f29e3.0ab806"
            ]
        ]
    },
    {
        "id": "fb865776.b31098",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "var add = parseInt (msg.payload.happy.emotion / 10);\nglobal.set (\"chances\", 7 + add);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 3940,
        "wires": [
            [
                "3be94514.e1e62a"
            ]
        ]
    },
    {
        "id": "e3b381d3.7f9b5",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "var add = parseInt (msg.payload.surprise.emotion / 10);\nglobal.set (\"chances\", 6 + add);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 3980,
        "wires": [
            [
                "3be94514.e1e62a"
            ]
        ]
    },
    {
        "id": "e1a5159.d1a8de8",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "var add = parseInt (msg.payload.sad.emotion / 10);\nglobal.set (\"chances\", 5 + add);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 4020,
        "wires": [
            [
                "3be94514.e1e62a"
            ]
        ]
    },
    {
        "id": "30fa7dbb.76bd42",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "var add = parseInt (msg.payload.neutral.emotion / 10);\nglobal.set (\"chances\",4 + add);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 4060,
        "wires": [
            [
                "3be94514.e1e62a"
            ]
        ]
    },
    {
        "id": "dddbe1c6.99c8d",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "var add = parseInt (msg.payload.fear.emotion / 10);\nglobal.set (\"chances\", 3 + add);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 4100,
        "wires": [
            [
                "3be94514.e1e62a"
            ]
        ]
    },
    {
        "id": "29aca989.f0d9f6",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "var add = parseInt (msg.payload.disgust.emotion / 10);\nglobal.set (\"chances\", 2 + add);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 4140,
        "wires": [
            [
                "3be94514.e1e62a"
            ]
        ]
    },
    {
        "id": "57f29e3.0ab806",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "var add = parseInt (msg.payload.angry.emotion / 10);\nglobal.set (\"chances\", 1 + add);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 4180,
        "wires": [
            [
                "3be94514.e1e62a"
            ]
        ]
    },
    {
        "id": "3be94514.e1e62a",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (msg.payload.angry.gender == \"Man\") {\n    global.set (\"chances\", parseInt(global.get(\"chances\") /3));\n} else {\n    global.set (\"chances\", parseInt(global.get(\"chances\") /4));\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1180,
        "y": 3940,
        "wires": [
            [
                "1a9a66f0.059209"
            ]
        ]
    },
    {
        "id": "1a9a66f0.059209",
        "type": "switch",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "property": "payload.angry.dominant_race",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "white",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "black",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "latino hispanic",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "indian",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "asian",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "middle eastern",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 6,
        "x": 1370,
        "y": 3980,
        "wires": [
            [
                "c75a3033.3b4d8"
            ],
            [
                "2c9f796f.647026"
            ],
            [
                "2da8f8d2.e7f938"
            ],
            [
                "f82f83f2.37d63"
            ],
            [
                "509c450a.e60d5c"
            ],
            [
                "1b3f6167.fea83f"
            ]
        ]
    },
    {
        "id": "c75a3033.3b4d8",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "global.set (\"chances\", global.get (\"chances\") + 2);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1700,
        "y": 3960,
        "wires": [
            [
                "69487f3.5fb918"
            ]
        ]
    },
    {
        "id": "2c9f796f.647026",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "global.set (\"chances\", global.get (\"chances\") + 1);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1700,
        "y": 4000,
        "wires": [
            [
                "69487f3.5fb918"
            ]
        ]
    },
    {
        "id": "2da8f8d2.e7f938",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "global.set (\"chances\", global.get (\"chances\") - 2);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1700,
        "y": 4040,
        "wires": [
            [
                "69487f3.5fb918"
            ]
        ]
    },
    {
        "id": "f82f83f2.37d63",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "global.set (\"chances\", global.get (\"chances\") - 2);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1700,
        "y": 4080,
        "wires": [
            [
                "69487f3.5fb918"
            ]
        ]
    },
    {
        "id": "509c450a.e60d5c",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "global.set (\"chances\", global.get (\"chances\") -3);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1700,
        "y": 4120,
        "wires": [
            [
                "69487f3.5fb918"
            ]
        ]
    },
    {
        "id": "1b3f6167.fea83f",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "global.set (\"chances\", global.get (\"chances\") -4);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1700,
        "y": 4160,
        "wires": [
            [
                "69487f3.5fb918"
            ]
        ]
    },
    {
        "id": "ed5f3c2e.5d224",
        "type": "link out",
        "z": "139909a2.e2cae6",
        "name": "request chances",
        "links": [
            "1866ea2d.dedda6"
        ],
        "x": 2295,
        "y": 1480,
        "wires": []
    },
    {
        "id": "aef06303.e87fb",
        "type": "link in",
        "z": "139909a2.e2cae6",
        "name": "deliver chances",
        "links": [
            "3a8d6d62.96e572"
        ],
        "x": 2015,
        "y": 1540,
        "wires": [
            [
                "750d973e.70f098"
            ]
        ]
    },
    {
        "id": "1866ea2d.dedda6",
        "type": "link in",
        "z": "2e3f68c7.2f3ff",
        "name": "request chances to",
        "links": [
            "ed5f3c2e.5d224"
        ],
        "x": 415,
        "y": 3940,
        "wires": [
            [
                "28a9c8a.f00fe38"
            ]
        ]
    },
    {
        "id": "69487f3.5fb918",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (msg.payload2.type = \"photo\"){\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2000,
        "y": 3960,
        "wires": [
            [
                "3a8d6d62.96e572"
            ]
        ]
    },
    {
        "id": "3a8d6d62.96e572",
        "type": "link out",
        "z": "2e3f68c7.2f3ff",
        "name": "respond chances",
        "links": [
            "aef06303.e87fb"
        ],
        "x": 2235,
        "y": 3960,
        "wires": []
    },
    {
        "id": "82925fe6.d83f",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "if (global.get (\"location\") == \"Casa\" && global.get (\"isAwaken\") == 1 && global.get (\"timeNow\") > global.get (\"meds\") && global.get (\"medstaken\") == 0) {\n    msg.payload = \"23, hora de tomar tus medicinas. 10 miligramos de hidroxicina y 10 miligramos de fluoxetina\";\n    global.set (\"medstaken\", 1);\n    global.set (\"snoozemeds\", global.get (\"timeNow\")+ global.get(\"snoozemedstime\"));\n    msg.topic = global.get (\"weekday\")+\",\"+\"1\";\n    return msg;\n}\nif (global.get (\"location\") == \"Casa\" && global.get (\"isAwaken\") == 1 && global.get (\"medstaken\") == \"1\" && global.get (\"timeNow\") > global.get (\"snoozemeds\")) {\n    msg.payload = \"23, te recuerdo que es hora de tomar tus medicinas. 10 miligramos de hidroxicina y 10 miligramos de fluoxetina\";\n    global.set (\"snoozemeds\", global.get (\"timeNow\")+ global.get(\"snoozemedstime\"));\n    global.set (\"medstaken\", 1);\n    msg.topic = global.get (\"weekday\")+\",\"+\"1\";\n    return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 140,
        "wires": [
            [
                "55536720.9e4b28",
                "5cb33803.1ce028"
            ]
        ]
    },
    {
        "id": "fb7b0fff.b153a",
        "type": "ui_text_input",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "label": "Selecciona aquí la hora",
        "tooltip": "Selecciona aquí la hora",
        "group": "2d6ab607.03dbb2",
        "order": 2,
        "width": 6,
        "height": 1,
        "passthru": true,
        "mode": "time",
        "delay": 300,
        "topic": "payload",
        "topicType": "msg",
        "x": 670,
        "y": 2380,
        "wires": [
            [
                "cd7066b1.a25d58"
            ]
        ]
    },
    {
        "id": "812d5c30.9cf76",
        "type": "ui_text",
        "z": "2e3f68c7.2f3ff",
        "group": "2d6ab607.03dbb2",
        "order": 1,
        "width": 6,
        "height": 3,
        "name": "",
        "label": "Cambia la hora a la que \"23\" toma sus medicamentos. Este comando sólo funciona una vez al día y requiere 5 clics. El el cambio sólo se aceptará si se encuentra entre las 10 y las 18h.",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "x": 1490,
        "y": 2340,
        "wires": []
    },
    {
        "id": "e54688bc.db1ef8",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get (\"timeNow\") > global.get (\"meds\")){\n    msg.payload = \"23 tomo sus medicamentos a las \" + global.get(\"meds_datetime\");\n} else {\n    msg.payload = \"23 tomará sus medicamentos a las \" + global.get(\"meds_datetime\");\n}\n\nif (global.get (\"newmeds_i\") == 1 || global.get (\"timeNow\") > parseInt(global.get (\"endofmeds\")) ||  global.get (\"timeNow\") > global.get (\"meds\")){\n    msg.payload = msg.payload +\". Hoy ya no puedes usar este comando\";\n} else {\n    msg.payload = msg.payload +\". Aún puedes usar este comando\";\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 620,
        "y": 2340,
        "wires": [
            [
                "812d5c30.9cf76"
            ]
        ]
    },
    {
        "id": "3bad8409.f2a71c",
        "type": "link out",
        "z": "2e3f68c7.2f3ff",
        "name": "Send-1-second",
        "links": [
            "62fc2c01.920294",
            "d1801290.4622e",
            "81134c17.0018c"
        ],
        "x": 2215,
        "y": 840,
        "wires": []
    },
    {
        "id": "62fc2c01.920294",
        "type": "link in",
        "z": "2e3f68c7.2f3ff",
        "name": "otros-textos-r",
        "links": [
            "3bad8409.f2a71c"
        ],
        "x": 495,
        "y": 2340,
        "wires": [
            [
                "e54688bc.db1ef8"
            ]
        ]
    },
    {
        "id": "cd7066b1.a25d58",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get (\"newmeds_i\", 1) == 0) {\n    global.set (\"newmeds\", msg.payload);\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 2380,
        "wires": [
            []
        ]
    },
    {
        "id": "ed6a68ad.455df8",
        "type": "ui_button",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "group": "2d6ab607.03dbb2",
        "order": 3,
        "width": 6,
        "height": 1,
        "passthru": false,
        "label": "Cambiar la hora de los medicamentos",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 710,
        "y": 2560,
        "wires": [
            [
                "b3dc9b2b.0e3008"
            ]
        ]
    },
    {
        "id": "b3dc9b2b.0e3008",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get (\"chances\")>= 5 && global.get (\"newmeds_i\") == 0){\n    global.set (\"onclic\", 1);\n    global.set (\"newmeds_i\", 1);\n    global.set (\"chances\" , global.get(\"chances\") - 5);\n    if (global.get (\"timeNow\") < global.get (\"newmeds\") + global.get (\"midnight\") && global.get (\"newmeds\") + global.get (\"midnight\") < global.get (\"endofmeds\") ) {\n        global.set (\"meds\", parseInt(global.get (\"newmeds\") + global.get (\"midnight\")));\n        date = new Date (global.get (\"meds\"));\n        var h = date.getHours();\n        if (h <= 9) {\n            h = \"0\"+h;\n        }\n        var m = date.getMinutes();\n        if (m <= 9) {\n           m = \"0\"+m;\n        }\n        global.set (\"meds_datetime\", h+\":\"+m);\n        msg.payload = \"Ahora 23 tomará sus medicinas a las \"+global.get (\"meds_datetime\");\n        msg.topic = \"Se ha cambiado la hora a la que se toman los medicamentos, el día de hoy será a las \" + h + \" horas con \" + m + \" minutos.\";\n    } else {\n    msg.payload = \"La hora configurada es incorrecta, intenta mañana\";\n    }\n} else {\n    msg.payload = \"\";\n    if ( global.get (\"chances\") < 5) {\n        msg.payload =msg.payload + \"No tienes suficientes clics.\";\n    }\n    if (global.get (\"newmeds_i\") == 1) {\n        msg.payload =msg.payload + \"Esta acción ya no está disponible hoy\";\n    }\n    \n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 2560,
        "wires": [
            [
                "ac2321b4.592d2"
            ]
        ]
    },
    {
        "id": "ca511e32.adb87",
        "type": "ui_toast",
        "z": "2e3f68c7.2f3ff",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "",
        "name": "",
        "x": 1410,
        "y": 2600,
        "wires": []
    },
    {
        "id": "ac2321b4.592d2",
        "type": "delay",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1180,
        "y": 2560,
        "wires": [
            [
                "ca511e32.adb87",
                "7c898f1f.a51ba"
            ]
        ]
    },
    {
        "id": "255d03b2.52e81c",
        "type": "comment",
        "z": "66ae481f.c36c48",
        "name": "Medicamentos - Snooze",
        "info": "",
        "x": 290,
        "y": 80,
        "wires": []
    },
    {
        "id": "4c6732fb.37e66c",
        "type": "mqtt in",
        "z": "66ae481f.c36c48",
        "name": "",
        "topic": "hugo/se/medstaken",
        "qos": "2",
        "datatype": "auto",
        "broker": "4c35078.987c1f8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "x": 270,
        "y": 280,
        "wires": [
            [
                "c46bcf4e.d1ca",
                "f7a7bde0.05628"
            ]
        ]
    },
    {
        "id": "67f491c.b51be7",
        "type": "mqtt in",
        "z": "66ae481f.c36c48",
        "name": "",
        "topic": "hugo/se/promomeds",
        "qos": "2",
        "datatype": "auto",
        "broker": "4c35078.987c1f8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "x": 270,
        "y": 400,
        "wires": [
            [
                "3f1ac0f1.80726",
                "ba85a1c4.04d19"
            ]
        ]
    },
    {
        "id": "c46bcf4e.d1ca",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "if (msg.payload == 200) {\n    global.set (\"medstaken\",2);\n    msg.payload = \"23, gracias por tomar tus medicinas. Es lindo saber que seguiras vivo un día mas\"\n    return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 280,
        "wires": [
            [
                "299f5538.c3689a",
                "617ee50.2d0f21c"
            ]
        ]
    },
    {
        "id": "72ed0cc0.a286b4",
        "type": "mqtt out",
        "z": "66ae481f.c36c48",
        "name": "",
        "topic": "hugo/se/medsrequest",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "4c35078.987c1f8",
        "x": 1100,
        "y": 180,
        "wires": []
    },
    {
        "id": "55536720.9e4b28",
        "type": "change",
        "z": "66ae481f.c36c48",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "topic",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 820,
        "y": 180,
        "wires": [
            [
                "72ed0cc0.a286b4"
            ]
        ]
    },
    {
        "id": "6d3fbab3.7b4d74",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "200",
        "payloadType": "num",
        "x": 250,
        "y": 340,
        "wires": [
            [
                "c46bcf4e.d1ca"
            ]
        ]
    },
    {
        "id": "8e1212b5.17d7c",
        "type": "ui_button",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "group": "2d6ab607.03dbb2",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Tomar medicamento promocional",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 700,
        "y": 2440,
        "wires": [
            [
                "94207083.8dc1d",
                "67b34e1a.43fec"
            ]
        ]
    },
    {
        "id": "94207083.8dc1d",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>=5 && global.get (\"promomeds_i\") == 0) {\n    global.set (\"chances\", global.get(\"chances\")-5);\n    global.set (\"promomeds_i\", 1);\n    global.set (\"onclic\", 1);\n    global.set (\"snoozemedspromo\", global.get (\"timeNow\")+ 60000);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 2440,
        "wires": [
            [
                "9b44c4dc.3cb1d8"
            ]
        ]
    },
    {
        "id": "7c898f1f.a51ba",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "topic",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1400,
        "y": 2560,
        "wires": [
            [
                "fbf9201f.a8762"
            ]
        ]
    },
    {
        "id": "9b44c4dc.3cb1d8",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "23, es momento de tomar el medicamento promocional, le hará bien a tu digestión",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1400,
        "y": 2440,
        "wires": [
            [
                "fbf9201f.a8762"
            ]
        ]
    },
    {
        "id": "55a957d6.75dc88",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "if (global.get (\"location\") == \"Casa\" && global.get (\"isAwaken\") == 1 && global.get(\"promomeds_i\") == 1 && global.get (\"timeNow\") > global.get (\"snoozemedspromo\")) {\n    msg.payload = \"23, te recuerdo que debes tomar el medicamento promocional. Le hará bien a tu digestión.\";\n    msg.topic = global.get (\"weekday\")+\",\"+\"2\";\n    global.set (\"snoozemedspromo\", global.get (\"timeNow\")+ 60000);\n    global.set (\"promomeds_i\", 1);\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 180,
        "wires": [
            [
                "55536720.9e4b28",
                "5cb33803.1ce028"
            ]
        ]
    },
    {
        "id": "9834a43b.d21318",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "200",
        "payloadType": "num",
        "x": 250,
        "y": 460,
        "wires": [
            [
                "3f1ac0f1.80726",
                "ba85a1c4.04d19"
            ]
        ]
    },
    {
        "id": "3f1ac0f1.80726",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "if (msg.payload == 200) {\n    global.set (\"promomeds_i\",2);\n    if (global.get (\"doorRequest\") == 0) {\n        msg.payload = \"23, gracias por tomar los medicamentos promocionales. Nuestros patrocinadores están complacidos\";\n        return msg;\n    }\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 400,
        "wires": [
            [
                "299f5538.c3689a",
                "f1e5068e.e5de28"
            ]
        ]
    },
    {
        "id": "f766d0b8.742dc",
        "type": "comment",
        "z": "66ae481f.c36c48",
        "name": "Retro de pastillero",
        "info": "",
        "x": 270,
        "y": 240,
        "wires": []
    },
    {
        "id": "372f485b.c50f48",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get (\"location\") == \"Casa\" && global.get(\"chances\")>=5 && global.get (\"takecoffe\") == 0) {\n    global.set (\"chances\", global.get(\"chances\")-5);\n    global.set (\"takecoffe\", 1);\n    global.set (\"onclic\", 1);\n    msg.payload = \"check\";\n    msg.topic = \"23, es momento de tomar un café. comprobando cafetera\";\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 980,
        "y": 3000,
        "wires": [
            [
                "6cdbdabb.bb8824",
                "ac22d488.854368",
                "aa4c58ad.c421f8",
                "72cc2cc5.d2f104"
            ]
        ]
    },
    {
        "id": "674aafc5.32182",
        "type": "comment",
        "z": "2e3f68c7.2f3ff",
        "name": "Administrar medicamento",
        "info": "",
        "x": 670,
        "y": 2300,
        "wires": []
    },
    {
        "id": "6cdbdabb.bb8824",
        "type": "mqtt out",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "topic": "hugo/se/caferequest",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "4c35078.987c1f8",
        "x": 1220,
        "y": 3000,
        "wires": []
    },
    {
        "id": "f41e12b2.26558",
        "type": "delay",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1380,
        "y": 3060,
        "wires": [
            [
                "27cf7c06.822384"
            ]
        ]
    },
    {
        "id": "ac22d488.854368",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Preparando Café",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1200,
        "y": 3060,
        "wires": [
            [
                "f41e12b2.26558"
            ]
        ]
    },
    {
        "id": "27cf7c06.822384",
        "type": "ui_toast",
        "z": "2e3f68c7.2f3ff",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "",
        "name": "",
        "x": 1730,
        "y": 3060,
        "wires": []
    },
    {
        "id": "aa4c58ad.c421f8",
        "type": "change",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "topic",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1200,
        "y": 3100,
        "wires": [
            [
                "9fe015fb.3b97f8"
            ]
        ]
    },
    {
        "id": "72cc2cc5.d2f104",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "switch (global.get  (\"cafeterastate\")) {\n    case 0:\n        if (global.get (\"firstCafe\") == 1 && global.get (\"doorRequest\") == 0) {\n            global.set (\"cafeorden\", \"23, es necesario colocar cafe y agua a la cafetera para preparar tu primer café del día\");\n        } else if (global.get (\"doorRequest\") == 1) {\n            global.set (\"cafeorden\", global.get (\"doorDetect\") + \", para dejar el departamento es necesario colocar cafe y agua a la cafetera\");\n        } else {\n            global.set (\"cafeorden\", \"23, es necesario colocar cafe y agua a la cafetera\");\n        }\n        global.set (\"snoozecafe\", global.get (\"timeNow\") + 120000);\n        msg.payload = global.get (\"cafeorden\");\n        break;\n    case 1:\n        if (global.get (\"firstCafe\") == 1 && global.get (\"doorRequest\") == 0) {\n            global.set (\"cafeorden\", \"23, es necesario encender la cafetera para preparar tu primer café del día\");\n        } else if (global.get (\"doorRequest\") == 1) {\n            global.set (\"cafeorden\", global.get (\"doorDetect\") + \", para dejar el departamento, deberás encender la cafetera\");\n        } else {\n            global.set (\"cafeorden\", \"23, enciende la cafetera\");\n        }\n        global.set (\"snoozecafe\", global.get (\"timeNow\") + 120000);//Cambiar a lo que tarda en prepararse el cafe\n        msg.payload = global.get (\"cafeorden\");\n        break;\n    case 2:\n        if (global.get (\"firstCafe\") == 1 && global.get (\"doorRequest\") == 0) {\n            global.set (\"cafeorden\", \"23, por favor, consume tu primer café del día\");\n        } else if (global.get (\"doorRequest\") == 1) {\n            global.set (\"cafeorden\", global.get (\"doorDetect\") + \", para dejar el departamento deberás tomar la taza de café\");\n        } else {\n            global.set (\"cafeorden\", \"23, es momento de tomar una taza de café\");\n        }\n        global.set (\"snoozecafe\", global.get (\"timeNow\") + 120000);\n        msg.payload = global.get (\"cafeorden\");\n        break; \n    case 3:\n        if (global.get (\"firstCafe\") == 1 && global.get (\"doorRequest\") == 0) {\n            global.set (\"cafeorden\", \"23, disfruta tu tu primer café del día\");\n        } else if (global.get (\"doorRequest\") == 1) {\n            global.set (\"cafeorden\", global.get (\"doorDetect\") + \", disfruta tu café, cuando hayas terminado podrás salir\");\n        } else {\n            global.set (\"cafeorden\", \"Disfruta tu café\");\n        }\n        global.set (\"snoozecafe\", global.get (\"timeNow\") + 120000);// el tiempo agregado debe ser 10 min 600000\n        msg.payload = global.get (\"cafeorden\");\n        break; \n    case 4:\n        if (global.get (\"firstCafe\") == 1) {\n            global.set (\"cafeorden\", \"Cafetera en modo reposo, gracias por tomar tu primer café del día.\");\n            global.set (\"firstCafe\" , 2);\n        } else {\n            global.set (\"cafeorden\", \"Cafetera en modo reposo\");\n        }\n        \n        //global.set (\"snoozecafe\", global.get (\"timeNow\") + 60000);\n        msg.payload = global.get (\"cafeorden\");\n        global.set (\"takecoffe\",0);\n        break;\n    case 5:\n        if (global.get (\"firstCafe\") == 1) {\n            global.set (\"firstCafe\" , 2);\n        }\n        global.set (\"cafeorden\", \"Apagando cafetera\");\n        //global.set (\"snoozecafe\", global.get (\"timeNow\") + 60000);\n        global.set (\"cafeterastate\", 0);\n        msg.payload = global.get (\"cafeorden\");\n        global.set (\"takecoffe\",0);\n        break;\n    case 6:\n        if (global.get (\"firstCafe\") == 1 && global.get (\"doorRequest\") == 0) {\n            global.set (\"cafeorden\", \"23, haz forzado la cancelación del consumo de café. Este acto supone un cargo de 60 pesos a tu cuenta bancaria.\");\n        } else if (global.get (\"doorRequest\") == 1) {\n            global.set (\"cafeorden\", global.get (\"doorDetect\") + \", haz forzado la cancelación de la cuota de consumo de café necesaria para disfrutar espacios abiertos. Este acto supone un cargo de 60 pesos a tu cuenta bancaria.\");\n            global.set (\"firstCafe\" , 2);\n        } else {\n            global.set (\"cafeorden\", \"Se ha forzado la cancelación del consumo de café. Este acto supone un cargo de 60 pesos a tu cuenta bancaria.\");\n        }\n        global.set (\"lastPayment\", [60,\"Cafetera\"]);\n        global.set (\"cafeterastate\", 6);\n        msg.payload = global.get (\"cafeorden\");\n        global.set (\"takecoffe\",0);\n        break;\n    default:\n        global.set (\"cafeorden\", \"23, la cafetera necesita tu atención\");\n        global.set (\"snoozecafe\", global.get (\"timeNow\") + 120000);\n        msg.payload = global.get (\"cafeorden\");\n        break;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1180,
        "y": 3140,
        "wires": [
            [
                "9fe015fb.3b97f8",
                "69a14f.ccaa6eb"
            ]
        ]
    },
    {
        "id": "81134c17.0018c",
        "type": "link in",
        "z": "66ae481f.c36c48",
        "name": "meds",
        "links": [
            "3bad8409.f2a71c"
        ],
        "x": 195,
        "y": 660,
        "wires": [
            [
                "ffa7481.c54b9b8",
                "89d913cf.f2694"
            ]
        ]
    },
    {
        "id": "ffa7481.c54b9b8",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "if (global.get(\"takecoffe\") == 1 && global.get (\"timeNow\") > global.get (\"snoozecafe\")) {\n    if (global.get (\"cafeterastate\") == 3) {\n        global.set (\"snoozecafe\", global.get (\"timeNow\") + 180000);//el tiempo agregado debe ser 10 min 600000\n        msg.payload = \"23, ¿cómo te está sabiendo tu café?\";\n    }else {\n        global.set (\"snoozecafe\", global.get (\"timeNow\") + 300000);\n        msg.payload = global.get (\"cafeorden\") + \". La rutina de café sigue activa.\";\n    }\n    msg.topic = \"check\";\n    \n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 660,
        "wires": [
            [
                "b8ea0247.01d8f",
                "719633ca.e6a68c"
            ]
        ]
    },
    {
        "id": "b8ea0247.01d8f",
        "type": "change",
        "z": "66ae481f.c36c48",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "topic",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 820,
        "y": 700,
        "wires": [
            [
                "2005bd00.3e2cb4"
            ]
        ]
    },
    {
        "id": "2005bd00.3e2cb4",
        "type": "mqtt out",
        "z": "66ae481f.c36c48",
        "name": "",
        "topic": "hugo/se/caferequest",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "4c35078.987c1f8",
        "x": 1100,
        "y": 700,
        "wires": []
    },
    {
        "id": "747c23ea.ed1d2c",
        "type": "mqtt in",
        "z": "66ae481f.c36c48",
        "name": "",
        "topic": "hugo/se/caferesponse",
        "qos": "2",
        "datatype": "auto",
        "broker": "4c35078.987c1f8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "x": 280,
        "y": 840,
        "wires": [
            [
                "b94bb96a.2087f8",
                "e518874f.54c678"
            ]
        ]
    },
    {
        "id": "cf0c58b7.6fd468",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 250,
        "y": 900,
        "wires": [
            [
                "b3164182.2ea4b"
            ]
        ]
    },
    {
        "id": "8dd06d50.63a7e",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "1",
        "payloadType": "num",
        "x": 250,
        "y": 940,
        "wires": [
            [
                "b3164182.2ea4b"
            ]
        ]
    },
    {
        "id": "5757d054.6129c",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2",
        "payloadType": "num",
        "x": 250,
        "y": 980,
        "wires": [
            [
                "b3164182.2ea4b"
            ]
        ]
    },
    {
        "id": "c481843c.482758",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "3",
        "payloadType": "num",
        "x": 250,
        "y": 1020,
        "wires": [
            [
                "b3164182.2ea4b"
            ]
        ]
    },
    {
        "id": "715424e0.343e3c",
        "type": "link in",
        "z": "2e3f68c7.2f3ff",
        "name": "cafe response - b",
        "links": [
            "2793b75d.a66bc8",
            "9f3fb876.be92a8",
            "e87cded6.9b12e"
        ],
        "x": 935,
        "y": 3140,
        "wires": [
            [
                "72cc2cc5.d2f104",
                "c37660f2.7ee34"
            ]
        ]
    },
    {
        "id": "cab03c7a.d197c",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "4",
        "payloadType": "num",
        "x": 250,
        "y": 1060,
        "wires": [
            [
                "b3164182.2ea4b",
                "29f87953.17c126"
            ]
        ]
    },
    {
        "id": "3d457d05.18fa12",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "5",
        "payloadType": "num",
        "x": 250,
        "y": 1100,
        "wires": [
            [
                "b3164182.2ea4b"
            ]
        ]
    },
    {
        "id": "6d174739.8e08d8",
        "type": "comment",
        "z": "66ae481f.c36c48",
        "name": "Rutina de tomar cafe",
        "info": "",
        "x": 270,
        "y": 620,
        "wires": []
    },
    {
        "id": "89d913cf.f2694",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "if (global.get (\"takecoffe\") == 1 ) {\n    msg.payload = \"23 está tomando café\";\n} else {\n    msg.payload = \"23 no está tomando café\";\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 740,
        "wires": [
            [
                "18c06b72.59c865"
            ]
        ]
    },
    {
        "id": "18c06b72.59c865",
        "type": "ui_text",
        "z": "66ae481f.c36c48",
        "group": "2d6ab607.03dbb2",
        "order": 6,
        "width": 3,
        "height": 1,
        "name": "",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "x": 790,
        "y": 740,
        "wires": []
    },
    {
        "id": "29e21012.03468",
        "type": "http request",
        "z": "c2c0e0c1.0deb1",
        "name": "Cam1",
        "method": "GET",
        "ret": "bin",
        "paytoqs": "ignore",
        "url": "192.168.15.110/capture",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 710,
        "y": 1580,
        "wires": [
            [
                "1d42d33a.6230ed"
            ]
        ]
    },
    {
        "id": "1d42d33a.6230ed",
        "type": "file",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "filename": "S:\\Captura\\work.jpg",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "setbymsg",
        "x": 990,
        "y": 1580,
        "wires": [
            [
                "4addf015.68ec4"
            ]
        ]
    },
    {
        "id": "8c2d1bd3.0a3ef8",
        "type": "exec",
        "z": "c2c0e0c1.0deb1",
        "command": "",
        "addpay": "payload",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 1450,
        "y": 1580,
        "wires": [
            [
                "e199d623.0be6a8"
            ],
            [],
            []
        ]
    },
    {
        "id": "4addf015.68ec4",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "msg.filename = \"S:\\\\Captura\\\\work.jpg\"\nmsg.payload = \"python S:\\\\DeepFace\\\\Code\\\\FaceDetector-f\\\\fdf.py -i \"+msg.filename;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1220,
        "y": 1580,
        "wires": [
            [
                "8c2d1bd3.0a3ef8"
            ]
        ]
    },
    {
        "id": "e199d623.0be6a8",
        "type": "switch",
        "z": "c2c0e0c1.0deb1",
        "name": "rc.code",
        "property": "rc.code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 720,
        "y": 1640,
        "wires": [
            [
                "413a6917.34ad98"
            ],
            []
        ]
    },
    {
        "id": "413a6917.34ad98",
        "type": "json",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 950,
        "y": 1640,
        "wires": [
            [
                "2042a583.834a1a",
                "72724031.f298e",
                "31bf49c2.3cda16"
            ]
        ]
    },
    {
        "id": "d430b5c.b485448",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "msg.topic=\"INSERT INTO emotions23 (angry, disgust, fear, happy, sad, surprise, neutral) VALUES ('\"+global.get (\"angry23\")+\"','\"+global.get (\"disgust23\")+\"','\"+global.get (\"fear23\")+\"','\"+global.get (\"happyy23\")+\"','\"+global.get (\"sad23\")+\"','\"+global.get (\"surprise23\")+\"','\"+global.get (\"neutral23\")+\"')\";\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 420,
        "y": 2040,
        "wires": [
            [
                "9edae9a5.a880b8"
            ]
        ]
    },
    {
        "id": "9edae9a5.a880b8",
        "type": "mysql",
        "z": "c2c0e0c1.0deb1",
        "mydb": "1a27214b.e39c3f",
        "name": "",
        "x": 750,
        "y": 2040,
        "wires": [
            [
                "1a7ac32b.bcd32d"
            ]
        ]
    },
    {
        "id": "2042a583.834a1a",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "\n//var msg = {};\nvar msg1 = {};\nvar msg2 = {};\nvar msg3 = {};\nvar msg4 = {};\nvar msg5 = {};\nvar msg6 = {};\nvar msg7 = {};\n\nmsg1.topic = \"Angry\";\nmsg2.topic = \"disgust\";\nmsg3.topic = \"fear\";\nmsg4.topic = \"happy\";\nmsg5.topic = \"sad\";\nmsg6.topic = \"surprise\";\nmsg7.topic = \"neutral\";\n\nmsg1.payload = msg.payload.angry.emotion / 100;\nmsg2.payload = msg.payload.disgust.emotion / 100;\nmsg3.payload = msg.payload.fear.emotion / 100;\nmsg4.payload = msg.payload.happy.emotion / 100;\nmsg5.payload = msg.payload.sad.emotion / 100;\nmsg6.payload = msg.payload.surprise.emotion / 100;\nmsg7.payload = msg.payload.neutral.emotion / 100;\n\nif (global.get (\"isAwaken\") == 1) {\n    global.set (\"angry23\", global.get (\"angry23\") + msg1.payload );\n    global.set (\"disgust23\", global.get (\"disgust23\") + msg2.payload );\n    global.set (\"fear23\", global.get (\"fear23\") + msg3.payload );\n    global.set (\"happyy23\", global.get (\"happyy23\") + msg4.payload );\n    global.set (\"sad23\", global.get (\"sad23\") + msg5.payload );\n    global.set (\"surprise23\", global.get (\"surprise23\") + msg6.payload );\n    global.set (\"neutral23\", global.get (\"neutral23\") + msg7.payload );\n    \n    global.set (\"angry23b\", global.get (\"angry23b\") + msg1.payload );\n    global.set (\"disgust23b\", global.get (\"disgust23b\") + msg2.payload );\n    global.set (\"fear23b\", global.get (\"fear23b\") + msg3.payload );\n    global.set (\"happyy23b\", global.get (\"happyy23b\") + msg4.payload );\n    global.set (\"sad23b\", global.get (\"sad23b\") + msg5.payload );\n    global.set (\"surprise23b\", global.get (\"surprise23b\") + msg6.payload );\n    global.set (\"neutral23b\", global.get (\"neutral23b\") + msg7.payload );\n}\n\nreturn [[msg1, msg2, msg3, msg4, msg5, msg6, msg7]];",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1220,
        "y": 1640,
        "wires": [
            []
        ]
    },
    {
        "id": "3061be48.f85d62",
        "type": "comment",
        "z": "66ae481f.c36c48",
        "name": "Retro cafetera",
        "info": "",
        "x": 250,
        "y": 800,
        "wires": []
    },
    {
        "id": "c0c53d57.e4b1f",
        "type": "link out",
        "z": "c2c0e0c1.0deb1",
        "name": "detect 23",
        "links": [
            "fda52bc9.c22d18",
            "50865647.90ccd8"
        ],
        "x": 915,
        "y": 1120,
        "wires": []
    },
    {
        "id": "fda52bc9.c22d18",
        "type": "link in",
        "z": "c2c0e0c1.0deb1",
        "name": "check 23 emotionsW",
        "links": [
            "c0c53d57.e4b1f"
        ],
        "x": 555,
        "y": 1640,
        "wires": [
            [
                "29e21012.03468"
            ]
        ]
    },
    {
        "id": "a937b4e.7569148",
        "type": "inject",
        "z": "c2c0e0c1.0deb1",
        "name": "Every 1h",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "3600",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 2040,
        "wires": [
            [
                "d430b5c.b485448",
                "7981b3d9.9f3b7c"
            ]
        ]
    },
    {
        "id": "1a7ac32b.bcd32d",
        "type": "delay",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 980,
        "y": 2040,
        "wires": [
            [
                "3635c129.db553e"
            ]
        ]
    },
    {
        "id": "3635c129.db553e",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "global.set (\"angry23b\", 0);\nglobal.set (\"disgust23b\", 0);\nglobal.set (\"fear23b\", 0);\nglobal.set (\"happyy23b\", 0);\nglobal.set (\"sad23b\", 0);\nglobal.set (\"surprise23b\", 0);\nglobal.set (\"neutral23b\",0);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1260,
        "y": 2040,
        "wires": [
            []
        ]
    },
    {
        "id": "ba3286b0.68a2f8",
        "type": "comment",
        "z": "c2c0e0c1.0deb1",
        "name": "Send emotions chunk",
        "info": "",
        "x": 180,
        "y": 1980,
        "wires": []
    },
    {
        "id": "c1947425.1fd4f8",
        "type": "mqtt in",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "topic": "hugo/se/sala/onrecord",
        "qos": "0",
        "datatype": "auto",
        "broker": "4c35078.987c1f8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "x": 160,
        "y": 1800,
        "wires": [
            [
                "95aeb367.9f745",
                "c1e61015.957eb"
            ]
        ]
    },
    {
        "id": "fd725b3e.edcb28",
        "type": "mqtt in",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "topic": "hugo/se/sala/onstop",
        "qos": "0",
        "datatype": "auto",
        "broker": "4c35078.987c1f8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "x": 150,
        "y": 1860,
        "wires": [
            [
                "29755054.11e62",
                "c1e61015.957eb"
            ]
        ]
    },
    {
        "id": "95aeb367.9f745",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "/*if (global.get (\"confidenceE\") > 0) {\n    if(global.get('firstRecordE')== 0)\n    {\n        global.set ('firstRecordE',global.get('timeNow'));\n        global.set ('lastStopE',global.get('timeNow'));\n        \n    }\n    global.set('lastRecordE',global.get('timeNow'));\n    if ((global.get('lastRecordE') - global.get('lastStopE'))<300000)\n    {\n        global.set('chilltime', global.get('chilltime')+(global.get('lastRecordE') - global.get('lastStopE')));\n    }\n    msg.payload = global.get('lastRecordE');\n    global.set(\"confidenceW\", 0);\n    /*\n    global.set (\"personadetectadaE\", msg.payload.predictions[0].userid);\n    global.set (\"confidenceE\", msg.payload.predictions[0].confidence);\n    msg.topic = global.get (\"personadetectada\");\n    msg.payload = global.get (\"confidence\");\n    \n    return msg;\n}\n\nif (global.get (\"confidenceE\") > 0) {\n    global.set('lastRecordE',global.get('timeNow'));\n}*/\n\nif (global.get (\"confidenceE\") > 0) {\n    global.set (\"onRecordE\", 1);\n    global.set (\"onRecordW\", 0);\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 420,
        "y": 1800,
        "wires": [
            [
                "7cb07f81.5ad52"
            ]
        ]
    },
    {
        "id": "29755054.11e62",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "/*global.set('lastStopE',global.get('timeNow'));\nmsg.payload = (global.get('lastStopE') - global.get('lastRecordE'));\nglobal.set('chilltime', global.get('chilltime')+msg.payload);\nif (global.get (\"timeNow\") - global.get (\"lastStopE\") > 600000) \n{\n    global.set (\"confidenceE\", 0);\n}\nreturn msg;\n\nif (global.get (\"confidenceE\") > 0) {\n    global.set('lastStopE',global.get('timeNow'));\n    if ((global.get (\"lastStopE\") > global.get (\"lastRecordE\")) && (global.get (\"lastRecordE\") > 0)) {\n        global.set('chilltime', global.get('chilltime') + ((global.get (\"lastStopE\")-global.get (\"lastRecordE\"))) );\n    }\n}*/\n\nglobal.set (\"onRecordE\", 0);\nglobal.set (\"lastDetect\", global.get (\"timeNow\"));\n//global.set (\"confidenceE\", 0);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 420,
        "y": 1860,
        "wires": [
            []
        ]
    },
    {
        "id": "7cb07f81.5ad52",
        "type": "http request",
        "z": "c2c0e0c1.0deb1",
        "name": "Cam4",
        "method": "GET",
        "ret": "bin",
        "paytoqs": "ignore",
        "url": "192.168.15.112/capture",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 710,
        "y": 1800,
        "wires": [
            [
                "45feee21.31d72"
            ]
        ]
    },
    {
        "id": "45feee21.31d72",
        "type": "file",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "filename": "S:\\Captura\\chill.jpg",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "setbymsg",
        "x": 990,
        "y": 1800,
        "wires": [
            [
                "bd5eab2a.bffc68"
            ]
        ]
    },
    {
        "id": "6d9efcaa.334474",
        "type": "exec",
        "z": "c2c0e0c1.0deb1",
        "command": "",
        "addpay": "payload",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 1450,
        "y": 1800,
        "wires": [
            [
                "d6805bc.430cda8"
            ],
            [],
            []
        ]
    },
    {
        "id": "bd5eab2a.bffc68",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "msg.filename = \"S:\\\\Captura\\\\chill.jpg\"\nmsg.payload = \"python S:\\\\DeepFace\\\\Code\\\\FaceDetector-f\\\\fdf.py -i \"+msg.filename;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1220,
        "y": 1800,
        "wires": [
            [
                "6d9efcaa.334474"
            ]
        ]
    },
    {
        "id": "d6805bc.430cda8",
        "type": "switch",
        "z": "c2c0e0c1.0deb1",
        "name": "rc.code",
        "property": "rc.code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 720,
        "y": 1860,
        "wires": [
            [
                "710d0383.06dd0c"
            ],
            []
        ]
    },
    {
        "id": "710d0383.06dd0c",
        "type": "json",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 950,
        "y": 1860,
        "wires": [
            [
                "16c964d3.68cb2b",
                "72724031.f298e",
                "31bf49c2.3cda16"
            ]
        ]
    },
    {
        "id": "16c964d3.68cb2b",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "\n//var msg = {};\nvar msg1 = {};\nvar msg2 = {};\nvar msg3 = {};\nvar msg4 = {};\nvar msg5 = {};\nvar msg6 = {};\nvar msg7 = {};\n\nmsg1.topic = \"Angry\";\nmsg2.topic = \"disgust\";\nmsg3.topic = \"fear\";\nmsg4.topic = \"happy\";\nmsg5.topic = \"sad\";\nmsg6.topic = \"surprise\";\nmsg7.topic = \"neutral\";\n\nmsg1.payload = msg.payload.angry.emotion / 100;\nmsg2.payload = msg.payload.disgust.emotion / 100;\nmsg3.payload = msg.payload.fear.emotion / 100;\nmsg4.payload = msg.payload.happy.emotion / 100;\nmsg5.payload = msg.payload.sad.emotion / 100;\nmsg6.payload = msg.payload.surprise.emotion / 100;\nmsg7.payload = msg.payload.neutral.emotion / 100;\n\nif (global.get (\"isAwaken\") == 1) {\n    global.set (\"angry23\", global.get (\"angry23\") + msg1.payload );\n    global.set (\"disgust23\", global.get (\"disgust23\") + msg2.payload );\n    global.set (\"fear23\", global.get (\"fear23\") + msg3.payload );\n    global.set (\"happyy23\", global.get (\"happyy23\") + msg4.payload );\n    global.set (\"sad23\", global.get (\"sad23\") + msg5.payload );\n    global.set (\"surprise23\", global.get (\"surprise23\") + msg6.payload );\n    global.set (\"neutral23\", global.get (\"neutral23\") + msg7.payload );\n    \n    global.set (\"angry23b\", global.get (\"angry23b\") + msg1.payload );\n    global.set (\"disgust23b\", global.get (\"disgust23b\") + msg2.payload );\n    global.set (\"fear23b\", global.get (\"fear23b\") + msg3.payload );\n    global.set (\"happyy23b\", global.get (\"happyy23b\") + msg4.payload );\n    global.set (\"sad23b\", global.get (\"sad23b\") + msg5.payload );\n    global.set (\"surprise23b\", global.get (\"surprise23b\") + msg6.payload );\n    global.set (\"neutral23b\", global.get (\"neutral23b\") + msg7.payload );\n}\n\nreturn [[msg1, msg2, msg3, msg4, msg5, msg6, msg7]];",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1220,
        "y": 1860,
        "wires": [
            []
        ]
    },
    {
        "id": "cf7ff00e.01d",
        "type": "link in",
        "z": "c2c0e0c1.0deb1",
        "name": "check emotionsE",
        "links": [
            "9c632d11.72577"
        ],
        "x": 555,
        "y": 1860,
        "wires": [
            [
                "7cb07f81.5ad52"
            ]
        ]
    },
    {
        "id": "9c632d11.72577",
        "type": "link out",
        "z": "c2c0e0c1.0deb1",
        "name": "detect 23 -E",
        "links": [
            "cf7ff00e.01d"
        ],
        "x": 915,
        "y": 1180,
        "wires": []
    },
    {
        "id": "3663898a.1ff2a6",
        "type": "ui_gauge",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "group": "510df368.d3c8dc",
        "order": 2,
        "width": 3,
        "height": 3,
        "gtype": "donut",
        "title": "Entretenimiento",
        "label": "h",
        "format": "{{value}}",
        "min": 0,
        "max": 10,
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 740,
        "y": 360,
        "wires": []
    },
    {
        "id": "c9656ef2.2ee49",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "Get chilltime",
        "func": "msg.payload = global.get ('chilltime')/1000/60/60;\nmsg.payload = msg.payload.toFixed(2);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 360,
        "wires": [
            [
                "3663898a.1ff2a6"
            ]
        ]
    },
    {
        "id": "73eaa55f.1f47dc",
        "type": "ui_gauge",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "group": "510df368.d3c8dc",
        "order": 3,
        "width": 3,
        "height": 3,
        "gtype": "donut",
        "title": "Tiempo en exteriores",
        "label": "h",
        "format": "{{value}}",
        "min": 0,
        "max": "15",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 760,
        "y": 400,
        "wires": []
    },
    {
        "id": "1d4cef70.932a51",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "Get outsidetime",
        "func": "msg.payload = global.get ('outsidetime')/1000/60/60;\nmsg.payload = msg.payload.toFixed(2);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 440,
        "y": 400,
        "wires": [
            [
                "73eaa55f.1f47dc"
            ]
        ]
    },
    {
        "id": "8f9884b7.34ba18",
        "type": "function",
        "z": "5478817a.a9116",
        "name": "Grabar tiempo",
        "func": "if (msg.payload.geofence.name == \"Casa\" && msg.payload.event.type == \"geofenceEnter\") {\n    global.set (\"onRecordO\", 0);\n    global.set (\"autoOff\", 0);\n} else {\n    global.set (\"onRecordO\", 1);\n    global.set(\"confidenceW\",0);\n    global.set(\"confidenceE\",0);\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 560,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "b36a9e84.c4073",
        "type": "inject",
        "z": "c2c0e0c1.0deb1",
        "name": "Every 2h",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "7200",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 2140,
        "wires": [
            [
                "752a2563.41929c"
            ]
        ]
    },
    {
        "id": "752a2563.41929c",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "\nmsg.topic=\"INSERT INTO activities23 (worktime, chilltime, outsidetime) VALUES ('\"+global.get (\"worktime\")/1000/60/60+\"','\"+global.get (\"chilltime\")/1000/60/60+\"','\"+global.get (\"outsidetime\")/1000/60/60+\"')\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 420,
        "y": 2140,
        "wires": [
            [
                "dbcff2f0.c7e94"
            ]
        ]
    },
    {
        "id": "dbcff2f0.c7e94",
        "type": "mysql",
        "z": "c2c0e0c1.0deb1",
        "mydb": "1a27214b.e39c3f",
        "name": "",
        "x": 750,
        "y": 2140,
        "wires": [
            []
        ]
    },
    {
        "id": "67b34e1a.43fec",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get (\"promomeds_i\") != 0) {\n    msg.payload = \"Este comando solo se puede usar una vez al día. 23 ya consumió el medicamento promocional\";\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 2480,
        "wires": [
            [
                "319ef31b.76713c"
            ]
        ]
    },
    {
        "id": "a9c900e6.67a78",
        "type": "ui_toast",
        "z": "2e3f68c7.2f3ff",
        "position": "bottom right",
        "displayTime": "15",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "",
        "name": "",
        "x": 1410,
        "y": 2480,
        "wires": []
    },
    {
        "id": "319ef31b.76713c",
        "type": "delay",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1180,
        "y": 2480,
        "wires": [
            [
                "a9c900e6.67a78"
            ]
        ]
    },
    {
        "id": "6c325f12.da391",
        "type": "comment",
        "z": "c2c0e0c1.0deb1",
        "name": "Detectar personas",
        "info": "",
        "x": 150,
        "y": 1260,
        "wires": []
    },
    {
        "id": "a0c43192.5067e",
        "type": "inject",
        "z": "64d34e70.fcce4",
        "name": "6am every day",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "01 06 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 120,
        "wires": [
            [
                "14e41eac.a31011",
                "8b193dbe.8c93a",
                "82ae6e95.99dc7",
                "a7fe4c8.facfab",
                "193e1ad2.d09015",
                "928a3387.882d5",
                "2a8adfe0.6d951"
            ]
        ]
    },
    {
        "id": "14e41eac.a31011",
        "type": "function",
        "z": "64d34e70.fcce4",
        "name": "Control de departamento",
        "func": "//Calcular media noche\nvar dateOnStart = new Date(global.get(\"timeNow\"));\nmsg.topic1 = dateOnStart;\nvar timestampOnstart = dateOnStart.toString();\nmsg.topic2 = timestampOnstart;\ntimestampOnstart = timestampOnstart.substr(0, 16)  + \"00:00:00\" + msg.topic2.substr(24);\nmsg.topic3 = timestampOnstart;\nvar d = new Date(timestampOnstart);\nmsg.topic4 = d;\nvar timeStamp = d.getTime();\nmsg.topic5 = timeStamp;\n\n//Calcular medicinas\nglobal.set (\"midnight\", timeStamp);\nglobal.set (\"newmeds_i\", 0);\nglobal.set (\"promomeds_i\", 0);\nglobal.set (\"meds\", parseInt(global.get (\"midnight\")) + 59400000);\nglobal.set (\"endofmeds\", parseInt(global.get (\"midnight\")) + 64800000);\ndate = new Date (global.get (\"meds\"));\nvar h = date.getHours();\nif (h <= 9) {\n    h = \"0\"+h;\n}\nvar m = date.getMinutes();\nif (m <= 9) {\n    m = \"0\"+m;\n}\nglobal.set (\"medstaken\", 0);\nglobal.set (\"meds_datetime\", h+\":\"+m);\nglobal.set (\"weekday\", timestampOnstart.substr(0, 3));\nglobal.set (\"newmeds_i\", 0);\nglobal.set (\"promomeds_i\", 0);\nglobal.set (\"snoozemedstime\", 120000);\nglobal.set (\"alarmCount\", 0);\nglobal.set (\"alarmTweet\", 0);\nglobal.set (\"desveloCount\", 0);\n\n//Clics\nglobal.set (\"chances\",0);\nglobal.set (\"onclic\", 0);\n\n//GPS\nglobal.set (\"location\", \"Casa\");\nglobal.set (\"locationevent\",\"deviceUnknown\");\n\n//URLs de cámaras\nglobal.set (\"cam-desktop\", \"192.168.15.110\");\nglobal.set (\"cam-bookshelf\", \"192.168.15.111\");\nglobal.set (\"cam-kitchen\", \"192.168.15.115\");\nglobal.set (\"cam-door\", \"192.168.15.114\");\nglobal.set (\"cam-backdoor\", \"192.168.15.113\");\nglobal.set (\"cam-livingroom\", \"192.168.15.112\");\n\n//Registro de emociones\nglobal.set (\"angry23\", 0);\nglobal.set (\"disgust23\", 0);\nglobal.set (\"fear23\", 0);\nglobal.set (\"happyy23\", 0);\nglobal.set (\"sad23\", 0);\nglobal.set (\"surprise23\", 0);\nglobal.set (\"neutral23\", 0);\n\nglobal.set (\"angry23b\", 0);\nglobal.set (\"disgust23b\", 0);\nglobal.set (\"fear23b\", 0);\nglobal.set (\"happyy23b\", 0);\nglobal.set (\"sad23b\", 0);\nglobal.set (\"surprise23b\", 0);\nglobal.set (\"neutral23b\", 0);\n\nglobal.set (\"lastDominant\", [\"Felicidad\",\"60\"]);\n\n//Recordings\nglobal.set (\"onRecordW\", 0);\nglobal.set (\"onRecordE\", 0);\nglobal.set (\"onRecordO\", 0);\nglobal.set ('worktime',0);\nglobal.set ('chilltime',0);\nglobal.set ('outsidetime',0);\n\n\n//Auto off\nglobal.set (\"autoOff\", 0);\nglobal.set (\"sunsetOn\", 0);\nglobal.set (\"workDone\", 0);\nglobal.set (\"dayLight\", 0);\nglobal.set (\"mesaLamp\", 0);\nglobal.set (\"focococinaControl\", 0);\nglobal.set (\"focolavamanosControl\", 0);\n\n//Variables de presencia\nglobal.set (\"isAwaken\", 0);\nglobal.set (\"isAwakenCount\", 0);\nglobal.set (\"wakeUp\", 0);\nglobal.set (\"firstDetect\", 0);\nglobal.set (\"firstCafe\", 0);\nglobal.set (\"lastDetect\", 0);\n\n//Características de Alexa\nglobal.set (\"alexaVolume\",20);\nglobal.set (\"scene\",0);\nglobal.set (\"sceneNext\", global.get (\"timeNow\")+120000);\n\n//Apertura de Puerta\nglobal.set (\"doorRequest\",0);\nglobal.set (\"lastPayment\", [0,\"Puerta\"]);\nglobal.set (\"doorRequested\", 5);\nglobal.set (\"lastDoorRequest\", global.set (\"timeNow\"));\nglobal.set (\"desveloAnoche\",0);\nglobal.set (\"desveloAnocheHora\",0);\n\n//Cafetera\nglobal.set (\"cafeterastate\", 0);\nglobal.set (\"takecoffe\", 0);\n\n//RPi\nglobal.set (\"process\", 1);\n\n/*\nglobal.set('today', msg.payload);\n\nglobal.set('confidenceE',0);\nglobal.set('confidenceW',0);\n\n\nglobal.set (\"musicanow\", \"false\");\nglobal.set (\"musicalast\", \"true\");\nglobal.set (\"color\", 0);\nglobal.set (\"comando\", 0);\nglobal.set (\"falla\",0);\n\n\n*/\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 530,
        "y": 120,
        "wires": [
            [
                "7627fdba.2ea854"
            ]
        ]
    },
    {
        "id": "2b63113f.5b650e",
        "type": "comment",
        "z": "64d34e70.fcce4",
        "name": "Cron",
        "info": "",
        "x": 130,
        "y": 80,
        "wires": []
    },
    {
        "id": "8b193dbe.8c93a",
        "type": "alexa-remote-smarthome",
        "z": "64d34e70.fcce4",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "query",
            "value": [
                {
                    "entity": "4801ec0c-27df-4f9c-aea9-39146080d320",
                    "property": "all"
                }
            ]
        },
        "outputs": 1,
        "x": 520,
        "y": 400,
        "wires": [
            [
                "d73de8a6.df1da8"
            ]
        ]
    },
    {
        "id": "e3c89ae7.73a3e8",
        "type": "comment",
        "z": "64d34e70.fcce4",
        "name": "Dispositivos Alexa",
        "info": "",
        "x": 170,
        "y": 260,
        "wires": []
    },
    {
        "id": "62e0a4d0.6085cc",
        "type": "mqtt in",
        "z": "64d34e70.fcce4",
        "name": "",
        "topic": "hugo/se/cron",
        "qos": "0",
        "datatype": "utf8",
        "broker": "4c35078.987c1f8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "x": 150,
        "y": 180,
        "wires": [
            [
                "14e41eac.a31011",
                "8b193dbe.8c93a",
                "a7fe4c8.facfab",
                "193e1ad2.d09015",
                "82ae6e95.99dc7",
                "928a3387.882d5",
                "2a8adfe0.6d951"
            ]
        ]
    },
    {
        "id": "d73de8a6.df1da8",
        "type": "function",
        "z": "64d34e70.fcce4",
        "name": "",
        "func": "var longitud = msg.payload.length;\nfor (var i = 0; i < longitud; i++) {\n    switch (msg.payload[i].topic) {\n        case \"Foco cuarto\":\n            global.set (\"fococuarto\", {\"conn\":msg.payload[i].payload.connectivity.value,\"brightness\": msg.payload[i].payload.brightness,\"color\": msg.payload[i].payload.colorProperties.localizationMap[\"es-MX\"],\"power\":msg.payload[i].payload.powerState});\n            break;\n        case \"Lavamanos\":\n            global.set (\"focolavamanos\", {\"conn\":msg.payload[i].payload.connectivity.value,\"brightness\": msg.payload[i].payload.brightness,\"color\": msg.payload[i].payload.colorProperties.localizationMap[\"es-MX\"],\"power\":msg.payload[i].payload.powerState});\n            break;\n        case \"Foco Pasillo\":\n            global.set (\"focopasillo\", {\"conn\":msg.payload[i].payload.connectivity.value,\"brightness\": msg.payload[i].payload.brightness,\"color\": msg.payload[i].payload.colorProperties.localizationMap[\"es-MX\"],\"power\":msg.payload[i].payload.powerState});\n            break;\n        case \"Foco oficina\":\n            global.set (\"focooficina\", {\"conn\":msg.payload[i].payload.connectivity.value,\"brightness\": msg.payload[i].payload.brightness,\"color\": msg.payload[i].payload.colorProperties.localizationMap[\"es-MX\"],\"power\":msg.payload[i].payload.powerState});\n            break;\n        case \"Foco Sala\":\n            global.set (\"focosala\", {\"conn\":msg.payload[i].payload.connectivity.value,\"brightness\": msg.payload[i].payload.brightness,\"color\": msg.payload[i].payload.colorProperties.localizationMap[\"es-MX\"],\"power\":msg.payload[i].payload.powerState});\n            break;\n        case \"Cocina\":\n            global.set (\"focococina\", {\"conn\":msg.payload[i].payload.connectivity.value,\"brightness\": msg.payload[i].payload.brightness,\"color\": msg.payload[i].payload.colorProperties.localizationMap[\"es-MX\"],\"power\":msg.payload[i].payload.powerState});\n            break;\n    }\n}\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 780,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "36629865.bcfc08",
        "type": "inject",
        "z": "2e3f68c7.2f3ff",
        "name": "6:01am check",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "01 06 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 180,
        "y": 480,
        "wires": [
            [
                "34435c10.199fa4",
                "35a029c7.8ae3c6",
                "2af5eda5.fad932",
                "4f3bbc66.3399f4",
                "90f6a178.4cede",
                "9b21073.ae3c1f8"
            ]
        ]
    },
    {
        "id": "9a039c3b.26a6e",
        "type": "ui_dropdown",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "label": "Color Foco Sala",
        "tooltip": "",
        "place": "Select option",
        "group": "1e6be336.24c9e5",
        "order": 7,
        "width": 0,
        "height": 0,
        "passthru": true,
        "multiple": false,
        "options": [
            {
                "label": "Blanco",
                "value": "white",
                "type": "str"
            },
            {
                "label": "Azul",
                "value": "blue",
                "type": "str"
            },
            {
                "label": "Verde",
                "value": "green",
                "type": "str"
            },
            {
                "label": "Rojo",
                "value": "red",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "payload",
        "topicType": "msg",
        "x": 640,
        "y": 600,
        "wires": [
            [
                "6542fb2e.1c3c74"
            ]
        ]
    },
    {
        "id": "bcdd30f.f2dd9d",
        "type": "alexa-remote-smarthome",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "1a342221-5fcc-4bbd-ad49-9b09f06c2168",
                    "action": "turnOn"
                }
            ]
        },
        "outputs": 1,
        "x": 1420,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "755b5fe.e4176a",
        "type": "switch",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "ON",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "OFF",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1170,
        "y": 420,
        "wires": [
            [
                "bcdd30f.f2dd9d"
            ],
            [
                "74622d8c.85b8e4"
            ]
        ]
    },
    {
        "id": "74622d8c.85b8e4",
        "type": "alexa-remote-smarthome",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "1a342221-5fcc-4bbd-ad49-9b09f06c2168",
                    "action": "turnOff"
                }
            ]
        },
        "outputs": 1,
        "x": 1420,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "25c7223b.db9e2e",
        "type": "alexa-remote-smarthome",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "1a342221-5fcc-4bbd-ad49-9b09f06c2168",
                    "action": "setBrightness",
                    "value": {
                        "type": "msg",
                        "value": "payload"
                    }
                }
            ]
        },
        "outputs": 1,
        "x": 1440,
        "y": 540,
        "wires": [
            []
        ]
    },
    {
        "id": "36f17751.382738",
        "type": "alexa-remote-smarthome",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "1a342221-5fcc-4bbd-ad49-9b09f06c2168",
                    "action": "setColor",
                    "value": {
                        "type": "msg",
                        "value": "payload"
                    }
                }
            ]
        },
        "outputs": 1,
        "x": 1420,
        "y": 600,
        "wires": [
            []
        ]
    },
    {
        "id": "eac8296c.ff33d8",
        "type": "switch",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "ON",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "OFF",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1170,
        "y": 180,
        "wires": [
            [
                "be4a5c6c.cfc3b"
            ],
            [
                "1ab630bc.c579ef"
            ]
        ]
    },
    {
        "id": "be4a5c6c.cfc3b",
        "type": "alexa-remote-smarthome",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "cfafeea7-e018-4e2b-b05f-f9220269475b",
                    "action": "turnOn"
                }
            ]
        },
        "outputs": 1,
        "x": 1420,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "1ab630bc.c579ef",
        "type": "alexa-remote-smarthome",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "cfafeea7-e018-4e2b-b05f-f9220269475b",
                    "action": "turnOff"
                }
            ]
        },
        "outputs": 1,
        "x": 1420,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "a7fe4c8.facfab",
        "type": "alexa-remote-smarthome",
        "z": "64d34e70.fcce4",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "query",
            "value": [
                {
                    "entity": "c2b044c3-e3cc-4106-bca8-f4fb8ff1a3ed",
                    "property": "all"
                }
            ]
        },
        "outputs": 1,
        "x": 520,
        "y": 340,
        "wires": [
            [
                "e1f1894f.e68408"
            ]
        ]
    },
    {
        "id": "e1f1894f.e68408",
        "type": "function",
        "z": "64d34e70.fcce4",
        "name": "",
        "func": "var longitud = msg.payload.length;\nfor (var i = 0; i < longitud; i++) {\n    switch (msg.payload[i].topic) {\n        case \"Lámpara de mesa\":\n            global.set (\"lamparamesa\", {\"conn\":msg.payload[i].payload.connectivity.value,\"power\":msg.payload[i].payload.powerState});\n            break;\n        case \"Lampara de Piso\":\n            global.set (\"lamparapiso\", {\"conn\":msg.payload[i].payload.connectivity.value,\"power\":msg.payload[i].payload.powerState});\n            break;\n    }\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 780,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "eb54213c.d19fe",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "var msg1 = {payload: global.get (\"lamparapiso.conn\")};\nvar msg2 = {payload: global.get (\"lamparapiso.power\")};\nvar msg3 = {payload: global.get (\"lamparamesa.conn\")};\nvar msg4 = {payload: global.get (\"lamparamesa.power\")};\nreturn [msg1,msg2,msg3,msg4];",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 200,
        "wires": [
            [],
            [
                "e15f4bf2.6807f"
            ],
            [],
            [
                "f64070e1.63711"
            ]
        ]
    },
    {
        "id": "d725eff5.3eadb",
        "type": "inject",
        "z": "2e3f68c7.2f3ff",
        "name": "6.01am check",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "01 06 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 180,
        "y": 180,
        "wires": [
            [
                "eb54213c.d19fe"
            ]
        ]
    },
    {
        "id": "4af0cce3.691864",
        "type": "alexa-remote-smarthome",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "6e880a5d-ff4e-4360-8a33-d04fbdc72f5f",
                    "action": "turnOn"
                }
            ]
        },
        "outputs": 1,
        "x": 1420,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "18fe369e.c248f9",
        "type": "alexa-remote-smarthome",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "6e880a5d-ff4e-4360-8a33-d04fbdc72f5f",
                    "action": "turnOff"
                }
            ]
        },
        "outputs": 1,
        "x": 1420,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "9d31aad9.e69678",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>0) {\n    global.set (\"chances\", global.get(\"chances\")-1);\n    global.get (\"focosala.brightness\", msg.payload);\n    global.set (\"onclic\", 1);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 540,
        "wires": [
            [
                "25c7223b.db9e2e"
            ]
        ]
    },
    {
        "id": "6542fb2e.1c3c74",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>0) {\n    global.set (\"chances\", global.get(\"chances\")-1);\n    global.get (\"focosala.color\", msg.payload);\n    global.set (\"onclic\", 1);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 600,
        "wires": [
            [
                "36f17751.382738"
            ]
        ]
    },
    {
        "id": "2439aad9.8af256",
        "type": "comment",
        "z": "2e3f68c7.2f3ff",
        "name": "Control Manual",
        "info": "",
        "x": 2000,
        "y": 80,
        "wires": []
    },
    {
        "id": "38f3eafa.a1f266",
        "type": "inject",
        "z": "2e3f68c7.2f3ff",
        "name": "5 clicls",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1990,
        "y": 140,
        "wires": [
            [
                "b1390788.beed78"
            ]
        ]
    },
    {
        "id": "4df2c4a3.23230c",
        "type": "inject",
        "z": "2e3f68c7.2f3ff",
        "name": "Vaciar clics",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 2000,
        "y": 220,
        "wires": [
            [
                "93a51cdf.499e5"
            ]
        ]
    },
    {
        "id": "b1390788.beed78",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "global.set (\"chances\",5);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2260,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "93a51cdf.499e5",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "global.set (\"chances\",0);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2260,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "7c6144b.ac76cbc",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "global.set (\"chances\",-2);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2260,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "e03d16e8.dc6b78",
        "type": "inject",
        "z": "2e3f68c7.2f3ff",
        "name": "clics negativos",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 2020,
        "y": 260,
        "wires": [
            [
                "7c6144b.ac76cbc"
            ]
        ]
    },
    {
        "id": "d07b406f.2fe6d",
        "type": "inject",
        "z": "2e3f68c7.2f3ff",
        "name": "10 clicls",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1990,
        "y": 180,
        "wires": [
            [
                "cc43a7f8.3f8f28"
            ]
        ]
    },
    {
        "id": "cc43a7f8.3f8f28",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "global.set (\"chances\",10);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2260,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "8267eb3d.3b9d18",
        "type": "mqtt in",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "topic": "hugo/se/clics",
        "qos": "2",
        "datatype": "auto",
        "broker": "4c35078.987c1f8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "x": 1990,
        "y": 320,
        "wires": [
            [
                "33f600fc.70e01"
            ]
        ]
    },
    {
        "id": "33f600fc.70e01",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "global.set (\"chances\",msg.payload);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2260,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "9cd89a5a.f57a18",
        "type": "mqtt in",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "topic": "mensaje_de_23",
        "qos": "2",
        "datatype": "utf8",
        "broker": "4c35078.987c1f8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "x": 2020,
        "y": 420,
        "wires": [
            [
                "101dd611.68127a"
            ]
        ]
    },
    {
        "id": "84f95858.2a3128",
        "type": "mqtt in",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "topic": "audio_de_23",
        "qos": "2",
        "datatype": "utf8",
        "broker": "4c35078.987c1f8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "x": 2010,
        "y": 480,
        "wires": [
            [
                "f4a50515.d90288"
            ]
        ]
    },
    {
        "id": "101dd611.68127a",
        "type": "ui_toast",
        "z": "2e3f68c7.2f3ff",
        "position": "top right",
        "displayTime": "5",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "",
        "name": "",
        "x": 2530,
        "y": 420,
        "wires": []
    },
    {
        "id": "6e5e3ff6.07994",
        "type": "ui_audio",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "group": "74be730e.33ff4c",
        "voice": "Microsoft Dalia Online (Natural) - Spanish (Mexico)",
        "always": "",
        "x": 2500,
        "y": 480,
        "wires": []
    },
    {
        "id": "f4a50515.d90288",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (msg.payload == \"\") {\n    msg.payload = \"Mensaje vacío\";\n    return msg;\n} else {\n    return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2280,
        "y": 480,
        "wires": [
            [
                "6e5e3ff6.07994"
            ]
        ]
    },
    {
        "id": "34435c10.199fa4",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "var msg1 = {payload: global.get (\"focosala.conn\")};\nvar msg2 = {payload: global.get (\"focosala.power\")};\nvar msg3 = {payload: global.get (\"focosala.brightness\")};\nvar msg4 = {payload: global.get (\"focosala.color\")};\nreturn [msg1,msg2,msg3,msg4];",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 440,
        "wires": [
            [],
            [
                "ea5e3c92.fb5ba"
            ],
            [
                "4defac05.73e454"
            ],
            [
                "9a039c3b.26a6e"
            ]
        ]
    },
    {
        "id": "35a029c7.8ae3c6",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "var msg1 = {payload: global.get (\"focopasillo.conn\")};\nvar msg2 = {payload: global.get (\"focopasillo.power\")};\nvar msg3 = {payload: global.get (\"focopasillo.brightness\")};\nvar msg4 = {payload: global.get (\"focopasillo.color\")};\nreturn [msg1,msg2,msg3,msg4];",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 680,
        "wires": [
            [],
            [
                "4aec905b.4aaee"
            ],
            [
                "bec668c4.eff1"
            ],
            [
                "3a9d8b7c.7303b4"
            ]
        ]
    },
    {
        "id": "3a9d8b7c.7303b4",
        "type": "ui_dropdown",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "label": "Color Foco Pasillo",
        "tooltip": "",
        "place": "Select option",
        "group": "1e6be336.24c9e5",
        "order": 10,
        "width": 0,
        "height": 0,
        "passthru": true,
        "multiple": false,
        "options": [
            {
                "label": "Blanco",
                "value": "white",
                "type": "str"
            },
            {
                "label": "Azul",
                "value": "blue",
                "type": "str"
            },
            {
                "label": "Verde",
                "value": "green",
                "type": "str"
            },
            {
                "label": "Rojo",
                "value": "red",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "payload",
        "topicType": "msg",
        "x": 650,
        "y": 840,
        "wires": [
            [
                "868827e4.25dc28"
            ]
        ]
    },
    {
        "id": "868827e4.25dc28",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>0) {\n    global.set (\"chances\", global.get(\"chances\")-1);\n    global.get (\"focopasillo.color\", msg.payload);\n    global.set (\"onclic\", 1);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 840,
        "wires": [
            [
                "c91177a6.e43bb8"
            ]
        ]
    },
    {
        "id": "a04e57e3.d0e218",
        "type": "alexa-remote-smarthome",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "f938c4e5-5c78-4221-b9db-c330c6af2d57",
                    "action": "turnOn"
                }
            ]
        },
        "outputs": 1,
        "x": 1420,
        "y": 660,
        "wires": [
            []
        ]
    },
    {
        "id": "4f80e623.c69de8",
        "type": "switch",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "ON",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "OFF",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1170,
        "y": 660,
        "wires": [
            [
                "a04e57e3.d0e218"
            ],
            [
                "a048c09f.6bc49"
            ]
        ]
    },
    {
        "id": "a048c09f.6bc49",
        "type": "alexa-remote-smarthome",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "f938c4e5-5c78-4221-b9db-c330c6af2d57",
                    "action": "turnOff"
                }
            ]
        },
        "outputs": 1,
        "x": 1420,
        "y": 720,
        "wires": [
            []
        ]
    },
    {
        "id": "ba0f1cab.d48c9",
        "type": "alexa-remote-smarthome",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "f938c4e5-5c78-4221-b9db-c330c6af2d57",
                    "action": "setBrightness",
                    "value": {
                        "type": "msg",
                        "value": "payload"
                    }
                }
            ]
        },
        "outputs": 1,
        "x": 1440,
        "y": 780,
        "wires": [
            []
        ]
    },
    {
        "id": "c91177a6.e43bb8",
        "type": "alexa-remote-smarthome",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "f938c4e5-5c78-4221-b9db-c330c6af2d57",
                    "action": "setColor",
                    "value": {
                        "type": "msg",
                        "value": "payload"
                    }
                }
            ]
        },
        "outputs": 1,
        "x": 1420,
        "y": 840,
        "wires": [
            []
        ]
    },
    {
        "id": "2af5eda5.fad932",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "var msg1 = {payload: global.get (\"focooficina.conn\")};\nvar msg2 = {payload: global.get (\"focooficina.power\")};\nvar msg3 = {payload: global.get (\"focooficina.brightness\")};\nvar msg4 = {payload: global.get (\"focooficina.color\")};\nreturn [msg1,msg2,msg3,msg4];",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 920,
        "wires": [
            [],
            [
                "9034188c.950e08"
            ],
            [
                "5b433097.60cb88"
            ],
            [
                "95ee0dc4.41f99"
            ]
        ]
    },
    {
        "id": "95ee0dc4.41f99",
        "type": "ui_dropdown",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "label": "Color Foco Oficina",
        "tooltip": "",
        "place": "Select option",
        "group": "1e6be336.24c9e5",
        "order": 13,
        "width": 0,
        "height": 0,
        "passthru": true,
        "multiple": false,
        "options": [
            {
                "label": "Blanco",
                "value": "white",
                "type": "str"
            },
            {
                "label": "Azul",
                "value": "blue",
                "type": "str"
            },
            {
                "label": "Verde",
                "value": "green",
                "type": "str"
            },
            {
                "label": "Rojo",
                "value": "red",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "payload",
        "topicType": "msg",
        "x": 650,
        "y": 1080,
        "wires": [
            [
                "684da741.2b3a08"
            ]
        ]
    },
    {
        "id": "d40f8251.7ec3a",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>0) {\n    global.set (\"chances\", global.get(\"chances\")-1);\n    global.set (\"focooficina.power\",msg.payload);\n    global.set (\"onclic\", 1);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 900,
        "wires": [
            [
                "240a6c5f.f064e4"
            ]
        ]
    },
    {
        "id": "1c0b82cb.a0efbd",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>0) {\n    global.set (\"chances\", global.get(\"chances\")-1);\n    global.get (\"focooficina.brightness\", msg.payload);\n    global.set (\"onclic\", 1);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 1020,
        "wires": [
            [
                "7e67f407.6378dc"
            ]
        ]
    },
    {
        "id": "684da741.2b3a08",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>0) {\n    global.set (\"chances\", global.get(\"chances\")-1);\n    global.get (\"focooficina.color\", msg.payload);\n    global.set (\"onclic\", 1);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 1080,
        "wires": [
            [
                "82a04b4c.335438"
            ]
        ]
    },
    {
        "id": "29f1cbd3.053544",
        "type": "alexa-remote-smarthome",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "3eb92476-2993-4e99-a1d9-912a4d285277",
                    "action": "turnOn"
                }
            ]
        },
        "outputs": 1,
        "x": 1420,
        "y": 900,
        "wires": [
            []
        ]
    },
    {
        "id": "240a6c5f.f064e4",
        "type": "switch",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "ON",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "OFF",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1170,
        "y": 900,
        "wires": [
            [
                "29f1cbd3.053544"
            ],
            [
                "591d56aa.74d248"
            ]
        ]
    },
    {
        "id": "591d56aa.74d248",
        "type": "alexa-remote-smarthome",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "3eb92476-2993-4e99-a1d9-912a4d285277",
                    "action": "turnOff"
                }
            ]
        },
        "outputs": 1,
        "x": 1420,
        "y": 960,
        "wires": [
            []
        ]
    },
    {
        "id": "7e67f407.6378dc",
        "type": "alexa-remote-smarthome",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "3eb92476-2993-4e99-a1d9-912a4d285277",
                    "action": "setBrightness",
                    "value": {
                        "type": "msg",
                        "value": "payload"
                    }
                }
            ]
        },
        "outputs": 1,
        "x": 1440,
        "y": 1020,
        "wires": [
            []
        ]
    },
    {
        "id": "82a04b4c.335438",
        "type": "alexa-remote-smarthome",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "3eb92476-2993-4e99-a1d9-912a4d285277",
                    "action": "setColor",
                    "value": {
                        "type": "msg",
                        "value": "payload"
                    }
                }
            ]
        },
        "outputs": 1,
        "x": 1420,
        "y": 1080,
        "wires": [
            []
        ]
    },
    {
        "id": "4f3bbc66.3399f4",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "var msg1 = {payload: global.get (\"focococina.conn\")};\nvar msg2 = {payload: global.get (\"focococina.power\")};\nvar msg3 = {payload: global.get (\"focococina.brightness\")};\nvar msg4 = {payload: global.get (\"focococina.color\")};\nreturn [msg1,msg2,msg3,msg4];",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 1200,
        "wires": [
            [],
            [
                "eee45340.4a9f4"
            ],
            [
                "8220afcf.de83a"
            ],
            [
                "bef185e6.148fe8"
            ]
        ]
    },
    {
        "id": "13aea833.21be78",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>0) {\n    global.set (\"chances\", global.get(\"chances\")-1);\n    global.set (\"focococina.power\",msg.payload);\n    global.set (\"onclic\", 1);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 1160,
        "wires": [
            [
                "548dbe0b.7d2af"
            ]
        ]
    },
    {
        "id": "2507e68d.25364a",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>0) {\n    global.set (\"chances\", global.get(\"chances\")-1);\n    global.get (\"focococina.brightness\", msg.payload);\n    global.set (\"onclic\", 1);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 1280,
        "wires": [
            [
                "69cb0390.874bcc"
            ]
        ]
    },
    {
        "id": "1951f860.d80978",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>0) {\n    global.set (\"chances\", global.get(\"chances\")-1);\n    global.get (\"focococina.color\", msg.payload);\n    global.set (\"onclic\", 1);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 1340,
        "wires": [
            [
                "3de49b5d.e57cd4"
            ]
        ]
    },
    {
        "id": "48b4b2ea.7caf6c",
        "type": "alexa-remote-smarthome",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "cbed6c1b-6167-49f6-b133-740e4f63d464",
                    "action": "turnOn"
                }
            ]
        },
        "outputs": 1,
        "x": 1420,
        "y": 1160,
        "wires": [
            []
        ]
    },
    {
        "id": "548dbe0b.7d2af",
        "type": "switch",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "ON",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "OFF",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1170,
        "y": 1160,
        "wires": [
            [
                "48b4b2ea.7caf6c"
            ],
            [
                "fabe61cd.1407e"
            ]
        ]
    },
    {
        "id": "fabe61cd.1407e",
        "type": "alexa-remote-smarthome",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "cbed6c1b-6167-49f6-b133-740e4f63d464",
                    "action": "turnOff"
                }
            ]
        },
        "outputs": 1,
        "x": 1420,
        "y": 1220,
        "wires": [
            []
        ]
    },
    {
        "id": "69cb0390.874bcc",
        "type": "alexa-remote-smarthome",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "cbed6c1b-6167-49f6-b133-740e4f63d464",
                    "action": "setBrightness",
                    "value": {
                        "type": "msg",
                        "value": "payload"
                    }
                }
            ]
        },
        "outputs": 1,
        "x": 1440,
        "y": 1280,
        "wires": [
            []
        ]
    },
    {
        "id": "3de49b5d.e57cd4",
        "type": "alexa-remote-smarthome",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "cbed6c1b-6167-49f6-b133-740e4f63d464",
                    "action": "setColor",
                    "value": {
                        "type": "msg",
                        "value": "payload"
                    }
                }
            ]
        },
        "outputs": 1,
        "x": 1420,
        "y": 1340,
        "wires": [
            []
        ]
    },
    {
        "id": "bef185e6.148fe8",
        "type": "ui_dropdown",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "label": "Color Foco Cocina",
        "tooltip": "",
        "place": "Select option",
        "group": "1e6be336.24c9e5",
        "order": 16,
        "width": 0,
        "height": 0,
        "passthru": true,
        "multiple": false,
        "options": [
            {
                "label": "Blanco",
                "value": "white",
                "type": "str"
            },
            {
                "label": "Azul",
                "value": "blue",
                "type": "str"
            },
            {
                "label": "Verde",
                "value": "green",
                "type": "str"
            },
            {
                "label": "Rojo",
                "value": "red",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "payload",
        "topicType": "msg",
        "x": 650,
        "y": 1340,
        "wires": [
            [
                "1951f860.d80978"
            ]
        ]
    },
    {
        "id": "118a2b92.77c854",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>0) {\n    global.set (\"chances\", global.get(\"chances\")-1);\n    global.set (\"focolavamanos.power\",msg.payload);\n    global.set (\"onclic\", 1);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 1420,
        "wires": [
            [
                "48f1ec69.c3f904"
            ]
        ]
    },
    {
        "id": "2252e710.8fdcc8",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>0) {\n    global.set (\"chances\", global.get(\"chances\")-1);\n    global.get (\"focolavamanos.brightness\", msg.payload);\n    global.set (\"onclic\", 1);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 1540,
        "wires": [
            [
                "3d586af1.826306"
            ]
        ]
    },
    {
        "id": "ebcee9b0.40aaa8",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>0) {\n    global.set (\"chances\", global.get(\"chances\")-1);\n    global.get (\"focolavamanos.color\", msg.payload);\n    global.set (\"onclic\", 1);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 1600,
        "wires": [
            [
                "16402c4e.c60e54"
            ]
        ]
    },
    {
        "id": "97b94ebc.b2909",
        "type": "alexa-remote-smarthome",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "492dd824-2404-4f7c-bb48-451340049f4d",
                    "action": "turnOn"
                }
            ]
        },
        "outputs": 1,
        "x": 1420,
        "y": 1420,
        "wires": [
            []
        ]
    },
    {
        "id": "48f1ec69.c3f904",
        "type": "switch",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "ON",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "OFF",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1170,
        "y": 1420,
        "wires": [
            [
                "97b94ebc.b2909"
            ],
            [
                "df679a6.6f73068"
            ]
        ]
    },
    {
        "id": "df679a6.6f73068",
        "type": "alexa-remote-smarthome",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "492dd824-2404-4f7c-bb48-451340049f4d",
                    "action": "turnOff"
                }
            ]
        },
        "outputs": 1,
        "x": 1420,
        "y": 1480,
        "wires": [
            []
        ]
    },
    {
        "id": "3d586af1.826306",
        "type": "alexa-remote-smarthome",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "492dd824-2404-4f7c-bb48-451340049f4d",
                    "action": "setBrightness",
                    "value": {
                        "type": "msg",
                        "value": "payload"
                    }
                }
            ]
        },
        "outputs": 1,
        "x": 1440,
        "y": 1540,
        "wires": [
            []
        ]
    },
    {
        "id": "16402c4e.c60e54",
        "type": "alexa-remote-smarthome",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "492dd824-2404-4f7c-bb48-451340049f4d",
                    "action": "setColor",
                    "value": {
                        "type": "msg",
                        "value": "payload"
                    }
                }
            ]
        },
        "outputs": 1,
        "x": 1420,
        "y": 1600,
        "wires": [
            []
        ]
    },
    {
        "id": "90f6a178.4cede",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "var msg1 = {payload: global.get (\"focolavamanos.conn\")};\nvar msg2 = {payload: global.get (\"focolavamanos.power\")};\nvar msg3 = {payload: global.get (\"focolavamanos.brightness\")};\nvar msg4 = {payload: global.get (\"focolavamanos.color\")};\nreturn [msg1,msg2,msg3,msg4];",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 1440,
        "wires": [
            [],
            [
                "320aac71.9c44c4"
            ],
            [
                "d7de0f14.b96788"
            ],
            [
                "a5c46f76.2ec49"
            ]
        ]
    },
    {
        "id": "a5c46f76.2ec49",
        "type": "ui_dropdown",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "label": "Color Foco Lavamanos",
        "tooltip": "",
        "place": "Select option",
        "group": "1e6be336.24c9e5",
        "order": 20,
        "width": 0,
        "height": 0,
        "passthru": true,
        "multiple": false,
        "options": [
            {
                "label": "Blanco",
                "value": "white",
                "type": "str"
            },
            {
                "label": "Azul",
                "value": "blue",
                "type": "str"
            },
            {
                "label": "Verde",
                "value": "green",
                "type": "str"
            },
            {
                "label": "Rojo",
                "value": "red",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "payload",
        "topicType": "msg",
        "x": 670,
        "y": 1600,
        "wires": [
            [
                "ebcee9b0.40aaa8"
            ]
        ]
    },
    {
        "id": "8bb0edd0.a411",
        "type": "alexa-remote-routine",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "account": "5289daa5.51ddc4",
        "routineNode": {
            "type": "music",
            "payload": {
                "device": {
                    "type": "str",
                    "value": "G2A1A60304750BPX"
                },
                "provider": {
                    "type": "str",
                    "value": "SPOTIFY"
                },
                "search": {
                    "type": "str",
                    "value": "my liked songs in shuffle mode"
                },
                "duration": {
                    "type": "num",
                    "value": ""
                }
            }
        },
        "x": 1200,
        "y": 1840,
        "wires": [
            [
                "6c5a79c1.e79af8"
            ]
        ]
    },
    {
        "id": "c15af2bb.661f1",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>0) {\n    global.set (\"chances\", global.get(\"chances\")-1);\n    global.set (\"onclic\", 1);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 1840,
        "wires": [
            [
                "8bb0edd0.a411"
            ]
        ]
    },
    {
        "id": "d121224c.9748e",
        "type": "alexa-remote-routine",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "account": "5289daa5.51ddc4",
        "routineNode": {
            "type": "speak",
            "payload": {
                "type": "regular",
                "text": {
                    "type": "msg",
                    "value": "payload"
                },
                "devices": [
                    "G2A1A60304750BPX"
                ]
            }
        },
        "x": 1400,
        "y": 1720,
        "wires": [
            []
        ]
    },
    {
        "id": "a8247ae2.105b78",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "msg.payload = global.get (\"customMsg\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1180,
        "y": 1720,
        "wires": [
            [
                "d121224c.9748e"
            ]
        ]
    },
    {
        "id": "9cafb659.2cb7b8",
        "type": "alexa-remote-routine",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "account": "5289daa5.51ddc4",
        "routineNode": {
            "type": "stop",
            "payload": {
                "devices": [
                    "G2A1A60304750BPX"
                ]
            }
        },
        "x": 1190,
        "y": 1900,
        "wires": [
            []
        ]
    },
    {
        "id": "be104b63.248538",
        "type": "alexa-remote-echo",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "get",
            "value": {
                "what": "playerInfo",
                "device": {
                    "type": "str",
                    "value": "G2A1A60304750BPX"
                }
            }
        },
        "x": 1740,
        "y": 1840,
        "wires": [
            [
                "2765d18.fdd362e"
            ]
        ]
    },
    {
        "id": "b61d95e5.79c868",
        "type": "ui_toast",
        "z": "2e3f68c7.2f3ff",
        "position": "top right",
        "displayTime": "10",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "",
        "name": "",
        "x": 2290,
        "y": 1840,
        "wires": []
    },
    {
        "id": "6c5a79c1.e79af8",
        "type": "delay",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "pauseType": "delay",
        "timeout": "6",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1380,
        "y": 1840,
        "wires": [
            [
                "be104b63.248538"
            ]
        ]
    },
    {
        "id": "2765d18.fdd362e",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "\nmsg.payload = \"23 está escuchando \"+msg.payload.infoText.title+\" de \"+msg.payload.infoText.subText1;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2000,
        "y": 1840,
        "wires": [
            [
                "b61d95e5.79c868"
            ]
        ]
    },
    {
        "id": "773b0cb6.6a0e64",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "msg.payload = global.get (\"customSong\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1180,
        "y": 1960,
        "wires": [
            [
                "6dd27188.b777b"
            ]
        ]
    },
    {
        "id": "6dd27188.b777b",
        "type": "alexa-remote-routine",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "account": "5289daa5.51ddc4",
        "routineNode": {
            "type": "music",
            "payload": {
                "device": {
                    "type": "str",
                    "value": "G2A1A60304750BPX"
                },
                "provider": {
                    "type": "str",
                    "value": "SPOTIFY"
                },
                "search": {
                    "type": "msg",
                    "value": "payload"
                },
                "duration": {
                    "type": "num",
                    "value": ""
                }
            }
        },
        "x": 1400,
        "y": 1960,
        "wires": [
            [
                "6c5a79c1.e79af8"
            ]
        ]
    },
    {
        "id": "db340685.f98798",
        "type": "alexa-remote-echo",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "command",
            "value": {
                "device": {
                    "type": "str",
                    "value": "G2A1A60304750BPX"
                },
                "what": "volume",
                "value": {
                    "type": "msg",
                    "value": "payload"
                }
            }
        },
        "x": 1190,
        "y": 2080,
        "wires": [
            []
        ]
    },
    {
        "id": "c944ee90.b1eb8",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>0) {\n    global.set (\"chances\", global.get(\"chances\")-1);\n    global.set (\"onclic\", 1);\n    global.set (\"alexaVolume\", msg.payload);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 2080,
        "wires": [
            [
                "db340685.f98798"
            ]
        ]
    },
    {
        "id": "7627fdba.2ea854",
        "type": "debug",
        "z": "64d34e70.fcce4",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 770,
        "y": 120,
        "wires": []
    },
    {
        "id": "d5965e16.edb96",
        "type": "alexa-remote-smarthome",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "81a1216d-27de-42bc-8306-84cf261bdca0",
                    "action": "lockAction",
                    "value": {
                        "type": "str",
                        "value": "unlocked"
                    }
                }
            ]
        },
        "outputs": 1,
        "x": 1010,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "2da19f75.bf95b",
        "type": "function",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "func": "if (msg.payload.predictions[0].confidence > 0.50) {\n    global.set (\"doorDetect\", msg.payload.predictions[0].userid);\n}\n\nif (msg.payload.predictions[0].userid == \"Hugo\" && msg.payload.predictions[0].confidence > 0.50 && global.get(\"location\") == \"Casa\" && global.get (\"doorRequest\") == 0) {\n    //msg.payload = \"Te damos la bienvenida, \"+msg.payload.predictions[0].userid;\n    global.set (\"doorDetect\", \"23\");\n    msg.payload = \"Te damos la bienvenida, 23\";\n    global.set (\"doorRequest\", 1);\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 740,
        "y": 460,
        "wires": [
            [
                "c08023bd.dce7f",
                "d5965e16.edb96"
            ]
        ]
    },
    {
        "id": "c08023bd.dce7f",
        "type": "delay",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "pauseType": "delay",
        "timeout": "14",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 960,
        "y": 520,
        "wires": [
            [
                "b11b614d.699f8",
                "24d67bb1.6fc574"
            ]
        ]
    },
    {
        "id": "b11b614d.699f8",
        "type": "alexa-remote-routine",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "account": "5289daa5.51ddc4",
        "routineNode": {
            "type": "speak",
            "payload": {
                "type": "regular",
                "text": {
                    "type": "msg",
                    "value": "payload"
                },
                "devices": [
                    "G2A1A60304750BPX"
                ]
            }
        },
        "x": 1200,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "a5858b0f.af3248",
        "type": "comment",
        "z": "2e3f68c7.2f3ff",
        "name": "Mensajes de 23 a usuario",
        "info": "",
        "x": 2050,
        "y": 380,
        "wires": []
    },
    {
        "id": "c6f9c156.d4e13",
        "type": "comment",
        "z": "c2c0e0c1.0deb1",
        "name": "Actualizar gráficas - 1min",
        "info": "",
        "x": 170,
        "y": 140,
        "wires": []
    },
    {
        "id": "8637398d.011b48",
        "type": "inject",
        "z": "c2c0e0c1.0deb1",
        "name": "1 min",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 110,
        "y": 180,
        "wires": [
            [
                "57458d7d.4d7cb4",
                "bc9f28ec.327378",
                "c9656ef2.2ee49",
                "1d4cef70.932a51",
                "6ac456c3.57de78",
                "74c07c98.43fe54",
                "187e90e1.cdfbdf"
            ]
        ]
    },
    {
        "id": "7bdf4c21.ce6e34",
        "type": "comment",
        "z": "c2c0e0c1.0deb1",
        "name": "Actualizar indicadores",
        "info": "",
        "x": 460,
        "y": 280,
        "wires": []
    },
    {
        "id": "8a8b42ed.8446a",
        "type": "function",
        "z": "5478817a.a9116",
        "name": "",
        "func": "if (msg.payload != false) {\n    msg.topic = global.get (\"location\");\n    global.set (\"autoOff\", 0);\n    return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 820,
        "y": 520,
        "wires": [
            [
                "da103a40.734aa8"
            ]
        ]
    },
    {
        "id": "1e756398.5fdf2c",
        "type": "http request",
        "z": "5478817a.a9116",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "http://localhost:5055/?id=25122021&lat=19.4227417&lon=-99.1483259",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1170,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "281f057a.9abdea",
        "type": "ping",
        "z": "5478817a.a9116",
        "protocol": "IPv4",
        "mode": "triggered",
        "name": "",
        "host": "",
        "timer": "60000",
        "inputs": 1,
        "x": 490,
        "y": 520,
        "wires": [
            [
                "8a8b42ed.8446a"
            ]
        ]
    },
    {
        "id": "a0be6d2e.07638",
        "type": "inject",
        "z": "5478817a.a9116",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "600",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "192.168.15.12",
        "payload": "192.168.15.12",
        "payloadType": "str",
        "x": 250,
        "y": 520,
        "wires": [
            [
                "281f057a.9abdea"
            ]
        ]
    },
    {
        "id": "95e7943a.f78888",
        "type": "comment",
        "z": "5478817a.a9116",
        "name": "Forzar envío de ubicación si se está en red local",
        "info": "",
        "x": 280,
        "y": 480,
        "wires": []
    },
    {
        "id": "19311e59.b8ca62",
        "type": "function",
        "z": "5478817a.a9116",
        "name": "",
        "func": "if (global.get (\"location\") != \"Casa\") {\n    msg.topic = \"192.168.15.12\";\n    //msg.topic2 = global.get (\"locationevent\");\n    msg.payload =\"192.168.15.12\";\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 620,
        "wires": [
            [
                "281f057a.9abdea"
            ]
        ]
    },
    {
        "id": "6828a9ca.94a2d8",
        "type": "link in",
        "z": "5478817a.a9116",
        "name": "GPS desconectado - checker",
        "links": [
            "845ab348.4f25"
        ],
        "x": 255,
        "y": 620,
        "wires": [
            [
                "19311e59.b8ca62"
            ]
        ]
    },
    {
        "id": "921e43c6.7d7b4",
        "type": "comment",
        "z": "5478817a.a9116",
        "name": "Comprobar si 23 se encuentra en casa en caso de perderse conexión",
        "info": "",
        "x": 350,
        "y": 580,
        "wires": []
    },
    {
        "id": "da103a40.734aa8",
        "type": "switch",
        "z": "5478817a.a9116",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "istype",
                "v": "undefined",
                "vt": "undefined"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 990,
        "y": 520,
        "wires": [
            [
                "1232d6b5.66e329"
            ],
            [
                "1e756398.5fdf2c"
            ]
        ]
    },
    {
        "id": "1232d6b5.66e329",
        "type": "http request",
        "z": "5478817a.a9116",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "http://192.168.15.101:5055/?id=25122021&lat=19.4227417&lon=-99.1494259",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1170,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "fd10f6bd.9e8468",
        "type": "comment",
        "z": "c2c0e0c1.0deb1",
        "name": "Analiza rostro trabajando",
        "info": "",
        "x": 770,
        "y": 1540,
        "wires": []
    },
    {
        "id": "252c01ca.fe297e",
        "type": "comment",
        "z": "c2c0e0c1.0deb1",
        "name": "Calcula tiempo de entretenimiento",
        "info": "",
        "x": 200,
        "y": 1760,
        "wires": []
    },
    {
        "id": "358dfcf4.d0e8f4",
        "type": "comment",
        "z": "c2c0e0c1.0deb1",
        "name": "Analiza rostro en entretenimiento",
        "info": "",
        "x": 790,
        "y": 1760,
        "wires": []
    },
    {
        "id": "6ac456c3.57de78",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "Sumar tiempos",
        "func": "\nif (global.get (\"onRecordW\") == 1) {\n    global.set (\"worktime\", global.get (\"worktime\") + 60000);\n}\nif (global.get (\"onRecordE\") == 1) {\n    global.set (\"chilltime\", global.get (\"chilltime\") + 60000);\n}\nif (global.get (\"onRecordO\") == 1) {\n    global.set (\"outsidetime\", global.get (\"outsidetime\") + 60000);\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 440,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "fbf9201f.a8762",
        "type": "alexa-remote-routine",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "account": "5289daa5.51ddc4",
        "routineNode": {
            "type": "speak",
            "payload": {
                "type": "regular",
                "text": {
                    "type": "msg",
                    "value": "payload"
                },
                "devices": [
                    "G2A1A60304750BPX"
                ]
            }
        },
        "x": 1720,
        "y": 2440,
        "wires": [
            []
        ]
    },
    {
        "id": "5cb33803.1ce028",
        "type": "alexa-remote-routine",
        "z": "66ae481f.c36c48",
        "name": "",
        "account": "5289daa5.51ddc4",
        "routineNode": {
            "type": "speak",
            "payload": {
                "type": "regular",
                "text": {
                    "type": "msg",
                    "value": "payload"
                },
                "devices": [
                    "G2A1A60304750BPX"
                ]
            }
        },
        "x": 820,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "719633ca.e6a68c",
        "type": "alexa-remote-routine",
        "z": "66ae481f.c36c48",
        "name": "",
        "account": "5289daa5.51ddc4",
        "routineNode": {
            "type": "speak",
            "payload": {
                "type": "regular",
                "text": {
                    "type": "msg",
                    "value": "payload"
                },
                "devices": [
                    "G2A1A60304750BPX"
                ]
            }
        },
        "x": 820,
        "y": 660,
        "wires": [
            []
        ]
    },
    {
        "id": "299f5538.c3689a",
        "type": "alexa-remote-routine",
        "z": "66ae481f.c36c48",
        "name": "",
        "account": "5289daa5.51ddc4",
        "routineNode": {
            "type": "speak",
            "payload": {
                "type": "regular",
                "text": {
                    "type": "msg",
                    "value": "payload"
                },
                "devices": [
                    "G2A1A60304750BPX"
                ]
            }
        },
        "x": 820,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "f7a7bde0.05628",
        "type": "debug",
        "z": "66ae481f.c36c48",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 490,
        "y": 240,
        "wires": []
    },
    {
        "id": "16aa531a.b9027d",
        "type": "comment",
        "z": "64d34e70.fcce4",
        "name": "Cambiar resoluciones",
        "info": "",
        "x": 160,
        "y": 740,
        "wires": []
    },
    {
        "id": "9289498b.f984e8",
        "type": "inject",
        "z": "64d34e70.fcce4",
        "name": "On Demand",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 150,
        "y": 800,
        "wires": [
            [
                "1ea98935.f6f997",
                "22e2cb5e.61b914",
                "28f3c82a.483508",
                "b6ed3b7a.418cd8",
                "ec91eee5.32133",
                "34f0cb3.6499434"
            ]
        ]
    },
    {
        "id": "1ea98935.f6f997",
        "type": "http request",
        "z": "64d34e70.fcce4",
        "name": "Desktop",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "http://192.168.15.110/control?var=framesize&val=8",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 380,
        "y": 800,
        "wires": [
            []
        ]
    },
    {
        "id": "22e2cb5e.61b914",
        "type": "http request",
        "z": "64d34e70.fcce4",
        "name": "Bookshelf",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "http://192.168.15.111/control?var=framesize&val=8",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 380,
        "y": 840,
        "wires": [
            []
        ]
    },
    {
        "id": "28f3c82a.483508",
        "type": "http request",
        "z": "64d34e70.fcce4",
        "name": "Kitchen",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "http://192.168.15.115/control?var=framesize&val=8",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 380,
        "y": 1000,
        "wires": [
            []
        ]
    },
    {
        "id": "b6ed3b7a.418cd8",
        "type": "http request",
        "z": "64d34e70.fcce4",
        "name": "Door",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "http://192.168.15.114/control?var=framesize&val=10",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 370,
        "y": 960,
        "wires": [
            [
                "93bed55f.931f98"
            ]
        ]
    },
    {
        "id": "ec91eee5.32133",
        "type": "http request",
        "z": "64d34e70.fcce4",
        "name": "Backdoor",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "http://192.168.15.113/control?var=framesize&val=8",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 380,
        "y": 920,
        "wires": [
            []
        ]
    },
    {
        "id": "34f0cb3.6499434",
        "type": "http request",
        "z": "64d34e70.fcce4",
        "name": "Livingroom",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "http://192.168.15.112/control?var=framesize&val=8",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 390,
        "y": 880,
        "wires": [
            []
        ]
    },
    {
        "id": "c5a40502.36d668",
        "type": "ui_template",
        "z": "2e3f68c7.2f3ff",
        "group": "f0d39309.5d582",
        "name": "Upload",
        "order": 2,
        "width": 6,
        "height": 5,
        "format": "<h1>Sube una selfie</h1>\n<p>Para poder controlar el departamento de 23, deberás subir una selfie. La cantidad de clics asignada por foto dependerá de las emociones registradas y su intensidad. Si no subes una selfie, los comandos no se ejecutaran.</p>\n<form action=\"/upload\" method=\"POST\" enctype=\"multipart/form-data\">\n    <input type=\"file\" name=\"myFile\" />\n    <input type=\"submit\" value=\"Submit\">\n</form>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "x": 620,
        "y": 3280,
        "wires": [
            []
        ]
    },
    {
        "id": "81d41edb.4f6e7",
        "type": "comment",
        "z": "2e3f68c7.2f3ff",
        "name": "Templates",
        "info": "",
        "x": 620,
        "y": 3220,
        "wires": []
    },
    {
        "id": "bad77caa.58faa",
        "type": "ui_template",
        "z": "2e3f68c7.2f3ff",
        "group": "8feab182.895b9",
        "name": "Streaming",
        "order": 2,
        "width": 0,
        "height": 0,
        "format": "<iframe width=\"300\" height=\"200\" src=\"https://www.youtube.com/embed/live_stream?channel=UCMi2704d37XG1fpLPASQhIA\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "x": 410,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "c834a0e3.90e39",
        "type": "alexa-remote-smarthome",
        "z": "66ae481f.c36c48",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "4801ec0c-27df-4f9c-aea9-39146080d320",
                    "action": "turnOff"
                },
                {
                    "entity": "c2b044c3-e3cc-4106-bca8-f4fb8ff1a3ed",
                    "action": "turnOff"
                },
                {
                    "entity": "f5dc9412-34d5-4bae-8732-73e19cde5161",
                    "action": "turnOff"
                }
            ]
        },
        "outputs": 1,
        "x": 840,
        "y": 1220,
        "wires": [
            [
                "e631af56.611da"
            ]
        ]
    },
    {
        "id": "9801a114.dae13",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "every 30 minutes",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1800",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 270,
        "y": 1220,
        "wires": [
            [
                "cb09f5eb.cdb908"
            ]
        ]
    },
    {
        "id": "cb09f5eb.cdb908",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "if ((global.get (\"isAwakenCount\") == 0 && global.get (\"autoOff\") == 1) || (global.get (\"isAwakenCount\") == 0 && global.get (\"onRecordO\") == 1 && global.get(\"autoOff\") == 1)) {\n    global.set (\"autoOff\", 2);\n    global.set (\"focococinaControl\", 0);\n    global.set (\"focolavamanosControl\", 0);\n    return msg; \n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 1220,
        "wires": [
            [
                "8b531311.e4cca",
                "c834a0e3.90e39",
                "ce030c24.28283",
                "caf4285d.35b3a8"
            ]
        ]
    },
    {
        "id": "345d7cfc.05ac74",
        "type": "comment",
        "z": "66ae481f.c36c48",
        "name": "Apagar todo al salir de casa",
        "info": "",
        "x": 280,
        "y": 1180,
        "wires": []
    },
    {
        "id": "c0d2149a.8138e8",
        "type": "ui_toast",
        "z": "66ae481f.c36c48",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "",
        "name": "",
        "x": 1090,
        "y": 1400,
        "wires": []
    },
    {
        "id": "8b531311.e4cca",
        "type": "change",
        "z": "66ae481f.c36c48",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Rutina de apagado automático activada",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 820,
        "y": 1400,
        "wires": [
            [
                "c0d2149a.8138e8",
                "f502af36.8a622"
            ]
        ]
    },
    {
        "id": "f502af36.8a622",
        "type": "alexa-remote-routine",
        "z": "66ae481f.c36c48",
        "name": "",
        "account": "5289daa5.51ddc4",
        "routineNode": {
            "type": "speak",
            "payload": {
                "type": "regular",
                "text": {
                    "type": "msg",
                    "value": "payload"
                },
                "devices": [
                    "G2A1A60304750BPX"
                ]
            }
        },
        "x": 1080,
        "y": 1440,
        "wires": [
            []
        ]
    },
    {
        "id": "e631af56.611da",
        "type": "debug",
        "z": "66ae481f.c36c48",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1050,
        "y": 1220,
        "wires": []
    },
    {
        "id": "e8f35a1a.61c968",
        "type": "comment",
        "z": "66ae481f.c36c48",
        "name": "Rutina despertador",
        "info": "",
        "x": 230,
        "y": 1460,
        "wires": []
    },
    {
        "id": "517f2395.3c35dc",
        "type": "comment",
        "z": "64d34e70.fcce4",
        "name": "Calcular alarma",
        "info": "",
        "x": 140,
        "y": 500,
        "wires": []
    },
    {
        "id": "82ae6e95.99dc7",
        "type": "function",
        "z": "64d34e70.fcce4",
        "name": "Set alarm 7:30",
        "func": "global.set (\"alarm\", global.get(\"midnight\")+ 27000000);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 540,
        "wires": [
            []
        ]
    },
    {
        "id": "798eb798.fc3798",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "Check weekdays at 07:31",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "31 07 * * 1,2,3,4,5",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 280,
        "y": 1500,
        "wires": [
            [
                "93f9532e.c408"
            ]
        ]
    },
    {
        "id": "93f9532e.c408",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "if (global.get (\"isAwaken\") == 0 && global.get (\"wakeUp\") == 0) {\n    //global.set (\"isAwaken\", 1);\n    global.set (\"alarmVolume\", 25);\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 1500,
        "wires": [
            [
                "4707d124.7f6ff"
            ]
        ]
    },
    {
        "id": "e0361b0f.635b68",
        "type": "alexa-remote-routine",
        "z": "66ae481f.c36c48",
        "name": "",
        "account": "5289daa5.51ddc4",
        "routineNode": {
            "type": "music",
            "payload": {
                "device": {
                    "type": "str",
                    "value": "G2A1A60304750BPX"
                },
                "provider": {
                    "type": "str",
                    "value": "SPOTIFY"
                },
                "search": {
                    "type": "msg",
                    "value": "payload"
                },
                "duration": {
                    "type": "num",
                    "value": "600"
                }
            }
        },
        "x": 1080,
        "y": 1620,
        "wires": [
            [
                "f095a06f.466f",
                "901db8c7.ce6de8"
            ]
        ]
    },
    {
        "id": "4707d124.7f6ff",
        "type": "alexa-remote-echo",
        "z": "66ae481f.c36c48",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "command",
            "value": {
                "device": {
                    "type": "str",
                    "value": "G2A1A60304750BPX"
                },
                "what": "volume",
                "value": {
                    "type": "num",
                    "value": "25"
                }
            }
        },
        "x": 820,
        "y": 1500,
        "wires": [
            [
                "b7e53660.8c6e78"
            ]
        ]
    },
    {
        "id": "b7e53660.8c6e78",
        "type": "change",
        "z": "66ae481f.c36c48",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "23, buenos días. Es momento de despertar y arrancar tu día.",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1070,
        "y": 1500,
        "wires": [
            [
                "396e573a.1db068"
            ]
        ]
    },
    {
        "id": "396e573a.1db068",
        "type": "alexa-remote-routine",
        "z": "66ae481f.c36c48",
        "name": "",
        "account": "5289daa5.51ddc4",
        "routineNode": {
            "type": "speak",
            "payload": {
                "type": "regular",
                "text": {
                    "type": "msg",
                    "value": "topic"
                },
                "devices": [
                    "G2A1A60304750BPX"
                ]
            }
        },
        "x": 820,
        "y": 1560,
        "wires": [
            [
                "aa7367bc.c84de8"
            ]
        ]
    },
    {
        "id": "2a2ea08d.b2e47",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "msg.payload = \"Estocolmo sindrome playlist in shuffle mode\";\nglobal.set (\"snoozeAlarm\", global.get (\"timeNow\") + 900000); // 15 min\n//global.set (\"snoozeAlarm\", global.get (\"timeNow\") + 240000); //5min\nif (global.get (\"location\") == \"Casa\"){\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 800,
        "y": 1620,
        "wires": [
            [
                "e0361b0f.635b68"
            ]
        ]
    },
    {
        "id": "aa7367bc.c84de8",
        "type": "delay",
        "z": "66ae481f.c36c48",
        "name": "",
        "pauseType": "delay",
        "timeout": "8",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1070,
        "y": 1560,
        "wires": [
            [
                "2a2ea08d.b2e47"
            ]
        ]
    },
    {
        "id": "ab4a7c4b.4506",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "10 min",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "600",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 220,
        "y": 1740,
        "wires": [
            [
                "36d037c0.c6fc08"
            ]
        ]
    },
    {
        "id": "36d037c0.c6fc08",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "\nif (global.get(\"isAwaken\") == 0 && global.get (\"wakeUp\") == 0 && (global.get (\"snoozeAlarm\") < global.get (\"timeNow\")) && global.get (\"location\") == \"Casa\") {\n    if (global.get (\"alarmVolume\") < 36) {\n        global.set (\"alarmVolume\", global.get (\"alarmVolume\") + 5);\n    }\n    msg.payload = global.get (\"alarmVolume\");\n    msg.topic = \"23, es momento de despertar. Para detener la alarma presentate en la oficina o en la sala. Cada vez que no lo hagas, se te hará un cargo a tu cuenta bancaria igual al nivel de volumen de Alexa convertido a pesos.\";\n    global.set (\"lastPayment\", [global.get (\"alarmVolume\"), \"Alarma\"]);\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 1740,
        "wires": [
            [
                "16fc4a88.c50175",
                "193c9aee.05e2f5",
                "7dd852d9.d93ddc"
            ]
        ]
    },
    {
        "id": "7dd852d9.d93ddc",
        "type": "alexa-remote-echo",
        "z": "66ae481f.c36c48",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "command",
            "value": {
                "device": {
                    "type": "str",
                    "value": "G2A1A60304750BPX"
                },
                "what": "volume",
                "value": {
                    "type": "msg",
                    "value": "payload"
                }
            }
        },
        "x": 810,
        "y": 1740,
        "wires": [
            []
        ]
    },
    {
        "id": "f095a06f.466f",
        "type": "alexa-remote-echo",
        "z": "66ae481f.c36c48",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "command",
            "value": {
                "device": {
                    "type": "str",
                    "value": "G2A1A60304750BPX"
                },
                "what": "shuffle",
                "value": {
                    "type": "bool",
                    "value": "true"
                }
            }
        },
        "x": 820,
        "y": 1680,
        "wires": [
            []
        ]
    },
    {
        "id": "5e271648.1697b8",
        "type": "ui_toast",
        "z": "66ae481f.c36c48",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "",
        "name": "",
        "x": 1090,
        "y": 1740,
        "wires": []
    },
    {
        "id": "901db8c7.ce6de8",
        "type": "change",
        "z": "66ae481f.c36c48",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Alarma sonando",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1080,
        "y": 1680,
        "wires": [
            [
                "5e271648.1697b8"
            ]
        ]
    },
    {
        "id": "c5670898.1e9ba8",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 240,
        "y": 1560,
        "wires": [
            [
                "ddf0d173.a8ac9"
            ]
        ]
    },
    {
        "id": "ddf0d173.a8ac9",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "global.set (\"isAwaken\", 0);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 1560,
        "wires": [
            []
        ]
    },
    {
        "id": "33506688.8d469a",
        "type": "comment",
        "z": "66ae481f.c36c48",
        "name": "Primer café",
        "info": "",
        "x": 230,
        "y": 1820,
        "wires": []
    },
    {
        "id": "f628a7d1.ee7868",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "global.set (\"isAwaken\", 1);\nglobal.set (\"autoOff\", 0);\nglobal.set (\"lastDetect\", global.get (\"timeNow\"));\nif (global.get (\"firstCafe\") == 0 && msg.payload.predictions[0].userid == \"Hugo\") {\n    global.set (\"firstCafe\", 1);\n}\n\nif (global.get (\"wakeUp\") == 0 && msg.payload.predictions[0].userid == \"Hugo\") {\n    global.set (\"firstDetect\", global.get (\"timeNow\"));\n    global.set (\"wakeUp\", 1);\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 720,
        "y": 1220,
        "wires": [
            [
                "f8db9251.dec3b"
            ]
        ]
    },
    {
        "id": "5cdb58a7.051a48",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "60min entre las 7 y las 12",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "0 7-11 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 280,
        "y": 1880,
        "wires": [
            [
                "717b3436.ba224c"
            ]
        ]
    },
    {
        "id": "717b3436.ba224c",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "\nif (global.get (\"firstCafe\") == 1 && global.get (\"location\") == \"Casa\") {\n    global.set (\"firstCafe\", 2);\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 1880,
        "wires": [
            [
                "2793b75d.a66bc8"
            ]
        ]
    },
    {
        "id": "2793b75d.a66bc8",
        "type": "link out",
        "z": "66ae481f.c36c48",
        "name": "first cafe",
        "links": [
            "715424e0.343e3c"
        ],
        "x": 755,
        "y": 1880,
        "wires": []
    },
    {
        "id": "9fe015fb.3b97f8",
        "type": "alexa-remote-routine",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "account": "5289daa5.51ddc4",
        "routineNode": {
            "type": "speak",
            "payload": {
                "type": "regular",
                "text": {
                    "type": "msg",
                    "value": "payload"
                },
                "devices": [
                    "G2A1A60304750BPX"
                ]
            }
        },
        "x": 1400,
        "y": 3100,
        "wires": [
            [
                "be996bf3.ee7bd8"
            ]
        ]
    },
    {
        "id": "c45cbd28.df519",
        "type": "alexa-remote-routine",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "account": "5289daa5.51ddc4",
        "routineNode": {
            "type": "speak",
            "payload": {
                "type": "regular",
                "text": {
                    "type": "msg",
                    "value": "payload"
                },
                "devices": [
                    "G2A1A60304750BPX"
                ]
            }
        },
        "x": 1720,
        "y": 2720,
        "wires": [
            []
        ]
    },
    {
        "id": "23808d24.ff28b2",
        "type": "comment",
        "z": "c2c0e0c1.0deb1",
        "name": "Send Overall",
        "info": "",
        "x": 150,
        "y": 2100,
        "wires": []
    },
    {
        "id": "45fc12dc.3aa49c",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "msg.payload=[{\n    \"series\": [\"Enojo\", \"Disgusto\", \"Miedo\", \"Felicidad\", \"Tristeza\", \"Sorpresa\", \"Neutral\" ],\n    \"data\": [ [global.get (\"angry23\")], [global.get (\"disgust23\")], [global.get (\"fear23\")], [global.get (\"happyy23\")], [global.get (\"sad23\")], [global.get (\"surprise23\")], [global.get (\"neutral23\")]],\n    \"labels\": [\"Emociones\" ]\n}];\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 400,
        "y": 820,
        "wires": [
            [
                "4edc17a1.4bb1f8"
            ]
        ]
    },
    {
        "id": "4edc17a1.4bb1f8",
        "type": "ui_chart",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "group": "292e4d7c.349622",
        "order": 1,
        "width": 6,
        "height": 4,
        "label": "Durante el día",
        "chartType": "bar",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "x": 720,
        "y": 820,
        "wires": [
            []
        ]
    },
    {
        "id": "b9719e8e.8e491",
        "type": "inject",
        "z": "c2c0e0c1.0deb1",
        "name": "Every 10 minutes",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "600",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 170,
        "y": 820,
        "wires": [
            [
                "45fc12dc.3aa49c",
                "9052f2a4.dfb26"
            ]
        ]
    },
    {
        "id": "f0ebe0e.d30f82",
        "type": "comment",
        "z": "c2c0e0c1.0deb1",
        "name": "Update Emotions BarChar",
        "info": "",
        "x": 170,
        "y": 780,
        "wires": []
    },
    {
        "id": "7981b3d9.9f3b7c",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "var trigger = 0;\nif (global.get (\"location\") == \"Casa\") {\n    trigger = Math.random() * (1- 0 + 1) + 0;\n    trigger = Math.floor (trigger);\n}\nvar emotions = [\n    global.get (\"angry23b\"),\n    global.get (\"disgust23b\"),\n    global.get (\"fear23b\"),\n    global.get (\"happyy23b\"),\n    global.get (\"sad23b\"),\n    global.get (\"surprise23b\"),\n    global.get (\"neutral23b\")\n];\n\nvar maxEmotion = Math.max(...emotions);\nvar index = 0;\nfor (var i = 0; i < 7; i++){\n    if (emotions[i] == maxEmotion){\n        index = i;\n    }\n}\nvar nombre = \"\";\nswitch (index) {\n    case 0:\n        nombre = \"Enojo\";\n        global.set (\"dominant\", \"metal en modo aleatorio\");\n        break;\n    case 1:\n        nombre = \"Molestia\";\n         global.set (\"dominant\", \"post punk en modo aleatorio\");\n        break;\n    case 2:\n        nombre = \"Miedo\";\n         global.set (\"dominant\", \"industrial en modo aleatorio\");\n        break;\n    case 3:\n        nombre = \"Felicidad\";\n         global.set (\"dominant\", \"canciones felices en modo aleatorio\");\n        break;\n    case 4:\n        nombre = \"Tristeza\";\n         global.set (\"dominant\", \"canciones tristes en modo aleatorio\");\n        break;\n    case 5:\n        nombre = \"Sorpresa\";\n        global.set (\"dominant\", \"funk en modo aleatorio\");\n        break;\n    case 6:\n        nombre = \"Neutral\";\n        global.set (\"dominant\", \"trance en modo aleaetorio\");\n        break;\n}\n\nif ((global.get (\"confidenceW\") > 0 || global.get (\"confidenceE\") > 0) && trigger == 1){\n    msg.payload = \"He detectado que tu estado de animo es \" + nombre;\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 420,
        "y": 2260,
        "wires": [
            [
                "23a18152.70ff0e",
                "58bfcb7a.08f154"
            ]
        ]
    },
    {
        "id": "23a18152.70ff0e",
        "type": "alexa-remote-routine",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "account": "5289daa5.51ddc4",
        "routineNode": {
            "type": "speak",
            "payload": {
                "type": "regular",
                "text": {
                    "type": "msg",
                    "value": "payload"
                },
                "devices": [
                    "G2A1A60304750BPX"
                ]
            }
        },
        "x": 740,
        "y": 2260,
        "wires": [
            []
        ]
    },
    {
        "id": "32bfea01.607fe6",
        "type": "comment",
        "z": "c2c0e0c1.0deb1",
        "name": "Detonador de actividades segun emociones",
        "info": "",
        "x": 250,
        "y": 2200,
        "wires": []
    },
    {
        "id": "45ebfc27.de0dc4",
        "type": "comment",
        "z": "66ae481f.c36c48",
        "name": "Rutina de trabajo completada",
        "info": "",
        "x": 280,
        "y": 1980,
        "wires": []
    },
    {
        "id": "88d3cd8b.0d409",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "20min",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1200",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 220,
        "y": 2040,
        "wires": [
            [
                "f5f7db43.b6d838",
                "4252960d.4f6fc8"
            ]
        ]
    },
    {
        "id": "f5f7db43.b6d838",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "if (global.get (\"worktime\")/1000/60/60 > 8 && global.get(\"isAwaken\") == 1 && global.get (\"workDone\") == 0) {\n    msg.payload = \"23, has completado tu cuota de horas de trabajo. Es momento de descansar. \";\n    global.set (\"workDone\", 1);\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 2040,
        "wires": [
            [
                "e5784265.33f88",
                "8df94dc6.58f38"
            ]
        ]
    },
    {
        "id": "e5784265.33f88",
        "type": "alexa-remote-routine",
        "z": "66ae481f.c36c48",
        "name": "",
        "account": "5289daa5.51ddc4",
        "routineNode": {
            "type": "speak",
            "payload": {
                "type": "regular",
                "text": {
                    "type": "msg",
                    "value": "payload"
                },
                "devices": [
                    "G2A1A60304750BPX"
                ]
            }
        },
        "x": 820,
        "y": 2040,
        "wires": [
            []
        ]
    },
    {
        "id": "80b45da8.cba22",
        "type": "alexa-remote-smarthome",
        "z": "66ae481f.c36c48",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "a93da952-4d7f-446a-82b5-a18acc421354",
                    "action": "setBrightness",
                    "value": {
                        "type": "num",
                        "value": "80"
                    }
                },
                {
                    "entity": "a93da952-4d7f-446a-82b5-a18acc421354",
                    "action": "setColorTemperature",
                    "value": {
                        "type": "str",
                        "value": "white"
                    }
                }
            ]
        },
        "outputs": 1,
        "x": 1100,
        "y": 2100,
        "wires": [
            []
        ]
    },
    {
        "id": "8df94dc6.58f38",
        "type": "delay",
        "z": "66ae481f.c36c48",
        "name": "",
        "pauseType": "delay",
        "timeout": "10",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 800,
        "y": 2100,
        "wires": [
            [
                "80b45da8.cba22"
            ]
        ]
    },
    {
        "id": "9052f2a4.dfb26",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "msg.payload=[{\n    \"series\": [\"Enojo\", \"Disgusto\", \"Miedo\", \"Felicidad\", \"Tristeza\", \"Sorpresa\", \"Neutral\" ],\n    \"data\": [ [global.get (\"angry23b\")], [global.get (\"disgust23b\")], [global.get (\"fear23b\")], [global.get (\"happyy23b\")], [global.get (\"sad23b\")], [global.get (\"surprise23b\")], [global.get (\"neutral23b\")]],\n    \"labels\": [\"Emociones\" ]\n}];\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 400,
        "y": 880,
        "wires": [
            [
                "4221613d.90c4c"
            ]
        ]
    },
    {
        "id": "4221613d.90c4c",
        "type": "ui_chart",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "group": "292e4d7c.349622",
        "order": 2,
        "width": 6,
        "height": 4,
        "label": "En la última hora",
        "chartType": "bar",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "x": 730,
        "y": 880,
        "wires": [
            []
        ]
    },
    {
        "id": "ce030c24.28283",
        "type": "alexa-remote-routine",
        "z": "66ae481f.c36c48",
        "name": "",
        "account": "5289daa5.51ddc4",
        "routineNode": {
            "type": "stop",
            "payload": {
                "devices": [
                    "G2A1A60304750BPX"
                ]
            }
        },
        "x": 810,
        "y": 1280,
        "wires": [
            []
        ]
    },
    {
        "id": "4b12ff4f.e9322",
        "type": "comment",
        "z": "2e3f68c7.2f3ff",
        "name": "Acciones de Alexa",
        "info": "",
        "x": 650,
        "y": 1680,
        "wires": []
    },
    {
        "id": "3e7ae867.0109d8",
        "type": "comment",
        "z": "2e3f68c7.2f3ff",
        "name": "Tomar café",
        "info": "",
        "x": 620,
        "y": 2960,
        "wires": []
    },
    {
        "id": "fdc27105.4c1ae",
        "type": "comment",
        "z": "2e3f68c7.2f3ff",
        "name": "Comprobar existencia en DB",
        "info": "",
        "x": 1000,
        "y": 3360,
        "wires": []
    },
    {
        "id": "cfd698f7.670ee8",
        "type": "comment",
        "z": "2e3f68c7.2f3ff",
        "name": "Guardado y análisis de foto",
        "info": "",
        "x": 670,
        "y": 3580,
        "wires": []
    },
    {
        "id": "94c758f5.bd29f8",
        "type": "comment",
        "z": "2e3f68c7.2f3ff",
        "name": "Asignación de clics",
        "info": "",
        "x": 630,
        "y": 3880,
        "wires": []
    },
    {
        "id": "8adf810b.3c535",
        "type": "comment",
        "z": "66ae481f.c36c48",
        "name": "Detector isAwaken y autoOff",
        "info": "",
        "x": 280,
        "y": 3000,
        "wires": []
    },
    {
        "id": "6ebdea70.1a76c4",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "1 min",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 210,
        "y": 3060,
        "wires": [
            [
                "546a32c0.262b6c"
            ]
        ]
    },
    {
        "id": "546a32c0.262b6c",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "if (global.get (\"lastDetect\") + 300000 < global.get (\"timeNow\") && global.get (\"onRecordW\") == 0 && global.get (\"onRecordE\") == 0) {\n    global.set (\"confidenceE\", 0);\n    global.set (\"confidenceW\", 0);\n    msg.payload =\"ausente\";\n}\nif (global.get (\"lastDetect\") + 300000 < global.get (\"timeNow\")) {\n    global.set (\"isAwaken\", 0);\n    if (global.get (\"isAwakenCount\")>0) {\n        global.set (\"isAwakenCount\", parseInt(global.get (\"isAwakenCount\")*0.9));\n        global.set (\"isAwakenCount\", global.get (\"isAwakenCount\")-1);\n    }\n    global.set (\"isAwakenCount\", parseInt(global.get (\"isAwakenCount\")*0.9));\n    global.set (\"isAwakenCount\", global.get (\"isAwakenCount\")-1);\n    if (global.get (\"autoOff\") == 0) {\n        global.set (\"autoOff\", 1);\n    }\n}\nif (global.get (\"isAwakenCount\") < 0) {\n    global.set (\"isAwakenCount\", 0);\n}\nmsg.payload = global.get (\"isAwakenCount\");\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 3060,
        "wires": [
            [
                "1f76cf48.821e51"
            ]
        ]
    },
    {
        "id": "5a69915a.29d93",
        "type": "ui_text",
        "z": "c2c0e0c1.0deb1",
        "group": "457235cd.67e71c",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "{{msg.payload}}",
        "format": "",
        "layout": "col-center",
        "x": 670,
        "y": 540,
        "wires": []
    },
    {
        "id": "74c07c98.43fe54",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "msg.event = global.get (\"locationevent\");\nmsg.geofence = global.get (\"location\");\nif (msg.geofence == \"Casa\") {\n    msg.payload = \"23 está en: \"+msg.geofence;\n    if (global.get (\"confidenceW\") > 0) {\n        msg.payload = msg.payload + \", trabajando\";\n    } else if (global.get (\"confidenceE\") > 0 ) {\n        msg.payload = msg.payload + \", viendo la tele\";\n    } else if (global.get (\"isAwaken\") == 0) {\n         msg.payload = msg.payload + \", durmiendo\";\n    } else {\n        msg.payload = msg.payload + \", en el baño\";\n    }\n} else if (msg.event == \"geofenceExit\") {\n    msg.payload = \"23 está afuera\";\n}else {\n    msg.payload = \"23 está en: \"+msg.geofence;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 420,
        "y": 540,
        "wires": [
            [
                "5a69915a.29d93",
                "8ada4147.a8acc"
            ]
        ]
    },
    {
        "id": "5d83eae6.f69cd4",
        "type": "comment",
        "z": "c2c0e0c1.0deb1",
        "name": "Mostrador de ubicaciones",
        "info": "",
        "x": 470,
        "y": 500,
        "wires": []
    },
    {
        "id": "8ada4147.a8acc",
        "type": "ui_text",
        "z": "c2c0e0c1.0deb1",
        "group": "510df368.d3c8dc",
        "order": 4,
        "width": 3,
        "height": 1,
        "name": "",
        "label": "{{msg.payload}}",
        "format": "",
        "layout": "col-center",
        "x": 670,
        "y": 580,
        "wires": []
    },
    {
        "id": "d288da75.d46dc8",
        "type": "inject",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1040,
        "y": 320,
        "wires": [
            [
                "c1209b9.e61b868"
            ]
        ]
    },
    {
        "id": "c1209b9.e61b868",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "8h",
        "func": "global.set(\"worktime\", global.get(\"worktime\") + 28800000);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1230,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "2f92c9a1.5bd956",
        "type": "comment",
        "z": "c2c0e0c1.0deb1",
        "name": "Add time",
        "info": "",
        "x": 1040,
        "y": 280,
        "wires": []
    },
    {
        "id": "c1e61015.957eb",
        "type": "debug",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 410,
        "y": 1920,
        "wires": []
    },
    {
        "id": "85bef549.b7af68",
        "type": "inject",
        "z": "64d34e70.fcce4",
        "name": "Single inject",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 150,
        "y": 40,
        "wires": [
            [
                "5b463db6.f2b9d4"
            ]
        ]
    },
    {
        "id": "5b463db6.f2b9d4",
        "type": "function",
        "z": "64d34e70.fcce4",
        "name": "Single variable inject - maintenance",
        "func": "//global.set (\"sceneNext\", global.get (\"timeNow\") + 1000);\n//global.set (\"mesaLamp\", 0);\nglobal.set (\"isAwakenCount\", 500);\nglobal.set (\"isAwaken\", 1);\nglobal.set (\"wakeUp\",1);\nglobal.set (\"lastDetect\",global.get (\"timeNow\"));\n//global.set (\"autoOff\", 1);\n//global.set (\"process\", 1);\n//global.set (\"sunriseTomorrow\", global.get (\"sunrise\") + 86400000);\n//global.set (\"focococinaControl\", 0);\n//global.set (\"focolavamanosControl\", 0);\n//global.set (\"alarmCount\", 0);\n//global.set (\"alarmtTweet\", 0);\n//global.set (\"desveloCount\", 0);\n\n//global.set (\"desveloAnoche\",0);\n//global.set (\"desveloAnocheHora\",0);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 520,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "6d29c64.84a3338",
        "type": "comment",
        "z": "66ae481f.c36c48",
        "name": "Monitorear Aparatos",
        "info": "",
        "x": 250,
        "y": 3180,
        "wires": []
    },
    {
        "id": "30588b3a.ca17a4",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "7:30",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "30 07 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 210,
        "y": 3240,
        "wires": [
            [
                "41c14bd9.574214"
            ]
        ]
    },
    {
        "id": "d3ac8b4b.f69f88",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "9:00",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "00 09 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 210,
        "y": 3280,
        "wires": [
            [
                "41c14bd9.574214"
            ]
        ]
    },
    {
        "id": "27d7c68a.e56f0a",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "13:00",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "00 13 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 210,
        "y": 3320,
        "wires": [
            [
                "41c14bd9.574214"
            ]
        ]
    },
    {
        "id": "9eac5ece.fe257",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "1h -17-23",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "0 17-23 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 230,
        "y": 3360,
        "wires": [
            [
                "41c14bd9.574214"
            ]
        ]
    },
    {
        "id": "1eadc61b.cb3e3a",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "2:00",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "00 02 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 210,
        "y": 3400,
        "wires": [
            [
                "41c14bd9.574214"
            ]
        ]
    },
    {
        "id": "5eaf488f.ccadd8",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "6:10",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "10 06 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 210,
        "y": 3440,
        "wires": [
            [
                "41c14bd9.574214"
            ]
        ]
    },
    {
        "id": "41c14bd9.574214",
        "type": "link out",
        "z": "66ae481f.c36c48",
        "name": "Device Status In",
        "links": [
            "ed6fdc15.5f0fe",
            "1968969c.c131c9",
            "73d147ea.8dc648"
        ],
        "x": 455,
        "y": 3240,
        "wires": []
    },
    {
        "id": "31e7ca3a.b2f036",
        "type": "comment",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "info": "",
        "x": 600,
        "y": 4280,
        "wires": []
    },
    {
        "id": "1baa5b60.4117c5",
        "type": "ui_button",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "group": "74be730e.33ff4c",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "¿Que canción escucha 23?",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 660,
        "y": 4340,
        "wires": [
            [
                "6cdc4f77.b24b8"
            ]
        ]
    },
    {
        "id": "6cdc4f77.b24b8",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get(\"chances\")>0) {\n    global.set (\"chances\", global.get(\"chances\")-1);\n    global.set (\"onclic\", 1);\n    return msg;\n} else {\n    global.set (\"onclic\", 1);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 4340,
        "wires": [
            [
                "71b2a965.67edb8"
            ]
        ]
    },
    {
        "id": "71b2a965.67edb8",
        "type": "alexa-remote-echo",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "get",
            "value": {
                "what": "playerInfo",
                "device": {
                    "type": "str",
                    "value": "G2A1A60304750BPX"
                }
            }
        },
        "x": 1220,
        "y": 4340,
        "wires": [
            [
                "4781a070.0310c"
            ]
        ]
    },
    {
        "id": "196782d.a6eab7d",
        "type": "ui_toast",
        "z": "2e3f68c7.2f3ff",
        "position": "top right",
        "displayTime": "10",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "",
        "name": "",
        "x": 1970,
        "y": 4340,
        "wires": []
    },
    {
        "id": "4781a070.0310c",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (msg.payload.state == \"PLAYING\") {\n    msg.payload = \"23 está escuchando \"+msg.payload.infoText.title+\" de \"+msg.payload.infoText.subText1;\n} else {\n    msg.payload = \"23 no está escuchando nada en este momento\";\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1480,
        "y": 4340,
        "wires": [
            [
                "d9f02fd5.4699a"
            ]
        ]
    },
    {
        "id": "d9f02fd5.4699a",
        "type": "delay",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1700,
        "y": 4340,
        "wires": [
            [
                "196782d.a6eab7d"
            ]
        ]
    },
    {
        "id": "193e1ad2.d09015",
        "type": "alexa-remote-echo",
        "z": "64d34e70.fcce4",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "get",
            "value": {
                "what": "playerInfo",
                "device": {
                    "type": "str",
                    "value": "G2A1A60304750BPX"
                }
            }
        },
        "x": 520,
        "y": 460,
        "wires": [
            [
                "dc9994b1.adbe48"
            ]
        ]
    },
    {
        "id": "dc9994b1.adbe48",
        "type": "function",
        "z": "64d34e70.fcce4",
        "name": "",
        "func": "global.set (\"alexaVolume\", msg.payload.volume.volume);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 780,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "1968969c.c131c9",
        "type": "link in",
        "z": "64d34e70.fcce4",
        "name": "Device Status Out",
        "links": [
            "41c14bd9.574214"
        ],
        "x": 95,
        "y": 320,
        "wires": [
            [
                "a7fe4c8.facfab",
                "8b193dbe.8c93a",
                "193e1ad2.d09015",
                "2a8adfe0.6d951"
            ]
        ]
    },
    {
        "id": "9b21073.ae3c1f8",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "msg.payload = global.get (\"alexaVolume\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 2080,
        "wires": [
            [
                "dcb434ae.6f52b8"
            ]
        ]
    },
    {
        "id": "73d147ea.8dc648",
        "type": "link in",
        "z": "2e3f68c7.2f3ff",
        "name": "Device Status Out",
        "links": [
            "41c14bd9.574214"
        ],
        "x": 115,
        "y": 260,
        "wires": [
            [
                "d6c05286.9a7a6"
            ]
        ]
    },
    {
        "id": "d6c05286.9a7a6",
        "type": "delay",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 160,
        "y": 340,
        "wires": [
            [
                "eb54213c.d19fe",
                "34435c10.199fa4",
                "35a029c7.8ae3c6",
                "2af5eda5.fad932",
                "4f3bbc66.3399f4",
                "90f6a178.4cede",
                "9b21073.ae3c1f8"
            ]
        ]
    },
    {
        "id": "11d7b3e5.a8bfcc",
        "type": "inject",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "props": [
            {
                "p": "topic",
                "v": "",
                "vt": "date"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 260,
        "y": 660,
        "wires": [
            [
                "4029698e.61c9e8"
            ]
        ]
    },
    {
        "id": "4029698e.61c9e8",
        "type": "function",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "func": "\nmsg.payload = global.get (\"doorDetect\") + \", para poder abrir la puerta, deberás sonreir. El mundo necesita gente feliz. Tomando foto en: 3, 2, 1.\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 620,
        "wires": [
            [
                "d2698777.c20e88"
            ]
        ]
    },
    {
        "id": "d2698777.c20e88",
        "type": "alexa-remote-routine",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "account": "5289daa5.51ddc4",
        "routineNode": {
            "type": "speak",
            "payload": {
                "type": "regular",
                "text": {
                    "type": "msg",
                    "value": "payload"
                },
                "devices": [
                    "G2A1A60304750BPX"
                ]
            }
        },
        "x": 760,
        "y": 620,
        "wires": [
            [
                "2b660ac3.e1f806"
            ]
        ]
    },
    {
        "id": "d66547a8.61eef8",
        "type": "http request",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "method": "GET",
        "ret": "bin",
        "paytoqs": "ignore",
        "url": "http://192.168.15.113/capture",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1190,
        "y": 620,
        "wires": [
            [
                "ede636f3.19b268",
                "631a6e76.9f1a8"
            ]
        ]
    },
    {
        "id": "aef8cabd.c303f8",
        "type": "file",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "filename": "",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "setbymsg",
        "x": 730,
        "y": 740,
        "wires": [
            [
                "9a597c43.a3c8d"
            ]
        ]
    },
    {
        "id": "153efa33.e615e6",
        "type": "exec",
        "z": "83fb4ff5.ce7c8",
        "command": "",
        "addpay": "payload",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 1170,
        "y": 740,
        "wires": [
            [
                "8027ec1f.0034"
            ],
            [],
            []
        ]
    },
    {
        "id": "9a597c43.a3c8d",
        "type": "function",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "func": "//msg.filename = \"S:\\\\Captura\\\\work.jpg\"\nmsg.media = msg.payload;\nmsg.payload = \"python S:\\\\DeepFace\\\\Code\\\\FaceDetector-f\\\\fdf.py -i \"+msg.filename;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 960,
        "y": 740,
        "wires": [
            [
                "153efa33.e615e6"
            ]
        ]
    },
    {
        "id": "8027ec1f.0034",
        "type": "switch",
        "z": "83fb4ff5.ce7c8",
        "name": "rc.code",
        "property": "rc.code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 540,
        "y": 800,
        "wires": [
            [
                "4db14cb0.51f284"
            ],
            []
        ]
    },
    {
        "id": "4db14cb0.51f284",
        "type": "json",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 730,
        "y": 800,
        "wires": [
            [
                "1a5e09b0.774176",
                "e5ca290c.40bba8"
            ]
        ]
    },
    {
        "id": "ede636f3.19b268",
        "type": "function",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "func": "msg.filename = \"S:\\\\Captura\\\\Puerta\\\\\" + global.get (\"timeNow\") + \".jpg\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 740,
        "wires": [
            [
                "aef8cabd.c303f8"
            ]
        ]
    },
    {
        "id": "1a5e09b0.774176",
        "type": "function",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "func": "\nswitch (msg.payload.angry.dominant_emotion) {\n    case \"angry\":\n        msg.topic2 = \"Enojo\";\n        global.set (\"lastPayment\", [parseInt(msg.payload.angry.emotion), \"Puerta\"]);\n        msg.payload = global.get (\"doorDetect\") + \", tu emoción se ha detectado como: \" + msg.topic2 + \", la cual no es una emoción valida para salir. Debido a la falta, se ha realizado un cargo de \" + global.get (\"lastPayment[0]\") + \" pesos. Intenta de nuevo.\";\n        break;\n    case \"disgust\":\n        msg.topic2 = \"Disgusto\";\n        global.set (\"lastPayment\", [parseInt(msg.payload.disgust.emotion), \"Puerta\"]);\n        msg.payload = global.get (\"doorDetect\") + \", tu emoción se ha detectado como: \" + msg.topic2 + \", la cual no es una emoción valida para salir. Debido a la falta, se ha realizado un cargo de \" + global.get (\"lastPayment[0]\") + \" pesos. Intenta de nuevo.\";\n        break;\n    case \"fear\":\n        msg.topic2 = \"Miedo\";\n        global.set (\"lastPayment\", [parseInt(msg.payload.fear.emotion), \"Puerta\"]);\n        msg.payload = global.get (\"doorDetect\") + \", tu emoción se ha detectado como: \" + msg.topic2 + \", la cual no es una emoción valida para salir. Debido a la falta, se ha realizado un cargo de \" + global.get (\"lastPayment[0]\") + \" pesos. Intenta de nuevo.\";\n        break;\n    case \"happy\":\n        msg.topic2 = \"Felicidad\";\n        global.set (\"lastPayment\", [0, \"Puerta\"]);\n        msg.payload = global.get (\"doorDetect\") + \", tu emoción se ha detectado como: \" + msg.topic2 + \". Gracias por ser feliz. Ahora puedes salir.\"\n        break;\n    case \"sad\":\n        msg.topic2 = \"Tristeza\";\n        global.set (\"lastPayment\", [parseInt(msg.payload.sad.emotion), \"Puerta\"]);\n        msg.payload = global.get (\"doorDetect\") + \", tu emoción se ha detectado como: \" + msg.topic2 + \", la cual no es una emoción valida para salir. Debido a la falta, se ha realizado un cargo de \" + global.get (\"lastPayment[0]\") + \" pesos. Intenta de nuevo.\";\n        break;\n    case \"surprise\":\n        msg.topic2 = \"Sorpresa\";\n        global.set (\"lastPayment\", [parseInt(msg.payload.surprise.emotion), \"Puerta\"]);\n        msg.payload = global.get (\"doorDetect\") + \", tu emoción se ha detectado como: \" + msg.topic2 + \", la cual no es una emoción valida para salir. Debido a la falta, se ha realizado un cargo de \" + global.get (\"lastPayment[0]\") + \" pesos. Intenta de nuevo.\";\n        break;\n    case \"neutral\":\n        msg.topic2 = \"Neutral\";\n        global.set (\"lastPayment\", [parseInt(msg.payload.neutral.emotion), \"Puerta\"]);\n        msg.payload = global.get (\"doorDetect\") + \", tu emoción se ha detectado como: \" + msg.topic2 + \", la cual no es una emoción valida para salir. Debido a la falta, se ha realizado un cargo de \" + global.get (\"lastPayment[0]\") + \" pesos. Intenta de nuevo.\";\n        break;\n}\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 960,
        "y": 800,
        "wires": [
            [
                "7bee3335.804d5c",
                "51e41cbb.611474",
                "d9963541.f4dd58"
            ]
        ]
    },
    {
        "id": "2b660ac3.e1f806",
        "type": "delay",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "pauseType": "delay",
        "timeout": "12",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 960,
        "y": 620,
        "wires": [
            [
                "d66547a8.61eef8",
                "a4b701d0.168b"
            ]
        ]
    },
    {
        "id": "7bee3335.804d5c",
        "type": "alexa-remote-routine",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "account": "5289daa5.51ddc4",
        "routineNode": {
            "type": "speak",
            "payload": {
                "type": "regular",
                "text": {
                    "type": "msg",
                    "value": "payload"
                },
                "devices": [
                    "G2A1A60304750BPX"
                ]
            }
        },
        "x": 1200,
        "y": 800,
        "wires": [
            []
        ]
    },
    {
        "id": "90fe8ff4.b629e",
        "type": "function",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "func": "if (msg.topic2 == \"Felicidad\") {\n    msg.payload = \"open\";\n    return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 740,
        "y": 880,
        "wires": [
            [
                "2c7913cf.a9c03c",
                "8c57075e.99ab58",
                "af7230a2.591fb"
            ]
        ]
    },
    {
        "id": "2c7913cf.a9c03c",
        "type": "alexa-remote-smarthome",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "81a1216d-27de-42bc-8306-84cf261bdca0",
                    "action": "lockAction",
                    "value": {
                        "type": "str",
                        "value": "unlocked"
                    }
                }
            ]
        },
        "outputs": 1,
        "x": 1010,
        "y": 880,
        "wires": [
            []
        ]
    },
    {
        "id": "74624bd3.a53794",
        "type": "alexa-remote-routine",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "account": "5289daa5.51ddc4",
        "routineNode": {
            "type": "speak",
            "payload": {
                "type": "regular",
                "text": {
                    "type": "msg",
                    "value": "payload"
                },
                "devices": [
                    "G2A1A60304750BPX"
                ]
            }
        },
        "x": 760,
        "y": 680,
        "wires": [
            []
        ]
    },
    {
        "id": "631a6e76.9f1a8",
        "type": "function",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "func": "msg.payload = \"Estoy enviando tu foto al servidor central para ser analizada, espera un momento\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 680,
        "wires": [
            [
                "74624bd3.a53794"
            ]
        ]
    },
    {
        "id": "51e41cbb.611474",
        "type": "delay",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "pauseType": "delay",
        "timeout": "7",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 540,
        "y": 880,
        "wires": [
            [
                "90fe8ff4.b629e"
            ]
        ]
    },
    {
        "id": "228fab48.740834",
        "type": "comment",
        "z": "83fb4ff5.ce7c8",
        "name": "Solicitar Felicidad",
        "info": "",
        "x": 280,
        "y": 560,
        "wires": []
    },
    {
        "id": "f1fc0744.409188",
        "type": "function",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "func": "if (msg.payload.predictions[0].confidence > 0.60) {\n    global.set (\"doorDetect\", msg.payload.predictions[0].userid);\n    global.set (\"lastDetect\", global.get (\"timeNow\"));\n}\nvar trigger = 0;\nglobal.set (\"isAwaken\", 1);\nglobal.set (\"wakeUp\", 1);\nif (msg.payload.predictions[0].userid == \"Hugo\" && msg.payload.predictions[0].confidence > 0.60 && global.get(\"location\") == \"Casa\") {\n    //msg.payload = \"Hasta luego, \"+msg.payload.predictions[0].userid;\n    global.set (\"doorDetect\", \"23\");\n}\n\nif (global.get (\"doorRequest\") == 0) {\n    trigger = Math.random() * (9 - 0 + 1) + 0;\n    trigger = Math.floor (trigger);\n    msg.payload2 = msg.payload;\n    msg.payload = trigger;\n    global.set (\"doorRequested\", trigger);\n    global.set (\"doorRequest\", 1);\n    global.set (\"lastDoorRequest\", global.set (\"timeNow\"));\n    return msg;\n}\n\n/*\n//Returns a random number between min (inclusive) and max (inclusive)\n\nfunction between(min, max) {  \n  return Math.floor(\n    Math.random() * (max - min + 1) + min\n  )\n}\n\n// Example:\n\nconsole.log(  \n  between(10, 200)\n)\n// 200 (this may vary for you :) )\n\n*/",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 740,
        "y": 180,
        "wires": [
            [
                "188fa61a.345d0a",
                "6cd3ddff.38e1d4",
                "4b6d3c89.17e574"
            ]
        ]
    },
    {
        "id": "188fa61a.345d0a",
        "type": "switch",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "2",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "3",
                "vt": "str"
            },
            {
                "t": "gte",
                "v": "4",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 5,
        "x": 950,
        "y": 200,
        "wires": [
            [
                "a1b4ef27.a11d9"
            ],
            [
                "1ab2797.72f7c87"
            ],
            [
                "9958b13.fc49f5"
            ],
            [
                "52a84283.b8a03c",
                "a5c7e235.93292"
            ],
            [
                "c40f4cff.26842"
            ]
        ]
    },
    {
        "id": "30e20ed4.a5cb62",
        "type": "comment",
        "z": "83fb4ff5.ce7c8",
        "name": "sonrie,clima,cafe,medicina,ok",
        "info": "",
        "x": 1020,
        "y": 140,
        "wires": []
    },
    {
        "id": "a1b4ef27.a11d9",
        "type": "link out",
        "z": "83fb4ff5.ce7c8",
        "name": "sonrie1",
        "links": [
            "9cb27476.acee98"
        ],
        "x": 1135,
        "y": 180,
        "wires": []
    },
    {
        "id": "9cb27476.acee98",
        "type": "link in",
        "z": "83fb4ff5.ce7c8",
        "name": "sonrie2",
        "links": [
            "a1b4ef27.a11d9"
        ],
        "x": 215,
        "y": 620,
        "wires": [
            [
                "4029698e.61c9e8"
            ]
        ]
    },
    {
        "id": "6cd3ddff.38e1d4",
        "type": "debug",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 970,
        "y": 80,
        "wires": []
    },
    {
        "id": "d9963541.f4dd58",
        "type": "delay",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "pauseType": "delay",
        "timeout": "15",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 540,
        "y": 1020,
        "wires": [
            [
                "2af15e36.409bb2"
            ]
        ]
    },
    {
        "id": "bf2a31b3.39141",
        "type": "link in",
        "z": "83fb4ff5.ce7c8",
        "name": "clima2",
        "links": [
            "1ab2797.72f7c87"
        ],
        "x": 215,
        "y": 1240,
        "wires": [
            [
                "ae1fe7d5.38c0c8"
            ]
        ]
    },
    {
        "id": "301732fe.4522ce",
        "type": "comment",
        "z": "83fb4ff5.ce7c8",
        "name": "Calidad del aire",
        "info": "",
        "x": 280,
        "y": 1160,
        "wires": []
    },
    {
        "id": "1ab2797.72f7c87",
        "type": "link out",
        "z": "83fb4ff5.ce7c8",
        "name": "clima1",
        "links": [
            "bf2a31b3.39141"
        ],
        "x": 1135,
        "y": 220,
        "wires": []
    },
    {
        "id": "34cb2992.dea0e6",
        "type": "inject",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 260,
        "y": 1280,
        "wires": [
            [
                "ae1fe7d5.38c0c8"
            ]
        ]
    },
    {
        "id": "ae1fe7d5.38c0c8",
        "type": "http request",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "http://api.openweathermap.org/data/2.5/air_pollution?lat=19.432633&lon=-99.133331&appid=fe401d1af6d12fa5ab2b9977c7c85776",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 550,
        "y": 1240,
        "wires": [
            [
                "c50cf846.8f20a8"
            ]
        ]
    },
    {
        "id": "c50cf846.8f20a8",
        "type": "json",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 730,
        "y": 1240,
        "wires": [
            [
                "2e7f292.0b987d6",
                "1bb4b3f1.f515ec"
            ]
        ]
    },
    {
        "id": "2e7f292.0b987d6",
        "type": "debug",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 950,
        "y": 1300,
        "wires": []
    },
    {
        "id": "1bb4b3f1.f515ec",
        "type": "function",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "func": "if (global.get (\"doorRequest\") == 1) {\n    msg.payload2 = msg.payload;\n    msg.payload = msg.payload.list[0].main.aqi;\n    return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 960,
        "y": 1200,
        "wires": [
            [
                "edf90310.86dbc"
            ]
        ]
    },
    {
        "id": "edf90310.86dbc",
        "type": "switch",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "2",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "3",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "4",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "5",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 5,
        "x": 1170,
        "y": 1280,
        "wires": [
            [
                "cf90aecc.aef5e"
            ],
            [
                "63ce44ad.80f25c"
            ],
            [
                "370a574b.0a29c8"
            ],
            [
                "7c7a6268.a758bc"
            ],
            [
                "134d6b10.f71375"
            ]
        ]
    },
    {
        "id": "cf90aecc.aef5e",
        "type": "function",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "func": "var payment = (1000 - msg.payload2.list[0].components.co) / 10;\nmsg.payload = global.get (\"doorDetect\") + \", la calidad del aire es excelente. Tu gobierno y las empresas que patrocinan tu departamento han trabajado muy duro para lograrlo. Los espacios exteriores limpios son un privilegio, no un derecho. Se ha realizado un cargo de \" + payment + \" pesos a tu cuenta bancaria para permitirte salir. Que lo disfrutes\";\npayment = payment.toFixed(2);\nmsg.topic = payment;\nglobal.set (\"lastPayment\", [payment, \"Puerta\"]);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1440,
        "y": 1260,
        "wires": [
            [
                "609ca286.4cf0ec",
                "8f8479f4.80c4c8",
                "871f8964.1534a8"
            ]
        ]
    },
    {
        "id": "609ca286.4cf0ec",
        "type": "alexa-remote-routine",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "account": "5289daa5.51ddc4",
        "routineNode": {
            "type": "speak",
            "payload": {
                "type": "regular",
                "text": {
                    "type": "msg",
                    "value": "payload"
                },
                "devices": [
                    "G2A1A60304750BPX"
                ]
            }
        },
        "x": 1720,
        "y": 1420,
        "wires": [
            []
        ]
    },
    {
        "id": "8f8479f4.80c4c8",
        "type": "delay",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "pauseType": "delay",
        "timeout": "20",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1700,
        "y": 1260,
        "wires": [
            [
                "b9ddd809.5c2b58"
            ]
        ]
    },
    {
        "id": "b9ddd809.5c2b58",
        "type": "alexa-remote-smarthome",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "81a1216d-27de-42bc-8306-84cf261bdca0",
                    "action": "lockAction",
                    "value": {
                        "type": "str",
                        "value": "unlocked"
                    }
                }
            ]
        },
        "outputs": 1,
        "x": 1970,
        "y": 1260,
        "wires": [
            [
                "e70fa2a.d30e56"
            ]
        ]
    },
    {
        "id": "e70fa2a.d30e56",
        "type": "function",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "func": "global.set (\"doorRequest\", 0);\nmsg.topic= \"INSERT INTO payments (charge, device) VALUES ('\"+global.get (\"lastPayment[0]\")+\"','\"+global.get (\"lastPayment[1]\")+\"')\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2260,
        "y": 1260,
        "wires": [
            [
                "12ab76a9.6c0449"
            ]
        ]
    },
    {
        "id": "12ab76a9.6c0449",
        "type": "mysql",
        "z": "83fb4ff5.ce7c8",
        "mydb": "1a27214b.e39c3f",
        "name": "",
        "x": 2550,
        "y": 1260,
        "wires": [
            []
        ]
    },
    {
        "id": "63ce44ad.80f25c",
        "type": "function",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "func": "var payment = (1000 - msg.payload2.list[0].components.co) / 10;\npayment = payment.toFixed(2);\nmsg.payload = global.get (\"doorDetect\") + \", la calidad del aire es buena. Tu gobierno y las empresas que patrocinan tu departamento han trabajado muy duro para lograrlo. Los espacios exteriores limpios son un privilegio, no un derecho. Se ha realizado un cargo de \" + payment + \" pesos a tu cuenta bancaria para permitirte salir. Que lo disfrutes\";\nmsg.topic = payment;\nglobal.set (\"lastPayment\", [payment, \"Puerta\"]);\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1440,
        "y": 1300,
        "wires": [
            [
                "8f8479f4.80c4c8",
                "609ca286.4cf0ec",
                "871f8964.1534a8"
            ]
        ]
    },
    {
        "id": "370a574b.0a29c8",
        "type": "function",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "func": "var payment = (1000 - msg.payload2.list[0].components.co) / 10;\npayment = payment.toFixed(2);\nmsg.payload = global.get (\"doorDetect\") + \", la calidad del aire es aceptable. Tu gobierno y las empresas que patrocinan tu departamento han trabajado muy duro para lograrlo. Los espacios exteriores limpios son un privilegio, no un derecho. Se ha realizado un cargo de \" + payment + \" pesos a tu cuenta bancaria para permitirte salir. Que lo disfrutes\";\nmsg.topic = payment;\nglobal.set (\"lastPayment\", [payment, \"Puerta\"]);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1440,
        "y": 1340,
        "wires": [
            [
                "609ca286.4cf0ec",
                "8f8479f4.80c4c8",
                "871f8964.1534a8"
            ]
        ]
    },
    {
        "id": "7c7a6268.a758bc",
        "type": "function",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "func": "if (msg.payload2.list[0].components.co < 1000) {\n    var payment = (1000 - msg.payload2.list[0].components.co) / 10;\n    payment = payment.toFixed(2);\n    msg.payload = global.get (\"doorDetect\") + \", la calidad del aire es mala, sin embargo, tu gobierno y las empresas que patrocinan tu departamento han trabajado muy duro para controlar la contaminación. Los espacios exteriores son un privilegio, no un derecho. Se ha realizado un cargo de \" + payment + \" pesos a tu cuenta bancaria para permitirte salir. Cuida tu salud\";\n    msg.topic = payment;\n    global.set (\"lastPayment\", [payment, \"Puerta\"]);\n} else{\n    msg.payload = global.get (\"doorDetect\") + \", la calidad del aire es mala. Tu gobierno y las empresas que patrocinan tu departamento no han logrado reducir la contaminación el día de hoy. Podría deberse a tus habitos de consumo. Reduce tu uso energético, piensa en el mundo. Puedes salir, cuida tu salud y evita realziar actividad física intensa.\"\n    msg.topic = 0;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1440,
        "y": 1380,
        "wires": [
            [
                "8f8479f4.80c4c8",
                "609ca286.4cf0ec",
                "e6f753e0.c2f5f"
            ]
        ]
    },
    {
        "id": "134d6b10.f71375",
        "type": "function",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "func": "\nmsg.payload = global.get (\"doorDetect\") + \", el estado de contaminación del aire es muy intenso. No es recomendado salir. Toma las debidas precauciones, me gusta que estes vivo.\";\nmsg.topic = 0;\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1440,
        "y": 1420,
        "wires": [
            [
                "8f8479f4.80c4c8",
                "609ca286.4cf0ec",
                "e6f753e0.c2f5f"
            ]
        ]
    },
    {
        "id": "187e90e1.cdfbdf",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "msg.payload = global.get (\"lastPayment\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 420,
        "y": 640,
        "wires": [
            [
                "88b42154.43287",
                "ed5d3e22.51fe2"
            ]
        ]
    },
    {
        "id": "ed5d3e22.51fe2",
        "type": "ui_text",
        "z": "c2c0e0c1.0deb1",
        "group": "510df368.d3c8dc",
        "order": 5,
        "width": 3,
        "height": 2,
        "name": "",
        "label": "Se ha hecho un cargo de {{msg.payload[0]}} MXN realizado por {{msg.payload[1]}}",
        "format": "",
        "layout": "col-center",
        "x": 670,
        "y": 640,
        "wires": []
    },
    {
        "id": "88b42154.43287",
        "type": "debug",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 680,
        "y": 720,
        "wires": []
    },
    {
        "id": "e5ca290c.40bba8",
        "type": "debug",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 950,
        "y": 840,
        "wires": []
    },
    {
        "id": "e87cded6.9b12e",
        "type": "link out",
        "z": "83fb4ff5.ce7c8",
        "name": "Door request cafe",
        "links": [
            "715424e0.343e3c"
        ],
        "x": 1555,
        "y": 260,
        "wires": []
    },
    {
        "id": "52a84283.b8a03c",
        "type": "function",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "func": "if (global.get (\"promomeds_i\") == 0) {\n    global.set (\"promomeds_i\", 1);\n    global.set (\"snoozemedspromo\", global.get (\"timeNow\")+ 120000);\n    msg.payload = \"23,  para poder salir del departamento, es necesario que consumas el medicamento promocional. Hay que mantener felices a nuestros patrocinadores.\"\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1180,
        "y": 300,
        "wires": [
            [
                "b11b614d.699f8"
            ]
        ]
    },
    {
        "id": "cee0f122.bfbdf",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "6",
        "payloadType": "num",
        "x": 250,
        "y": 1140,
        "wires": [
            [
                "b3164182.2ea4b",
                "e518874f.54c678"
            ]
        ]
    },
    {
        "id": "8d29c165.3452a",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "if (msg.payload == \"Hugo\") {\n    msg.payload = \"23\";\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 960,
        "y": 1040,
        "wires": [
            [
                "986f3bc1.d1a1e8",
                "4037532a.9aef3c"
            ]
        ]
    },
    {
        "id": "fda4cb45.549af8",
        "type": "comment",
        "z": "5478817a.a9116",
        "name": "Simular ubicaciones",
        "info": "",
        "x": 190,
        "y": 720,
        "wires": []
    },
    {
        "id": "c463a5cd.92b378",
        "type": "inject",
        "z": "5478817a.a9116",
        "name": "Zocalo",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "http://192.168.15.101:5055/?id=25122021&lat=19.432633&lon=-99.133331",
        "payloadType": "str",
        "x": 150,
        "y": 780,
        "wires": [
            [
                "bebe98e0.23ad48"
            ]
        ]
    },
    {
        "id": "bebe98e0.23ad48",
        "type": "http request",
        "z": "5478817a.a9116",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "{{{payload}}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 510,
        "y": 780,
        "wires": [
            []
        ]
    },
    {
        "id": "8f2c7f28.0e1e2",
        "type": "inject",
        "z": "5478817a.a9116",
        "name": "Oxxo",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "http://192.168.15.101:5055/?id=25122021&lat=19.425124&lon=-99.147636",
        "payloadType": "str",
        "x": 150,
        "y": 820,
        "wires": [
            [
                "bebe98e0.23ad48"
            ]
        ]
    },
    {
        "id": "774367.1cf9ec98",
        "type": "inject",
        "z": "5478817a.a9116",
        "name": "Junto a casa",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "http://192.168.15.101:5055/?id=25122021&lat=19.4227417&lon=-99.1494259",
        "payloadType": "str",
        "x": 170,
        "y": 860,
        "wires": [
            [
                "bebe98e0.23ad48"
            ]
        ]
    },
    {
        "id": "7569a9ee.5fe8e8",
        "type": "inject",
        "z": "5478817a.a9116",
        "name": "Casa",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "http://192.168.15.101:5055/?id=25122021&lat=19.4227417&lon=-99.1483259",
        "payloadType": "str",
        "x": 150,
        "y": 900,
        "wires": [
            [
                "bebe98e0.23ad48"
            ]
        ]
    },
    {
        "id": "2af15e36.409bb2",
        "type": "function",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "func": "global.set (\"doorRequest\", 0);\nmsg.topic= \"INSERT INTO payments (charge, device) VALUES ('\"+global.get (\"lastPayment[0]\")+\"','\"+global.get (\"lastPayment[1]\")+\"')\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 740,
        "y": 1020,
        "wires": [
            [
                "373ddd89.d1ada2"
            ]
        ]
    },
    {
        "id": "373ddd89.d1ada2",
        "type": "mysql",
        "z": "83fb4ff5.ce7c8",
        "mydb": "1a27214b.e39c3f",
        "name": "",
        "x": 990,
        "y": 1020,
        "wires": [
            []
        ]
    },
    {
        "id": "69a14f.ccaa6eb",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "if (global.get (\"cafeorden\") == 6) {\n    msg.topic= \"INSERT INTO payments (charge, device) VALUES ('\"+global.get (\"lastPayment[0]\")+\"','\"+global.get (\"lastPayment[1]\")+\"')\";\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1380,
        "y": 3180,
        "wires": [
            [
                "db5ed317.c58bc"
            ]
        ]
    },
    {
        "id": "db5ed317.c58bc",
        "type": "mysql",
        "z": "2e3f68c7.2f3ff",
        "mydb": "1a27214b.e39c3f",
        "name": "",
        "x": 1670,
        "y": 3180,
        "wires": [
            []
        ]
    },
    {
        "id": "193c9aee.05e2f5",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "global.set (\"lastPayment\", [msg.payload, \"Alarma\"]);\nmsg.topic= \"INSERT INTO payments (charge, device) VALUES ('\"+global.get (\"lastPayment[0]\")+\"','\"+global.get (\"lastPayment[1]\")+\"')\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 800,
        "y": 1800,
        "wires": [
            [
                "ae8c7269.850c3"
            ]
        ]
    },
    {
        "id": "ae8c7269.850c3",
        "type": "mysql",
        "z": "66ae481f.c36c48",
        "mydb": "1a27214b.e39c3f",
        "name": "",
        "x": 1090,
        "y": 1800,
        "wires": [
            []
        ]
    },
    {
        "id": "691032c5.3af37c",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "msg.topic= \"INSERT INTO payments (charge, device) VALUES ('\"+global.get (\"lastPayment[0]\")+\"','\"+global.get (\"lastPayment[1]\")+\"')\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 800,
        "y": 2140,
        "wires": [
            [
                "4ca31826.fa91a8"
            ]
        ]
    },
    {
        "id": "4ca31826.fa91a8",
        "type": "mysql",
        "z": "66ae481f.c36c48",
        "mydb": "1a27214b.e39c3f",
        "name": "",
        "x": 1090,
        "y": 2140,
        "wires": [
            []
        ]
    },
    {
        "id": "34fcde0a.467462",
        "type": "inject",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 540,
        "y": 1060,
        "wires": [
            [
                "2af15e36.409bb2"
            ]
        ]
    },
    {
        "id": "f53eb5e2.40fd18",
        "type": "ui_template",
        "z": "c2c0e0c1.0deb1",
        "group": "3d11139a.e2adac",
        "name": "Cargos semanales",
        "order": 1,
        "width": 6,
        "height": 4,
        "format": "<iframe src=\"http://192.168.15.101:3000/d-solo/t_Z8jS0nk/usuarios?orgId=1&from=1643082299602&to=1643103899602&theme=dark&panelId=12\" width=\"300\" height=\"200\" frameborder=\"0\"></iframe>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "x": 170,
        "y": 3040,
        "wires": [
            []
        ]
    },
    {
        "id": "9958b13.fc49f5",
        "type": "function",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "func": "msg.payload = global.get (\"doorDetect\") + \", para poder salir del departamento, deberás beber un delicioso café.\";\nglobal.set (\"takecoffe\", 1);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1180,
        "y": 260,
        "wires": [
            [
                "b11b614d.699f8",
                "9eba4735.21aac8"
            ]
        ]
    },
    {
        "id": "9eba4735.21aac8",
        "type": "delay",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "pauseType": "delay",
        "timeout": "8",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1380,
        "y": 260,
        "wires": [
            [
                "e87cded6.9b12e"
            ]
        ]
    },
    {
        "id": "269d2fd4.a35de",
        "type": "function",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "func": "if (global.get (\"promomeds_i\") == 2) {\n    msg.payload = global.get (\"doorDetect\") + \", hasta luego. Gracias por cumplir tu cuota de medicamentos promocionales\";\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1380,
        "y": 340,
        "wires": [
            [
                "b11b614d.699f8",
                "d5965e16.edb96",
                "24d67bb1.6fc574"
            ]
        ]
    },
    {
        "id": "a5c7e235.93292",
        "type": "delay",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1180,
        "y": 340,
        "wires": [
            [
                "269d2fd4.a35de"
            ]
        ]
    },
    {
        "id": "96185d6.73f5da",
        "type": "http request",
        "z": "64d34e70.fcce4",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "http://192.168.15.114/control?var=wb_mode&val=4",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 830,
        "y": 960,
        "wires": [
            []
        ]
    },
    {
        "id": "93bed55f.931f98",
        "type": "delay",
        "z": "64d34e70.fcce4",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 580,
        "y": 960,
        "wires": [
            [
                "96185d6.73f5da"
            ]
        ]
    },
    {
        "id": "24d67bb1.6fc574",
        "type": "delay",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "pauseType": "delay",
        "timeout": "15",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1600,
        "y": 380,
        "wires": [
            [
                "af31bdc9.6e2b4"
            ]
        ]
    },
    {
        "id": "af31bdc9.6e2b4",
        "type": "function",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "func": "global.set (\"doorRequest\", 0);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1820,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "c37660f2.7ee34",
        "type": "debug",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1140,
        "y": 3220,
        "wires": []
    },
    {
        "id": "b3164182.2ea4b",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "global.set (\"cafeterastate\",msg.payload);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 800,
        "y": 840,
        "wires": [
            [
                "9f3fb876.be92a8"
            ]
        ]
    },
    {
        "id": "9f3fb876.be92a8",
        "type": "link out",
        "z": "66ae481f.c36c48",
        "name": "cafe response",
        "links": [
            "715424e0.343e3c"
        ],
        "x": 1055,
        "y": 840,
        "wires": []
    },
    {
        "id": "b94bb96a.2087f8",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "msg.payload = parseInt(msg.payload);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 840,
        "wires": [
            [
                "b3164182.2ea4b"
            ]
        ]
    },
    {
        "id": "be996bf3.ee7bd8",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "\nif (global.get  (\"cafeterastate\") >=4 && global.get  (\"cafeterastate\") <= 6 && global.get (\"doorRequest\") == 1) {\n    global.set (\"doorRequest\", 0);\n    if (global.get (\"doorDetect\") == \"Hugo\") {\n        msg.payload = \"23, ahora puedes dejar el departamento\";\n        return msg;\n    } else {\n        msg.payload = global.get (\"doorDetect\") + \", ahora puedes dejar el departamento\";\n        return msg;\n    }\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1700,
        "y": 3100,
        "wires": [
            [
                "788370a8.664d5"
            ]
        ]
    },
    {
        "id": "788370a8.664d5",
        "type": "alexa-remote-smarthome",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "81a1216d-27de-42bc-8306-84cf261bdca0",
                    "action": "lockAction",
                    "value": {
                        "type": "str",
                        "value": "unlocked"
                    }
                }
            ]
        },
        "outputs": 1,
        "x": 1990,
        "y": 3100,
        "wires": [
            []
        ]
    },
    {
        "id": "4cbb43fc.6f3c6c",
        "type": "mqtt in",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "topic": "hugo/se/bookshelf",
        "qos": "2",
        "datatype": "auto",
        "broker": "4c35078.987c1f8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "x": 150,
        "y": 1320,
        "wires": [
            [
                "78887020.4ceeb"
            ]
        ]
    },
    {
        "id": "78887020.4ceeb",
        "type": "json",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "property": "payload",
        "action": "obj",
        "pretty": false,
        "x": 410,
        "y": 1320,
        "wires": [
            [
                "8aa8b732.48b7e8",
                "f628a7d1.ee7868",
                "40c9cee7.836be"
            ]
        ]
    },
    {
        "id": "8aa8b732.48b7e8",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "\nif (msg.payload.predictions[0].userid  == \"Hugo\" && msg.payload.predictions[0].confidence > 0.6) {\n    global.set (\"lastDetect\", global.get (\"timeNow\"));\n    global.get (\"wakeUp\") == 1;\n    global.set (\"isAwaken\", 1);\n    global.set (\"isAwakenCount\", global.get (\"isAwakenCount\") + 1);\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 720,
        "y": 1320,
        "wires": [
            []
        ]
    },
    {
        "id": "ad1a997d.808768",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "if (global.get (\"numberPeople\") == 1) {\n    msg.payload = \"23, he detectado que tienes visitas. Debes registrar \" + global.get (\"numberPeople\") + \" nuevo usuario.\";\n    return msg;\n} else if (global.get (\"numberPeople\") > 1) {\n    msg.payload = \"23, he detectado que tienes visitas. Debes registrar \" + global.get (\"numberPeople\") + \" nuevos usuarios.\";\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 960,
        "y": 1080,
        "wires": [
            [
                "4037532a.9aef3c",
                "d54ee550.034f68"
            ]
        ]
    },
    {
        "id": "4037532a.9aef3c",
        "type": "debug",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1190,
        "y": 1000,
        "wires": []
    },
    {
        "id": "d54ee550.034f68",
        "type": "alexa-remote-routine",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "account": "5289daa5.51ddc4",
        "routineNode": {
            "type": "speak",
            "payload": {
                "type": "regular",
                "text": {
                    "type": "msg",
                    "value": "payload"
                },
                "devices": [
                    "G2A1A60304750BPX"
                ]
            }
        },
        "x": 1200,
        "y": 1080,
        "wires": [
            []
        ]
    },
    {
        "id": "16fc4a88.c50175",
        "type": "alexa-remote-routine",
        "z": "66ae481f.c36c48",
        "name": "",
        "account": "5289daa5.51ddc4",
        "routineNode": {
            "type": "speak",
            "payload": {
                "type": "regular",
                "text": {
                    "type": "msg",
                    "value": "topic"
                },
                "devices": [
                    "G2A1A60304750BPX"
                ]
            }
        },
        "x": 220,
        "y": 1660,
        "wires": [
            [
                "e8d84f1a.ec7b7"
            ]
        ]
    },
    {
        "id": "e8d84f1a.ec7b7",
        "type": "delay",
        "z": "66ae481f.c36c48",
        "name": "",
        "pauseType": "delay",
        "timeout": "18",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 480,
        "y": 1660,
        "wires": [
            [
                "2a2ea08d.b2e47"
            ]
        ]
    },
    {
        "id": "f2769b2.c369b68",
        "type": "mqtt in",
        "z": "66ae481f.c36c48",
        "name": "",
        "topic": "hugo/se/Alarma",
        "qos": "2",
        "datatype": "auto",
        "broker": "4c35078.987c1f8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "x": 200,
        "y": 3520,
        "wires": [
            [
                "b23a8473.a11068"
            ]
        ]
    },
    {
        "id": "e7b8fd47.423a4",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "1",
        "payloadType": "num",
        "x": 170,
        "y": 3580,
        "wires": [
            [
                "b23a8473.a11068"
            ]
        ]
    },
    {
        "id": "b23a8473.a11068",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "msg.payload = parseInt (msg.payload);\nif (msg.payload == 1) {\n    global.set (\"lastPayment\", [25, \"Alarma\"]);\n    msg.topic= \"INSERT INTO payments (charge, device) VALUES ('\"+global.get (\"lastPayment[0]\")+\"','\"+global.get (\"lastPayment[1]\")+\"')\";\n    msg.payload = \"23, has cancelado la rutina de alarma. Esto generará un cargo de 25 pesos en tu cuenta bancaria.\";\n    global.set (\"wakeUp\", 1);\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 3520,
        "wires": [
            [
                "7e684b52.483134",
                "9d9c91cc.2fadb",
                "32bc6d04.bbe462"
            ]
        ]
    },
    {
        "id": "aac5a86f.e2f968",
        "type": "alexa-remote-routine",
        "z": "66ae481f.c36c48",
        "name": "",
        "account": "5289daa5.51ddc4",
        "routineNode": {
            "type": "speak",
            "payload": {
                "type": "regular",
                "text": {
                    "type": "msg",
                    "value": "payload"
                },
                "devices": [
                    "G2A1A60304750BPX"
                ]
            }
        },
        "x": 1080,
        "y": 3580,
        "wires": [
            []
        ]
    },
    {
        "id": "7e684b52.483134",
        "type": "mysql",
        "z": "66ae481f.c36c48",
        "mydb": "1a27214b.e39c3f",
        "name": "",
        "x": 830,
        "y": 3640,
        "wires": [
            []
        ]
    },
    {
        "id": "a380464c.a2f568",
        "type": "comment",
        "z": "66ae481f.c36c48",
        "name": "Luces de trabajo",
        "info": "",
        "x": 240,
        "y": 2420,
        "wires": []
    },
    {
        "id": "9d9c91cc.2fadb",
        "type": "alexa-remote-routine",
        "z": "66ae481f.c36c48",
        "name": "",
        "account": "5289daa5.51ddc4",
        "routineNode": {
            "type": "stop",
            "payload": {
                "devices": [
                    "G2A1A60304750BPX"
                ]
            }
        },
        "x": 810,
        "y": 3520,
        "wires": [
            []
        ]
    },
    {
        "id": "32bc6d04.bbe462",
        "type": "delay",
        "z": "66ae481f.c36c48",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 800,
        "y": 3580,
        "wires": [
            [
                "aac5a86f.e2f968",
                "cae422ed.90329"
            ]
        ]
    },
    {
        "id": "d930ef73.eeccf",
        "type": "mqtt in",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "topic": "hugo/se/kitchen",
        "qos": "2",
        "datatype": "auto",
        "broker": "4c35078.987c1f8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "x": 140,
        "y": 1400,
        "wires": [
            [
                "5d75a22a.b5521c"
            ]
        ]
    },
    {
        "id": "5d75a22a.b5521c",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "if (msg.payload == \"person\") {\n    global.set (\"isAwaken\", 1);\n    global.set (\"isAwakenCount\", global.get (\"isAwakenCount\") + 1);\n    global.set (\"autoOff\", 0);\n    global.set (\"lastDetect\", global.get (\"timeNow\"));\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 420,
        "y": 1400,
        "wires": [
            []
        ]
    },
    {
        "id": "b091d71c.578938",
        "type": "comment",
        "z": "64d34e70.fcce4",
        "name": "Amanecer-Anochecer",
        "info": "",
        "x": 160,
        "y": 580,
        "wires": []
    },
    {
        "id": "928a3387.882d5",
        "type": "http request",
        "z": "64d34e70.fcce4",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "api.openweathermap.org/data/2.5/weather?lat=19.432659&lon=-99.133595&appid=fe401d1af6d12fa5ab2b9977c7c85776",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 490,
        "y": 620,
        "wires": [
            [
                "a7805b3b.ba4ca8"
            ]
        ]
    },
    {
        "id": "a7805b3b.ba4ca8",
        "type": "json",
        "z": "64d34e70.fcce4",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 770,
        "y": 620,
        "wires": [
            [
                "b7604914.16e438",
                "154750a2.67437f"
            ]
        ]
    },
    {
        "id": "b7604914.16e438",
        "type": "debug",
        "z": "64d34e70.fcce4",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1010,
        "y": 680,
        "wires": []
    },
    {
        "id": "65fc80fc.4d78",
        "type": "inject",
        "z": "64d34e70.fcce4",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 150,
        "y": 640,
        "wires": [
            [
                "928a3387.882d5"
            ]
        ]
    },
    {
        "id": "154750a2.67437f",
        "type": "function",
        "z": "64d34e70.fcce4",
        "name": "",
        "func": "global.set (\"sunrise\", msg.payload.sys.sunrise * 1000);\nglobal.set (\"sunset\", (msg.payload.sys.sunset * 1000) - 7200000);\nglobal.set (\"sunriseTomorrow\", (msg.payload.sys.sunset * 1000) + 86400000)\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1020,
        "y": 620,
        "wires": [
            []
        ]
    },
    {
        "id": "849001a1.63897",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "20min",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1200",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 220,
        "y": 2460,
        "wires": [
            [
                "c57af5b5.c4c058"
            ]
        ]
    },
    {
        "id": "c57af5b5.c4c058",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "if (msg.payload > global.get (\"sunset\") && global.get (\"isAwaken\") == 1 && global.get (\"sunsetOn\") == 0) {\n    global.set (\"sunsetOn\", 1);\n    msg.payload = \"23, el atardecer está cerca. Encenderé las luces por ti.\";\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 2460,
        "wires": [
            [
                "e9edda37.3b1098",
                "12654eba.af0ca1",
                "535c7da2.45d134"
            ]
        ]
    },
    {
        "id": "e9edda37.3b1098",
        "type": "alexa-remote-routine",
        "z": "66ae481f.c36c48",
        "name": "",
        "account": "5289daa5.51ddc4",
        "routineNode": {
            "type": "speak",
            "payload": {
                "type": "regular",
                "text": {
                    "type": "msg",
                    "value": "payload"
                },
                "devices": [
                    "G2A1A60304750BPX"
                ]
            }
        },
        "x": 820,
        "y": 2460,
        "wires": [
            []
        ]
    },
    {
        "id": "12654eba.af0ca1",
        "type": "alexa-remote-smarthome",
        "z": "66ae481f.c36c48",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "a93da952-4d7f-446a-82b5-a18acc421354",
                    "action": "turnOn"
                }
            ]
        },
        "outputs": 1,
        "x": 840,
        "y": 2500,
        "wires": [
            []
        ]
    },
    {
        "id": "535c7da2.45d134",
        "type": "delay",
        "z": "66ae481f.c36c48",
        "name": "",
        "pauseType": "delay",
        "timeout": "2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 800,
        "y": 2560,
        "wires": [
            [
                "e74a6944.96b058"
            ]
        ]
    },
    {
        "id": "4252960d.4f6fc8",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "if (global.get (\"workDone\") == 1 && global.get (\"onRecordW\") == 1) {\n    msg.payload = \"23, has completado tu cuota de horas de trabajo. Es momento de descansar. Se hará un cargo de 5 pesos a tu cuenta bancaria cada 20 min que sobrepases la cuota de trabajo.\";\n    global.set (\"lastPayment\", [5, \"Burnout\"]);\n    return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 2140,
        "wires": [
            [
                "691032c5.3af37c",
                "e5784265.33f88",
                "8df94dc6.58f38"
            ]
        ]
    },
    {
        "id": "d08f1618.b2ab48",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "00 22 * * 1,2,3,4,5",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 230,
        "y": 2320,
        "wires": [
            [
                "c8d3991e.024438"
            ]
        ]
    },
    {
        "id": "de6f5000.cd7e4",
        "type": "comment",
        "z": "66ae481f.c36c48",
        "name": "Verificación de cuotas",
        "info": "",
        "x": 260,
        "y": 2280,
        "wires": []
    },
    {
        "id": "c8d3991e.024438",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "if (global.get (\"worktime\")/1000/60/60 < 8) {\n    msg.payload = \"23, no has cumplido tu cuota de trabajo. Se te hará un cargo de 10 pesos por cada hora faltante.\";\n    global.set (\"lastPayment\", [(((8 - global.get (\"worktime\")/1000/60/60)) * 10), \"Burnout\"]);\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 2320,
        "wires": [
            [
                "27cb17c4.c193f8",
                "f7330c6b.1fdfc"
            ]
        ]
    },
    {
        "id": "27cb17c4.c193f8",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "if (global.get (\"isAwaken\") == 1) {\n    return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 800,
        "y": 2360,
        "wires": [
            [
                "ea24d5bc.837818"
            ]
        ]
    },
    {
        "id": "ea24d5bc.837818",
        "type": "alexa-remote-routine",
        "z": "66ae481f.c36c48",
        "name": "",
        "account": "5289daa5.51ddc4",
        "routineNode": {
            "type": "speak",
            "payload": {
                "type": "regular",
                "text": {
                    "type": "msg",
                    "value": "payload"
                },
                "devices": [
                    "G2A1A60304750BPX"
                ]
            }
        },
        "x": 1080,
        "y": 2360,
        "wires": [
            []
        ]
    },
    {
        "id": "f7330c6b.1fdfc",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "msg.topic= \"INSERT INTO payments (charge, device) VALUES ('\"+global.get (\"lastPayment[0]\")+\"','\"+global.get (\"lastPayment[1]\")+\"')\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 800,
        "y": 2320,
        "wires": [
            [
                "5efdc5e6.fcb54c"
            ]
        ]
    },
    {
        "id": "5efdc5e6.fcb54c",
        "type": "mysql",
        "z": "66ae481f.c36c48",
        "mydb": "1a27214b.e39c3f",
        "name": "",
        "x": 1090,
        "y": 2320,
        "wires": [
            []
        ]
    },
    {
        "id": "f72f927e.55bda",
        "type": "inject",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 2300,
        "wires": [
            [
                "7981b3d9.9f3b7c"
            ]
        ]
    },
    {
        "id": "47b02720.0b5848",
        "type": "alexa-remote-routine",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "account": "5289daa5.51ddc4",
        "routineNode": {
            "type": "music",
            "payload": {
                "device": {
                    "type": "str",
                    "value": "G2A1A60304750BPX"
                },
                "provider": {
                    "type": "str",
                    "value": "SPOTIFY"
                },
                "search": {
                    "type": "msg",
                    "value": "payload"
                },
                "duration": {
                    "type": "num",
                    "value": "300"
                }
            }
        },
        "x": 1220,
        "y": 2380,
        "wires": [
            []
        ]
    },
    {
        "id": "58bfcb7a.08f154",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "if (global.get (\"isAwaken\") == 1) {\n    msg.payload =global.get  (\"dominant\") ;\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 720,
        "y": 2320,
        "wires": [
            [
                "beac474d.f13418",
                "c9eaaafd.856768"
            ]
        ]
    },
    {
        "id": "beac474d.f13418",
        "type": "alexa-remote-routine",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "account": "5289daa5.51ddc4",
        "routineNode": {
            "type": "volume",
            "payload": {
                "value": {
                    "type": "num",
                    "value": "30"
                },
                "mode": {
                    "type": "str",
                    "value": "set"
                },
                "devices": [
                    "G2A1A60304750BPX"
                ]
            }
        },
        "x": 1000,
        "y": 2320,
        "wires": [
            []
        ]
    },
    {
        "id": "6ad77a2a.7c65f4",
        "type": "comment",
        "z": "66ae481f.c36c48",
        "name": "Luces descanso",
        "info": "",
        "x": 240,
        "y": 2600,
        "wires": []
    },
    {
        "id": "680bfc1.d201e04",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "20:00h",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "0 20-23 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 220,
        "y": 2660,
        "wires": [
            [
                "b4d75b70.25c828"
            ]
        ]
    },
    {
        "id": "196f841d.95ea2c",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "23:00",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "00 23 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 210,
        "y": 2720,
        "wires": [
            [
                "3598805c.693e9"
            ]
        ]
    },
    {
        "id": "b4d75b70.25c828",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "Luces descanso 80%",
        "func": "if (global.get (\"isAwaken\") == 1) {\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 2660,
        "wires": [
            [
                "df8c8e84.f290f"
            ]
        ]
    },
    {
        "id": "df8c8e84.f290f",
        "type": "alexa-remote-smarthome",
        "z": "66ae481f.c36c48",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "a93da952-4d7f-446a-82b5-a18acc421354",
                    "action": "setColorTemperature",
                    "value": {
                        "type": "str",
                        "value": "white"
                    }
                },
                {
                    "entity": "a93da952-4d7f-446a-82b5-a18acc421354",
                    "action": "setBrightness",
                    "value": {
                        "type": "num",
                        "value": "80"
                    }
                }
            ]
        },
        "outputs": 1,
        "x": 840,
        "y": 2660,
        "wires": [
            []
        ]
    },
    {
        "id": "3598805c.693e9",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "Llamar atención 60%",
        "func": "if (global.get (\"isAwaken\") == 1) {\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 2720,
        "wires": [
            [
                "c85bb698.e20de8"
            ]
        ]
    },
    {
        "id": "c85bb698.e20de8",
        "type": "alexa-remote-smarthome",
        "z": "66ae481f.c36c48",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "4801ec0c-27df-4f9c-aea9-39146080d320",
                    "action": "setColorTemperature",
                    "value": {
                        "type": "str",
                        "value": "white"
                    }
                },
                {
                    "entity": "4801ec0c-27df-4f9c-aea9-39146080d320",
                    "action": "setBrightness",
                    "value": {
                        "type": "num",
                        "value": "10"
                    }
                }
            ]
        },
        "outputs": 1,
        "x": 840,
        "y": 2720,
        "wires": [
            [
                "ed944200.54298"
            ]
        ]
    },
    {
        "id": "c9eaaafd.856768",
        "type": "delay",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 980,
        "y": 2380,
        "wires": [
            [
                "47b02720.0b5848"
            ]
        ]
    },
    {
        "id": "72724031.f298e",
        "type": "debug",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1250,
        "y": 1700,
        "wires": []
    },
    {
        "id": "31bf49c2.3cda16",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "\nvar emotions = [\n    msg.payload.angry.emotion,\n    msg.payload.disgust.emotion,\n    msg.payload.fear.emotion,\n    msg.payload.happy.emotion,\n    msg.payload.sad.emotion,\n    msg.payload.surprise.emotion,\n    msg.payload.neutral.emotion\n];\n\nvar maxEmotion = Math.max(...emotions);\nvar index = 0;\nfor (var i = 0; i < 7; i++){\n    if (emotions[i] == maxEmotion){\n        index = i;\n    }\n}\nvar nombre = \"\";\nswitch (index) {\n    case 0:\n        nombre = \"Enojo\";\n        break;\n    case 1:\n        nombre = \"Molestia\";\n        break;\n    case 2:\n        nombre = \"Miedo\";\n        break;\n    case 3:\n        nombre = \"Felicidad\";\n        break;\n    case 4:\n        nombre = \"Tristeza\";\n        break;\n    case 5:\n        nombre = \"Sorpresa\";\n        break;\n    case 6:\n        nombre = \"Neutral\";\n        break;\n}\nglobal.set (\"lastDominant\", [nombre,maxEmotion.toFixed(2)]);\nmsg.payload = global.get (\"lastDominant\");\nreturn msg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1220,
        "y": 1920,
        "wires": [
            [
                "a6a9dba2.fa3688"
            ]
        ]
    },
    {
        "id": "a6a9dba2.fa3688",
        "type": "ui_text",
        "z": "c2c0e0c1.0deb1",
        "group": "292e4d7c.349622",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "23 siente: {{msg.payload[0]}}, {{msg.payload[1]}} %",
        "format": "",
        "layout": "col-center",
        "x": 1450,
        "y": 1920,
        "wires": []
    },
    {
        "id": "46f2d86b.6ed548",
        "type": "inject",
        "z": "64d34e70.fcce4",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "180",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 130,
        "y": 1140,
        "wires": [
            [
                "75e2ca3e.ad0a74"
            ]
        ]
    },
    {
        "id": "aa84a84a.b29008",
        "type": "comment",
        "z": "64d34e70.fcce4",
        "name": "Cambio de escena en streaming",
        "info": "",
        "x": 190,
        "y": 1080,
        "wires": []
    },
    {
        "id": "75e2ca3e.ad0a74",
        "type": "function",
        "z": "64d34e70.fcce4",
        "name": "",
        "func": "\n\n\n\nif (global.get (\"timeNow\") > global.get (\"sceneNext\")) {\n    if (global.get (\"scene\") > 4) {\n        global.set (\"scene\", 1);\n    }\n    var escena = global.get (\"scene\");\n    escena = escena + 1;\n    escena = escena % 3;\n    global.set (\"scene\", escena);\n\n\nswitch (escena) {\n    case 0:\n        msg.payload =\"camaras\";\n        global.set (\"sceneNext\", global.get (\"timeNow\")+120000);\n        break;\n    case 1:\n        msg.payload = \"monitoreo\";\n        global.set (\"sceneNext\", global.get (\"timeNow\")+240000);\n        break;\n    case 2:\n        msg.payload = \"panel\";\n        global.set (\"sceneNext\", global.get (\"timeNow\")+240000);\n        break;\n}    \n    \n    return msg;\n}\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 1140,
        "wires": [
            [
                "91f4aaed.227918",
                "c89413d4.33c87"
            ]
        ]
    },
    {
        "id": "c89413d4.33c87",
        "type": "debug",
        "z": "64d34e70.fcce4",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 1200,
        "wires": []
    },
    {
        "id": "91f4aaed.227918",
        "type": "file",
        "z": "64d34e70.fcce4",
        "name": "",
        "filename": "S:\\Carrusel\\scene.txt",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 620,
        "y": 1140,
        "wires": [
            []
        ]
    },
    {
        "id": "168803d8.61481c",
        "type": "inject",
        "z": "64d34e70.fcce4",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 120,
        "y": 1220,
        "wires": [
            [
                "3620311d.21fb5e"
            ]
        ]
    },
    {
        "id": "3620311d.21fb5e",
        "type": "function",
        "z": "64d34e70.fcce4",
        "name": "",
        "func": "if (global.get (\"chances\") > 0) {\n    global.set (\"sceneNext\", global.get (\"timeNow\") + 120000);\n    if (global.get (\"scene\") != 0) {\n        global.set (\"scene\", 0);\n        msg.payload = \"camaras\";\n        return msg;\n    }\n    \n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 1220,
        "wires": [
            [
                "91f4aaed.227918",
                "c89413d4.33c87"
            ]
        ]
    },
    {
        "id": "ed944200.54298",
        "type": "delay",
        "z": "66ae481f.c36c48",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1060,
        "y": 2720,
        "wires": [
            [
                "237723f.00fb6dc"
            ]
        ]
    },
    {
        "id": "237723f.00fb6dc",
        "type": "alexa-remote-smarthome",
        "z": "66ae481f.c36c48",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "4801ec0c-27df-4f9c-aea9-39146080d320",
                    "action": "setColorTemperature",
                    "value": {
                        "type": "str",
                        "value": "white"
                    }
                },
                {
                    "entity": "4801ec0c-27df-4f9c-aea9-39146080d320",
                    "action": "setBrightness",
                    "value": {
                        "type": "num",
                        "value": "60"
                    }
                }
            ]
        },
        "outputs": 1,
        "x": 1340,
        "y": 2720,
        "wires": [
            []
        ]
    },
    {
        "id": "5f87dff3.9a5d7",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "if (global.get (\"timeNow\") > global.get (\"sunrise\") && global.get (\"dayLight\") == 0) {\n    global.set (\"dayLight\", 1);\n    return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 3120,
        "wires": [
            [
                "b3c3e2f6.312d6"
            ]
        ]
    },
    {
        "id": "ec05d712.2213a8",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "10 min 5-8am",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "*/10 5-7 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 240,
        "y": 3120,
        "wires": [
            [
                "5f87dff3.9a5d7"
            ]
        ]
    },
    {
        "id": "b3c3e2f6.312d6",
        "type": "alexa-remote-smarthome",
        "z": "66ae481f.c36c48",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "4801ec0c-27df-4f9c-aea9-39146080d320",
                    "action": "turnOff"
                }
            ]
        },
        "outputs": 1,
        "x": 840,
        "y": 3120,
        "wires": [
            []
        ]
    },
    {
        "id": "e2169a8e.5dd8f8",
        "type": "comment",
        "z": "66ae481f.c36c48",
        "name": "Forzar apagar alarma",
        "info": "",
        "x": 220,
        "y": 3480,
        "wires": []
    },
    {
        "id": "1f76cf48.821e51",
        "type": "debug",
        "z": "66ae481f.c36c48",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 810,
        "y": 3060,
        "wires": []
    },
    {
        "id": "77b5a0e5.4a6a2",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "20 min",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "*/20 0-5 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 220,
        "y": 2240,
        "wires": [
            [
                "198a7f4e.68f971"
            ]
        ]
    },
    {
        "id": "bafbc1ca.410da",
        "type": "comment",
        "z": "66ae481f.c36c48",
        "name": "Cargos por desvelo",
        "info": "",
        "x": 250,
        "y": 2200,
        "wires": []
    },
    {
        "id": "198a7f4e.68f971",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "if (global.get (\"isAwaken\") == 1 && global.get (\"location\") == \"Casa\") {\n    global.set (\"lastPayment\", [5, \"Desvelo\"]);\n    global.set (\"desveloCount\", global.get (\"desveloCount\") + 5);\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 2240,
        "wires": [
            [
                "794d7ce2.63f154",
                "dbdff2da.5f641"
            ]
        ]
    },
    {
        "id": "794d7ce2.63f154",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "msg.topic= \"INSERT INTO payments (charge, device) VALUES ('\"+global.get (\"lastPayment[0]\")+\"','\"+global.get (\"lastPayment[1]\")+\"')\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 800,
        "y": 2240,
        "wires": [
            [
                "b363b14f.d4943"
            ]
        ]
    },
    {
        "id": "b363b14f.d4943",
        "type": "mysql",
        "z": "66ae481f.c36c48",
        "mydb": "1a27214b.e39c3f",
        "name": "",
        "x": 1090,
        "y": 2240,
        "wires": [
            []
        ]
    },
    {
        "id": "62fa9473.da113c",
        "type": "twitter out",
        "z": "66ae481f.c36c48",
        "twitter": "a47ef347.5510c",
        "name": "Tweet",
        "x": 1290,
        "y": 4140,
        "wires": []
    },
    {
        "id": "bc17ee8e.a0346",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "msg.media = msg.payload;\nif (msg.topic == 6) {\n    msg.payload = \"Foto aleatoria del archivo tomada por mi sistema de vigilancia. Visita estocolmosindrome.com #estocolmosindrome\";\n} else {\n    msg.payload = \"Foto aleatoria del día de hoy, tomada por mi sistema de vigilancia. Visita estocolmosindrome.com #estocolmosindrome\";\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1060,
        "y": 4140,
        "wires": [
            [
                "62fa9473.da113c"
            ]
        ]
    },
    {
        "id": "dd954dca.9b664",
        "type": "file in",
        "z": "66ae481f.c36c48",
        "name": "File",
        "filename": "",
        "format": "stream",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "x": 490,
        "y": 4140,
        "wires": [
            [
                "1ebb51bb.53070e"
            ]
        ]
    },
    {
        "id": "e3e37cb7.893b2",
        "type": "readdir",
        "z": "66ae481f.c36c48",
        "name": "Kitchen",
        "dir": "S:\\iSpy\\video\\OUWRE\\grabs",
        "as": "single",
        "recursive": true,
        "outproperty": "payload",
        "x": 1060,
        "y": 3980,
        "wires": [
            [
                "ef779c3f.27271"
            ]
        ]
    },
    {
        "id": "a76d6258.487cb",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "9:00",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "00 09 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 190,
        "y": 3820,
        "wires": [
            [
                "eab75ddc.53767"
            ]
        ]
    },
    {
        "id": "eab75ddc.53767",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "var trigger = 0;\ntrigger = Math.random() * (6 - 0 + 1) + 0;\ntrigger = Math.floor (trigger);\nmsg.payload = trigger;\nmsg.topic = trigger;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 3820,
        "wires": [
            [
                "188b5bf1.2d2f14"
            ]
        ]
    },
    {
        "id": "188b5bf1.2d2f14",
        "type": "switch",
        "z": "66ae481f.c36c48",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "2",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "3",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "4",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "5",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "6",
                "vt": "num"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 7,
        "x": 790,
        "y": 3860,
        "wires": [
            [
                "45a319e5.a05048"
            ],
            [
                "c40e3eff.2248"
            ],
            [
                "ba99895e.a98918"
            ],
            [
                "d4832e8.b22c0d"
            ],
            [
                "e3e37cb7.893b2"
            ],
            [
                "59a03623.3cd248"
            ],
            [
                "330fe6ae.47e37a"
            ]
        ]
    },
    {
        "id": "c40e3eff.2248",
        "type": "readdir",
        "z": "66ae481f.c36c48",
        "name": "Bookshelf",
        "dir": "S:\\iSpy\\video\\CMBKI\\grabs",
        "as": "single",
        "recursive": true,
        "outproperty": "payload",
        "x": 1060,
        "y": 3860,
        "wires": [
            [
                "ef779c3f.27271"
            ]
        ]
    },
    {
        "id": "ba99895e.a98918",
        "type": "readdir",
        "z": "66ae481f.c36c48",
        "name": "LivingRoom",
        "dir": "S:\\iSpy\\video\\CUINL\\grabs",
        "as": "single",
        "recursive": true,
        "outproperty": "payload",
        "x": 1070,
        "y": 3900,
        "wires": [
            [
                "ef779c3f.27271"
            ]
        ]
    },
    {
        "id": "d4832e8.b22c0d",
        "type": "readdir",
        "z": "66ae481f.c36c48",
        "name": "Backdoor",
        "dir": "S:\\iSpy\\video\\JCZIG\\grabs",
        "as": "single",
        "recursive": true,
        "outproperty": "payload",
        "x": 1060,
        "y": 3940,
        "wires": [
            [
                "ef779c3f.27271"
            ]
        ]
    },
    {
        "id": "45a319e5.a05048",
        "type": "readdir",
        "z": "66ae481f.c36c48",
        "name": "Desktop",
        "dir": "S:\\iSpy\\video\\RLZZB\\grabs",
        "as": "single",
        "recursive": true,
        "outproperty": "payload",
        "x": 1060,
        "y": 3820,
        "wires": [
            [
                "ef779c3f.27271"
            ]
        ]
    },
    {
        "id": "59a03623.3cd248",
        "type": "readdir",
        "z": "66ae481f.c36c48",
        "name": "door",
        "dir": "S:\\iSpy\\video\\YYEDR\\grabs",
        "as": "single",
        "recursive": true,
        "outproperty": "payload",
        "x": 1050,
        "y": 4020,
        "wires": [
            [
                "ef779c3f.27271"
            ]
        ]
    },
    {
        "id": "ef779c3f.27271",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "var longitud = msg.payload.length;\nvar trigger = 0;\ntrigger = Math.random() * (longitud) ;\ntrigger = Math.floor (trigger);\nvar selected = msg.payload[trigger];\nlongitud = msg.payload[trigger].length;\nif (selected[longitud-1] == \"g\") {\n    msg.filename = selected;\n    return msg;\n} else {\n    msg.payload = 1;\n    return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1300,
        "y": 3820,
        "wires": [
            [
                "61ee9df3.0c1df4"
            ]
        ]
    },
    {
        "id": "11c2b7ff.17e528",
        "type": "comment",
        "z": "66ae481f.c36c48",
        "name": "Tuitea una foto random",
        "info": "",
        "x": 220,
        "y": 3780,
        "wires": []
    },
    {
        "id": "330fe6ae.47e37a",
        "type": "readdir",
        "z": "66ae481f.c36c48",
        "name": "Archive",
        "dir": "S:\\iSpy-archive\\",
        "as": "single",
        "recursive": true,
        "outproperty": "payload",
        "x": 1059,
        "y": 4060,
        "wires": [
            [
                "ef779c3f.27271"
            ]
        ]
    },
    {
        "id": "61ee9df3.0c1df4",
        "type": "switch",
        "z": "66ae481f.c36c48",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 190,
        "y": 4140,
        "wires": [
            [
                "eab75ddc.53767"
            ],
            [
                "dd954dca.9b664"
            ]
        ]
    },
    {
        "id": "1a857761.c623b9",
        "type": "comment",
        "z": "66ae481f.c36c48",
        "name": "Lampara de escritorio",
        "info": "",
        "x": 220,
        "y": 4260,
        "wires": []
    },
    {
        "id": "7e030292.ee93dc",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "20 min",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "*/10 18-23 * * 1,2,3,4,5",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 200,
        "y": 4300,
        "wires": [
            [
                "ba40db84.0366a8"
            ]
        ]
    },
    {
        "id": "ba40db84.0366a8",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "Auto encender",
        "func": "if (global.get (\"confidenceW\") > 0 && global.get (\"mesaLamp\") == 0) {\n    global.set (\"mesaLamp\", 1);\n    msg.payload = 1;\n    return msg;\n} else if (global.get (\"confidenceW\") == 0 && global.get (\"mesaLamp\") == 1) {\n    global.set (\"mesaLamp\", 0);\n    msg.payload = 0;\n    return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 520,
        "y": 4300,
        "wires": [
            [
                "28f53854.bd2098"
            ]
        ]
    },
    {
        "id": "a3adf982.825798",
        "type": "alexa-remote-smarthome",
        "z": "66ae481f.c36c48",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "6e880a5d-ff4e-4360-8a33-d04fbdc72f5f",
                    "action": "turnOn"
                }
            ]
        },
        "outputs": 1,
        "x": 1100,
        "y": 4300,
        "wires": [
            []
        ]
    },
    {
        "id": "28f53854.bd2098",
        "type": "switch",
        "z": "66ae481f.c36c48",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 790,
        "y": 4300,
        "wires": [
            [
                "a3adf982.825798"
            ],
            [
                "9fb42e2f.a30a6"
            ]
        ]
    },
    {
        "id": "9fb42e2f.a30a6",
        "type": "alexa-remote-smarthome",
        "z": "66ae481f.c36c48",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "6e880a5d-ff4e-4360-8a33-d04fbdc72f5f",
                    "action": "turnOff"
                }
            ]
        },
        "outputs": 1,
        "x": 1100,
        "y": 4360,
        "wires": [
            []
        ]
    },
    {
        "id": "a9d20b32.c9d1b8",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "00:01 h",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "01 00 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 200,
        "y": 4360,
        "wires": [
            [
                "5785e367.acd22c"
            ]
        ]
    },
    {
        "id": "5785e367.acd22c",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "Rutina de apagado",
        "func": "global.set (\"mesaLamp\", 0);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 530,
        "y": 4360,
        "wires": [
            [
                "9fb42e2f.a30a6"
            ]
        ]
    },
    {
        "id": "fdfe62a0.5c35",
        "type": "inject",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1040,
        "y": 360,
        "wires": [
            [
                "ba46e988.d14378"
            ]
        ]
    },
    {
        "id": "ba46e988.d14378",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "1h",
        "func": "global.set(\"worktime\", global.get(\"worktime\") + 3600000);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1230,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "a784aab.b202658",
        "type": "inject",
        "z": "64d34e70.fcce4",
        "name": "Single inject",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 130,
        "y": 1280,
        "wires": [
            [
                "e00368ea.b42938"
            ]
        ]
    },
    {
        "id": "e00368ea.b42938",
        "type": "function",
        "z": "64d34e70.fcce4",
        "name": "Unlock change scene",
        "func": "global.set (\"sceneNext\", global.get (\"timeNow\") + 1000);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 460,
        "y": 1280,
        "wires": [
            []
        ]
    },
    {
        "id": "ba85a1c4.04d19",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "if (msg.payload == 200) {\n    global.set (\"promomeds_i\",2);\n    if (global.get (\"doorRequest\") == 1) {\n        msg.payload = \"23, gracias por tomar los medicamentos promocionales. Nuestros patrocinadores están complacidos. Puedes salir.\";\n        global.set (\"doorRequest\", 0);\n        return msg;\n    }\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 440,
        "wires": [
            [
                "33ee4522.190cda",
                "aae4ab4c.9efcc8"
            ]
        ]
    },
    {
        "id": "33ee4522.190cda",
        "type": "alexa-remote-routine",
        "z": "66ae481f.c36c48",
        "name": "",
        "account": "5289daa5.51ddc4",
        "routineNode": {
            "type": "speak",
            "payload": {
                "type": "regular",
                "text": {
                    "type": "msg",
                    "value": "payload"
                },
                "devices": [
                    "G2A1A60304750BPX"
                ]
            }
        },
        "x": 820,
        "y": 500,
        "wires": [
            [
                "9288f370.4e894"
            ]
        ]
    },
    {
        "id": "9288f370.4e894",
        "type": "delay",
        "z": "66ae481f.c36c48",
        "name": "",
        "pauseType": "delay",
        "timeout": "8",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1060,
        "y": 500,
        "wires": [
            [
                "dd056f7.eed479"
            ]
        ]
    },
    {
        "id": "90187a63.6d20f8",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "23, gracias por tomar los medicamentos promocionales. Nuestros patrocinadores están complacidos. Puedes salir",
        "payloadType": "str",
        "x": 510,
        "y": 500,
        "wires": [
            [
                "33ee4522.190cda"
            ]
        ]
    },
    {
        "id": "dd056f7.eed479",
        "type": "alexa-remote-smarthome",
        "z": "66ae481f.c36c48",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "81a1216d-27de-42bc-8306-84cf261bdca0",
                    "action": "lockAction",
                    "value": {
                        "type": "str",
                        "value": "unlocked"
                    }
                }
            ]
        },
        "outputs": 1,
        "x": 1350,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "168b98a5.f015e7",
        "type": "inject",
        "z": "83fb4ff5.ce7c8",
        "name": "Liberar puerta",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 250,
        "y": 320,
        "wires": [
            [
                "e7572c7b.e95c9"
            ]
        ]
    },
    {
        "id": "e7572c7b.e95c9",
        "type": "function",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "func": "global.set (\"doorRequest\", 0);\nglobal.set (\"doorRequested\", 0);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 520,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "9a5a922b.287b5",
        "type": "comment",
        "z": "83fb4ff5.ce7c8",
        "name": "Liberar puerta",
        "info": "",
        "x": 250,
        "y": 280,
        "wires": []
    },
    {
        "id": "29e4c84d.a4c3c8",
        "type": "inject",
        "z": "83fb4ff5.ce7c8",
        "d": true,
        "name": "10",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "600",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 230,
        "y": 400,
        "wires": [
            [
                "77f837bd.bd0688"
            ]
        ]
    },
    {
        "id": "77f837bd.bd0688",
        "type": "function",
        "z": "83fb4ff5.ce7c8",
        "name": "Autoliberar",
        "func": "/*\nif (global.get (\"timeNow\") > global.get (\"lastDoorRequest\") + 900000) {\n    global.set (\"doorRequest\", 0);\n    //global.set (\"doorRequested\", 0);\n}\n*/\nglobal.set (\"doorRequest\", 0);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 530,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "864dd0bc.2682a",
        "type": "comment",
        "z": "83fb4ff5.ce7c8",
        "name": "Detectar Puerta",
        "info": "",
        "x": 260,
        "y": 140,
        "wires": []
    },
    {
        "id": "6b81c484.84d2ac",
        "type": "inject",
        "z": "4391d02d.238c8",
        "name": "0, reboot",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 240,
        "y": 200,
        "wires": [
            [
                "1eaa6058.66d3a"
            ]
        ]
    },
    {
        "id": "1eaa6058.66d3a",
        "type": "mqtt out",
        "z": "4391d02d.238c8",
        "name": "",
        "topic": "hugo/expo/control",
        "qos": "2",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "4c35078.987c1f8",
        "x": 670,
        "y": 200,
        "wires": []
    },
    {
        "id": "bcf012f5.a5df1",
        "type": "inject",
        "z": "4391d02d.238c8",
        "name": "1, status",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "1",
        "payloadType": "num",
        "x": 240,
        "y": 240,
        "wires": [
            [
                "1eaa6058.66d3a"
            ]
        ]
    },
    {
        "id": "9b075187.cfedd",
        "type": "inject",
        "z": "4391d02d.238c8",
        "name": "2, check",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2",
        "payloadType": "num",
        "x": 240,
        "y": 280,
        "wires": [
            [
                "1eaa6058.66d3a"
            ]
        ]
    },
    {
        "id": "20b06042.5aaf3",
        "type": "inject",
        "z": "4391d02d.238c8",
        "name": "3, play",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "3",
        "payloadType": "num",
        "x": 230,
        "y": 320,
        "wires": [
            [
                "1eaa6058.66d3a"
            ]
        ]
    },
    {
        "id": "a979b025.f43eb",
        "type": "inject",
        "z": "4391d02d.238c8",
        "name": "4, kill specific",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "4",
        "payloadType": "num",
        "x": 250,
        "y": 360,
        "wires": [
            [
                "1eaa6058.66d3a"
            ]
        ]
    },
    {
        "id": "6c5ffbcb.c07ec4",
        "type": "inject",
        "z": "4391d02d.238c8",
        "name": "5, killall",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "5",
        "payloadType": "num",
        "x": 230,
        "y": 400,
        "wires": [
            [
                "1eaa6058.66d3a"
            ]
        ]
    },
    {
        "id": "ae41a589.a7dc88",
        "type": "mqtt in",
        "z": "4391d02d.238c8",
        "name": "",
        "topic": "hugo/expo/res",
        "qos": "2",
        "datatype": "auto",
        "broker": "4c35078.987c1f8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "x": 950,
        "y": 200,
        "wires": [
            [
                "79340684.c67398",
                "57b4ffc9.ea829"
            ]
        ]
    },
    {
        "id": "79340684.c67398",
        "type": "debug",
        "z": "4391d02d.238c8",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1170,
        "y": 200,
        "wires": []
    },
    {
        "id": "57b4ffc9.ea829",
        "type": "function",
        "z": "4391d02d.238c8",
        "name": "",
        "func": "var check= msg.payload[0] + msg.payload[1] + msg.payload[69];\nif (check == \"pih\") {\n    msg.payload = msg.payload[10] + msg.payload[11] + msg.payload[12] + msg.payload[13];\n    global.set (\"process\", msg.payload);\n    return msg;\n} else {\n    global.set (\"process\", \"recall\");\n    msg.payload = \"recall\";\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1180,
        "y": 280,
        "wires": [
            [
                "898f45a4.6b32c8"
            ]
        ]
    },
    {
        "id": "898f45a4.6b32c8",
        "type": "debug",
        "z": "4391d02d.238c8",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1170,
        "y": 380,
        "wires": []
    },
    {
        "id": "57c31687.d8d628",
        "type": "inject",
        "z": "4391d02d.238c8",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "*/5 9-17 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 230,
        "y": 540,
        "wires": [
            [
                "ad109204.6381"
            ]
        ]
    },
    {
        "id": "ad109204.6381",
        "type": "function",
        "z": "4391d02d.238c8",
        "name": "",
        "func": "if (global.get (\"location\") == \"Casa\" && global.get (\"process\") == \"recall\") {\n    msg.payload = \"23, se ha perdido la conexión\";\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 480,
        "y": 540,
        "wires": [
            [
                "fc4b72db.d08c4"
            ]
        ]
    },
    {
        "id": "fc4b72db.d08c4",
        "type": "alexa-remote-routine",
        "z": "4391d02d.238c8",
        "name": "",
        "account": "5289daa5.51ddc4",
        "routineNode": {
            "type": "speak",
            "payload": {
                "type": "regular",
                "text": {
                    "type": "msg",
                    "value": "payload"
                },
                "devices": [
                    "G2A1A60304750BPX"
                ]
            }
        },
        "x": 720,
        "y": 540,
        "wires": [
            []
        ]
    },
    {
        "id": "3aaa1247.b9c58e",
        "type": "debug",
        "z": "64d34e70.fcce4",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 790,
        "y": 240,
        "wires": []
    },
    {
        "id": "2a8adfe0.6d951",
        "type": "alexa-remote-echo",
        "z": "64d34e70.fcce4",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "get",
            "value": {
                "what": "device",
                "device": {
                    "type": "str",
                    "value": "G2A1A60304750BPX"
                }
            }
        },
        "x": 510,
        "y": 280,
        "wires": [
            [
                "3aaa1247.b9c58e",
                "8415e7dc.35a9b8"
            ]
        ]
    },
    {
        "id": "8415e7dc.35a9b8",
        "type": "function",
        "z": "64d34e70.fcce4",
        "name": "",
        "func": "global.set (\"onlineEcho\", msg.payload.online);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 780,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "e74a6944.96b058",
        "type": "alexa-remote-smarthome",
        "z": "66ae481f.c36c48",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "a93da952-4d7f-446a-82b5-a18acc421354",
                    "action": "setBrightness",
                    "value": {
                        "type": "num",
                        "value": "100"
                    }
                },
                {
                    "entity": "a93da952-4d7f-446a-82b5-a18acc421354",
                    "action": "setColorTemperature",
                    "value": {
                        "type": "str",
                        "value": "daylight_white"
                    }
                }
            ]
        },
        "outputs": 1,
        "x": 1100,
        "y": 2560,
        "wires": [
            []
        ]
    },
    {
        "id": "1e9af46d.248e4c",
        "type": "function",
        "z": "5478817a.a9116",
        "name": "Localizar afuera",
        "func": "global.set(\"locationevent\", msg.payload.event.type);\nif (msg.payload.event.type == \"geofenceExit\") {\n    global.set(\"locationevent\", msg.payload.event.type);\n    global.set (\"location\", \"Afuera\");\n    return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 560,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "76f309c.e2a15f8",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "20:00",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "00 20 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 190,
        "y": 3900,
        "wires": [
            [
                "eab75ddc.53767"
            ]
        ]
    },
    {
        "id": "d67b04b8.4b3278",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "14:00",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "00 14 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 190,
        "y": 3860,
        "wires": [
            [
                "eab75ddc.53767"
            ]
        ]
    },
    {
        "id": "6e5f87f.65db278",
        "type": "catch",
        "z": "66ae481f.c36c48",
        "name": "",
        "scope": [
            "6f85d88c.1c3388",
            "62fa9473.da113c"
        ],
        "uncaught": false,
        "x": 1290,
        "y": 4080,
        "wires": [
            [
                "1949aeef.b37901"
            ]
        ]
    },
    {
        "id": "1949aeef.b37901",
        "type": "debug",
        "z": "66ae481f.c36c48",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1510,
        "y": 4080,
        "wires": []
    },
    {
        "id": "734e6f4d.c39be",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "1",
        "payloadType": "num",
        "x": 490,
        "y": 3880,
        "wires": [
            [
                "188b5bf1.2d2f14"
            ]
        ]
    },
    {
        "id": "e3df94f8.b843e8",
        "type": "twitter out",
        "z": "66ae481f.c36c48",
        "twitter": "a47ef347.5510c",
        "name": "Tweet",
        "x": 1050,
        "y": 360,
        "wires": []
    },
    {
        "id": "617ee50.2d0f21c",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "//Calcular media noche\nvar dateOnStart = new Date(global.get(\"timeNow\"));\nvar timestampOnstart = dateOnStart.toString();\ntimestampOnstart = timestampOnstart.substr(16,17);\ntimestampOnstart = timestampOnstart.substr(0,5);\nmsg.payload = \"Hoy me he tomado las medicinas a las \" + timestampOnstart + \"h. #estocolmosindrome\";\nreturn msg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 800,
        "y": 360,
        "wires": [
            [
                "e3df94f8.b843e8"
            ]
        ]
    },
    {
        "id": "f1e5068e.e5de28",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "//Calcular media noche\nvar dateOnStart = new Date(global.get(\"timeNow\"));\nvar timestampOnstart = dateOnStart.toString();\ntimestampOnstart = timestampOnstart.substr(16,17);\ntimestampOnstart = timestampOnstart.substr(0,5);\nmsg.payload = \"Hoy me he tomado las medicinas promocionales a las \" + timestampOnstart + \"h. #estocolmosindrome\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 800,
        "y": 400,
        "wires": [
            [
                "e3df94f8.b843e8"
            ]
        ]
    },
    {
        "id": "aae4ab4c.9efcc8",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "msg.payload = \"Hoy he tenido que tomar el medicamento promocional para poder salir del departamento :( #estocolmosindrome\";\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 800,
        "y": 440,
        "wires": [
            [
                "e3df94f8.b843e8"
            ]
        ]
    },
    {
        "id": "d0bd7bb3.385d68",
        "type": "twitter out",
        "z": "66ae481f.c36c48",
        "twitter": "a47ef347.5510c",
        "name": "Tweet",
        "x": 790,
        "y": 1140,
        "wires": []
    },
    {
        "id": "29f87953.17c126",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "//Calcular media noche\nvar dateOnStart = new Date(global.get(\"timeNow\"));\nvar timestampOnstart = dateOnStart.toString();\ntimestampOnstart = timestampOnstart.substr(16,17);\ntimestampOnstart = timestampOnstart.substr(0,5);\nmsg.payload = \"Hoy me he tomado un café a las \" + timestampOnstart + \"h. #estocolmosindrome\";\nreturn msg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 1060,
        "wires": [
            [
                "d0bd7bb3.385d68"
            ]
        ]
    },
    {
        "id": "e518874f.54c678",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "if (msg.payload == \"6\" || msg.payload == 6) {\n    global.set (\"doorRequest\", 0);\n}\nmsg.payload = \"Hoy la puerta me pidió tomar un café para salir, pero lo he cancelado. Esto me ha costado \" + global.get (\"lastPayment[0]\") + \" pesos. #estocolmosindrome\";\nreturn msg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 1140,
        "wires": [
            [
                "d0bd7bb3.385d68"
            ]
        ]
    },
    {
        "id": "72e04ae3.633154",
        "type": "twitter out",
        "z": "66ae481f.c36c48",
        "twitter": "a47ef347.5510c",
        "name": "Tweet",
        "x": 1290,
        "y": 3640,
        "wires": []
    },
    {
        "id": "cae422ed.90329",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "\nmsg.payload = \"Hoy he cancelado la alarma porque quería dormir mas haha. Esto me ha costado \" + global.get (\"lastPayment[0]\") + \" pesos. #estocolmosindrome\";\nreturn msg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1060,
        "y": 3640,
        "wires": [
            [
                "72e04ae3.633154"
            ]
        ]
    },
    {
        "id": "83eb5564.7b6238",
        "type": "twitter out",
        "z": "c2c0e0c1.0deb1",
        "twitter": "a47ef347.5510c",
        "name": "Tweet",
        "x": 1170,
        "y": 1220,
        "wires": []
    },
    {
        "id": "f8db9251.dec3b",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "//Calcular media noche\nvar dateOnStart = new Date(global.get(\"timeNow\"));\nvar timestampOnstart = dateOnStart.toString();\ntimestampOnstart = timestampOnstart.substr(16,17);\ntimestampOnstart = timestampOnstart.substr(0,5);\nmsg.payload = \"El día de hoy me he despertado a las \"+ timestampOnstart + \". #estocolmosindrome\";\nreturn msg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 960,
        "y": 1220,
        "wires": [
            [
                "83eb5564.7b6238"
            ]
        ]
    },
    {
        "id": "733d228e.5bd93c",
        "type": "twitter out",
        "z": "83fb4ff5.ce7c8",
        "twitter": "a47ef347.5510c",
        "name": "Tweet",
        "x": 1170,
        "y": 940,
        "wires": []
    },
    {
        "id": "8c57075e.99ab58",
        "type": "function",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "func": "if (msg.topic2 == \"Felicidad\") {\n    msg.payload = \"El día de hoy, la puerta me ha pedido que sonria para poder salir. Lo he logrado! #estocolmosindrome\";\n    return msg;\n}\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 960,
        "y": 940,
        "wires": [
            [
                "733d228e.5bd93c"
            ]
        ]
    },
    {
        "id": "af7230a2.591fb",
        "type": "function",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "func": "if (msg.topic2 != \"Felicidad\") {\n    msg.payload = \"La puerta no me dejo salir porque ha detectado que mi estado de animo es \" + msg.topic2 + \" y me ha cobrado \" + global.get (\"lastPayment[0]\") + \" pesos. #estocolmosindrome\";\n    return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 960,
        "y": 980,
        "wires": [
            [
                "733d228e.5bd93c"
            ]
        ]
    },
    {
        "id": "871f8964.1534a8",
        "type": "function",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "func": "\n\nmsg.payload = \"Para salir, la puerta me ha cobrado \" + global.get (\"lastPayment[0]\") + \" pesos. Dice que es porque la calidad de aire es muy buena y los espacios públicos son un privilegio, no un derecho. #estocolmosindrome\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1700,
        "y": 1320,
        "wires": [
            [
                "9f44f4bc.5c78a8"
            ]
        ]
    },
    {
        "id": "9f44f4bc.5c78a8",
        "type": "twitter out",
        "z": "83fb4ff5.ce7c8",
        "twitter": "a47ef347.5510c",
        "name": "Tweet",
        "x": 1910,
        "y": 1320,
        "wires": []
    },
    {
        "id": "e6f753e0.c2f5f",
        "type": "function",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "func": "msg.payload = \"Al salir del departamento, la puerta me ha dicho que la calidad del aire es mala. Que es mi culpa por mis habitos de comsumo energético. #estocolmosindrome\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1700,
        "y": 1360,
        "wires": [
            [
                "9f44f4bc.5c78a8"
            ]
        ]
    },
    {
        "id": "ef0809ca.c02ee8",
        "type": "comment",
        "z": "66ae481f.c36c48",
        "name": "Luces automaticas - cocina, lavamanos",
        "info": "",
        "x": 270,
        "y": 4460,
        "wires": []
    },
    {
        "id": "86def19.cc10b1",
        "type": "mqtt in",
        "z": "66ae481f.c36c48",
        "name": "",
        "topic": "hugo/se/lavamanos",
        "qos": "2",
        "datatype": "auto",
        "broker": "4c35078.987c1f8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "x": 210,
        "y": 4540,
        "wires": [
            [
                "80b095cd.3b1b08"
            ]
        ]
    },
    {
        "id": "326ca7a1.a1f198",
        "type": "switch",
        "z": "66ae481f.c36c48",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 790,
        "y": 4540,
        "wires": [
            [
                "7b5bd343.d9f05c"
            ],
            [
                "e80790ab.4b048"
            ]
        ]
    },
    {
        "id": "7b5bd343.d9f05c",
        "type": "alexa-remote-smarthome",
        "z": "66ae481f.c36c48",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "492dd824-2404-4f7c-bb48-451340049f4d",
                    "action": "turnOff"
                }
            ]
        },
        "outputs": 1,
        "x": 1100,
        "y": 4540,
        "wires": [
            []
        ]
    },
    {
        "id": "e80790ab.4b048",
        "type": "alexa-remote-smarthome",
        "z": "66ae481f.c36c48",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "492dd824-2404-4f7c-bb48-451340049f4d",
                    "action": "setBrightness",
                    "value": {
                        "type": "num",
                        "value": "50"
                    }
                }
            ]
        },
        "outputs": 1,
        "x": 1120,
        "y": 4600,
        "wires": [
            []
        ]
    },
    {
        "id": "80569bfa.4b1e48",
        "type": "mqtt in",
        "z": "66ae481f.c36c48",
        "name": "",
        "topic": "hugo/se/kitchen",
        "qos": "2",
        "datatype": "auto",
        "broker": "4c35078.987c1f8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "x": 200,
        "y": 4660,
        "wires": [
            [
                "1b4a5471.3a312c"
            ]
        ]
    },
    {
        "id": "d67443f.eb0d5c",
        "type": "switch",
        "z": "66ae481f.c36c48",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 790,
        "y": 4660,
        "wires": [
            [
                "e5b026d1.1dcee8"
            ],
            [
                "96d6f8fc.6d0588"
            ]
        ]
    },
    {
        "id": "e5b026d1.1dcee8",
        "type": "alexa-remote-smarthome",
        "z": "66ae481f.c36c48",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "cbed6c1b-6167-49f6-b133-740e4f63d464",
                    "action": "turnOff"
                }
            ]
        },
        "outputs": 1,
        "x": 1100,
        "y": 4660,
        "wires": [
            []
        ]
    },
    {
        "id": "96d6f8fc.6d0588",
        "type": "alexa-remote-smarthome",
        "z": "66ae481f.c36c48",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "cbed6c1b-6167-49f6-b133-740e4f63d464",
                    "action": "setBrightness",
                    "value": {
                        "type": "num",
                        "value": "100"
                    }
                }
            ]
        },
        "outputs": 1,
        "x": 1120,
        "y": 4720,
        "wires": [
            []
        ]
    },
    {
        "id": "80b095cd.3b1b08",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "\nif (global.get (\"location\") ==\"Casa\" && global.get (\"isAwakenCount\")> 0) {\n    if (msg.payload == \"1\" && global.get (\"focolavamanosControl\") == 0) {\n        global.set (\"focolavamanosControl\", 1);\n        return msg;\n    } else if (msg.payload == \"0\" && global.get (\"focolavamanosControl\") == 1) {\n        global.set (\"focolavamanosControl\", 0);\n        return msg;\n    }\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 4540,
        "wires": [
            [
                "326ca7a1.a1f198"
            ]
        ]
    },
    {
        "id": "1b4a5471.3a312c",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "\nif (global.get (\"location\") ==\"Casa\" && global.get (\"isAwakenCount\")> 0) {\n    if (msg.payload == \"1\" && global.get (\"focococinaControl\") == 0) {\n        global.set (\"focococinaControl\", 1);\n        return msg;\n    } else if (msg.payload == \"0\" && global.get (\"focococinaControl\") == 1) {\n        global.set (\"focococinaControl\", 0);\n        return msg;\n    }\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 480,
        "y": 4660,
        "wires": [
            [
                "d67443f.eb0d5c"
            ]
        ]
    },
    {
        "id": "4ad5fa8d.9b4544",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "00:01h",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "01 00 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 220,
        "y": 2780,
        "wires": [
            [
                "2bf71d2e.fa2a92"
            ]
        ]
    },
    {
        "id": "2bf71d2e.fa2a92",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "Luces descanso 50%",
        "func": "if (global.get (\"isAwaken\") == 1) {\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 2780,
        "wires": [
            [
                "69b34f76.8acd2"
            ]
        ]
    },
    {
        "id": "b81267b2.a94ea8",
        "type": "alexa-remote-smarthome",
        "z": "66ae481f.c36c48",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "4801ec0c-27df-4f9c-aea9-39146080d320",
                    "action": "setColorTemperature",
                    "value": {
                        "type": "str",
                        "value": "white"
                    }
                },
                {
                    "entity": "4801ec0c-27df-4f9c-aea9-39146080d320",
                    "action": "setBrightness",
                    "value": {
                        "type": "num",
                        "value": "50"
                    }
                }
            ]
        },
        "outputs": 1,
        "x": 1340,
        "y": 2780,
        "wires": [
            []
        ]
    },
    {
        "id": "7ba58fd1.05d39",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "01:00h",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "00 01 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 220,
        "y": 2840,
        "wires": [
            [
                "195a5db6.c24dc2"
            ]
        ]
    },
    {
        "id": "195a5db6.c24dc2",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "Luces descanso 40%",
        "func": "if (global.get (\"isAwaken\") == 1) {\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 2840,
        "wires": [
            [
                "b476ab8d.287f98"
            ]
        ]
    },
    {
        "id": "e9430717.908508",
        "type": "alexa-remote-smarthome",
        "z": "66ae481f.c36c48",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "4801ec0c-27df-4f9c-aea9-39146080d320",
                    "action": "setColorTemperature",
                    "value": {
                        "type": "str",
                        "value": "white"
                    }
                },
                {
                    "entity": "4801ec0c-27df-4f9c-aea9-39146080d320",
                    "action": "setBrightness",
                    "value": {
                        "type": "num",
                        "value": "40"
                    }
                }
            ]
        },
        "outputs": 1,
        "x": 1340,
        "y": 2840,
        "wires": [
            []
        ]
    },
    {
        "id": "4beb1778.9880a8",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "02:00h",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "00 02 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 220,
        "y": 2900,
        "wires": [
            [
                "7a0abbb1.cbea64"
            ]
        ]
    },
    {
        "id": "7a0abbb1.cbea64",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "Luces descanso 30%",
        "func": "if (global.get (\"isAwaken\") == 1) {\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 2900,
        "wires": [
            [
                "dcb35687.2957c8"
            ]
        ]
    },
    {
        "id": "3bef2614.e1354a",
        "type": "alexa-remote-smarthome",
        "z": "66ae481f.c36c48",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "4801ec0c-27df-4f9c-aea9-39146080d320",
                    "action": "setColorTemperature",
                    "value": {
                        "type": "str",
                        "value": "white"
                    }
                },
                {
                    "entity": "4801ec0c-27df-4f9c-aea9-39146080d320",
                    "action": "setBrightness",
                    "value": {
                        "type": "num",
                        "value": "30"
                    }
                }
            ]
        },
        "outputs": 1,
        "x": 1340,
        "y": 2900,
        "wires": [
            []
        ]
    },
    {
        "id": "6ff7360d.d6dc88",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "03:00h",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "00 03 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 220,
        "y": 2960,
        "wires": [
            [
                "eb9ada50.e54888"
            ]
        ]
    },
    {
        "id": "eb9ada50.e54888",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "Luces descanso 20%",
        "func": "if (global.get (\"isAwaken\") == 1) {\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 2960,
        "wires": [
            [
                "ed6519ee.652f18"
            ]
        ]
    },
    {
        "id": "17283927.7406a7",
        "type": "alexa-remote-smarthome",
        "z": "66ae481f.c36c48",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "4801ec0c-27df-4f9c-aea9-39146080d320",
                    "action": "setColorTemperature",
                    "value": {
                        "type": "str",
                        "value": "white"
                    }
                },
                {
                    "entity": "4801ec0c-27df-4f9c-aea9-39146080d320",
                    "action": "setBrightness",
                    "value": {
                        "type": "num",
                        "value": "20"
                    }
                }
            ]
        },
        "outputs": 1,
        "x": 1340,
        "y": 2960,
        "wires": [
            []
        ]
    },
    {
        "id": "69b34f76.8acd2",
        "type": "alexa-remote-smarthome",
        "z": "66ae481f.c36c48",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "4801ec0c-27df-4f9c-aea9-39146080d320",
                    "action": "setColor",
                    "value": {
                        "type": "str",
                        "value": "red"
                    }
                },
                {
                    "entity": "4801ec0c-27df-4f9c-aea9-39146080d320",
                    "action": "setBrightness",
                    "value": {
                        "type": "num",
                        "value": "100"
                    }
                }
            ]
        },
        "outputs": 1,
        "x": 840,
        "y": 2780,
        "wires": [
            [
                "1baba6d4.469dd9"
            ]
        ]
    },
    {
        "id": "1baba6d4.469dd9",
        "type": "delay",
        "z": "66ae481f.c36c48",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1060,
        "y": 2780,
        "wires": [
            [
                "b81267b2.a94ea8"
            ]
        ]
    },
    {
        "id": "b476ab8d.287f98",
        "type": "alexa-remote-smarthome",
        "z": "66ae481f.c36c48",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "4801ec0c-27df-4f9c-aea9-39146080d320",
                    "action": "setBrightness",
                    "value": {
                        "type": "num",
                        "value": "100"
                    }
                },
                {
                    "entity": "4801ec0c-27df-4f9c-aea9-39146080d320",
                    "action": "setColor",
                    "value": {
                        "type": "str",
                        "value": "red"
                    }
                }
            ]
        },
        "outputs": 1,
        "x": 840,
        "y": 2840,
        "wires": [
            [
                "2b46b70a.0c9468"
            ]
        ]
    },
    {
        "id": "2b46b70a.0c9468",
        "type": "delay",
        "z": "66ae481f.c36c48",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1060,
        "y": 2840,
        "wires": [
            [
                "e9430717.908508"
            ]
        ]
    },
    {
        "id": "dcb35687.2957c8",
        "type": "alexa-remote-smarthome",
        "z": "66ae481f.c36c48",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "4801ec0c-27df-4f9c-aea9-39146080d320",
                    "action": "setBrightness",
                    "value": {
                        "type": "num",
                        "value": "100"
                    }
                },
                {
                    "entity": "4801ec0c-27df-4f9c-aea9-39146080d320",
                    "action": "setColor",
                    "value": {
                        "type": "str",
                        "value": "red"
                    }
                }
            ]
        },
        "outputs": 1,
        "x": 840,
        "y": 2900,
        "wires": [
            [
                "c6ff0862.4e2538"
            ]
        ]
    },
    {
        "id": "c6ff0862.4e2538",
        "type": "delay",
        "z": "66ae481f.c36c48",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1060,
        "y": 2900,
        "wires": [
            [
                "3bef2614.e1354a"
            ]
        ]
    },
    {
        "id": "ed6519ee.652f18",
        "type": "alexa-remote-smarthome",
        "z": "66ae481f.c36c48",
        "name": "",
        "account": "5289daa5.51ddc4",
        "config": {
            "option": "action",
            "value": [
                {
                    "entity": "4801ec0c-27df-4f9c-aea9-39146080d320",
                    "action": "setBrightness",
                    "value": {
                        "type": "num",
                        "value": "100"
                    }
                },
                {
                    "entity": "4801ec0c-27df-4f9c-aea9-39146080d320",
                    "action": "setColor",
                    "value": {
                        "type": "str",
                        "value": "red"
                    }
                }
            ]
        },
        "outputs": 1,
        "x": 840,
        "y": 2960,
        "wires": [
            [
                "d56161fe.2169a"
            ]
        ]
    },
    {
        "id": "d56161fe.2169a",
        "type": "delay",
        "z": "66ae481f.c36c48",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1060,
        "y": 2960,
        "wires": [
            [
                "17283927.7406a7"
            ]
        ]
    },
    {
        "id": "dbdff2da.5f641",
        "type": "alexa-remote-routine",
        "z": "66ae481f.c36c48",
        "name": "",
        "account": "5289daa5.51ddc4",
        "routineNode": {
            "type": "sound",
            "payload": {
                "sound": {
                    "type": "str",
                    "value": "clock_01"
                },
                "devices": [
                    "G2A1A60304750BPX"
                ]
            }
        },
        "x": 820,
        "y": 2200,
        "wires": [
            []
        ]
    },
    {
        "id": "a4b701d0.168b",
        "type": "alexa-remote-routine",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "account": "5289daa5.51ddc4",
        "routineNode": {
            "type": "sound",
            "payload": {
                "sound": {
                    "type": "str",
                    "value": "camera_01"
                },
                "devices": [
                    "G2A1A60304750BPX"
                ]
            }
        },
        "x": 1200,
        "y": 680,
        "wires": [
            []
        ]
    },
    {
        "id": "1ebb51bb.53070e",
        "type": "delay",
        "z": "66ae481f.c36c48",
        "name": "",
        "pauseType": "delay",
        "timeout": "15",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 800,
        "y": 4140,
        "wires": [
            [
                "bc17ee8e.a0346"
            ]
        ]
    },
    {
        "id": "908d4f6c.01f38",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "6h",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "21600",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 170,
        "y": 3700,
        "wires": [
            [
                "84b109c9.6a3178"
            ]
        ]
    },
    {
        "id": "84b109c9.6a3178",
        "type": "function",
        "z": "66ae481f.c36c48",
        "name": "",
        "func": "if (global.get (\"wakeUp\") == 1 && global.get (\"alarmtTweet\") == 0) {\n    msg.payload = \"Hoy, el departamento me ha cobrado un total de \" + global.get (\"alarmCount\") + \" pesos debido al tiempo que tardé en levantarme despues de que sonara la alarma. #estocolmosindrome\";\n    global.set (\"alarmtTweet\", 1);\n    return msg;    \n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 3700,
        "wires": [
            [
                "92418b34.4bc408"
            ]
        ]
    },
    {
        "id": "92418b34.4bc408",
        "type": "twitter out",
        "z": "66ae481f.c36c48",
        "twitter": "a47ef347.5510c",
        "name": "Tweet",
        "x": 810,
        "y": 3700,
        "wires": []
    },
    {
        "id": "a5df90ac.c3cf",
        "type": "inject",
        "z": "66ae481f.c36c48",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 3740,
        "wires": [
            [
                "84b109c9.6a3178"
            ]
        ]
    },
    {
        "id": "e6c7e610.df73d8",
        "type": "inject",
        "z": "64d34e70.fcce4",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 400,
        "wires": [
            [
                "2a8adfe0.6d951",
                "a7fe4c8.facfab",
                "8b193dbe.8c93a",
                "193e1ad2.d09015"
            ]
        ]
    },
    {
        "id": "60ee73ff.503e7c",
        "type": "ui_template",
        "z": "c2c0e0c1.0deb1",
        "group": "68c6d3dd.905fec",
        "name": "Twitter",
        "order": 1,
        "width": 6,
        "height": 7,
        "format": "<a class=\"twitter-timeline\" data-lang=\"es\" data-theme=\"dark\" href=\"https://twitter.com/estocolmo_23?ref_src=twsrc%5Etfw\"></a> <script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "x": 130,
        "y": 3120,
        "wires": [
            []
        ]
    },
    {
        "id": "a8818db4.61fd5",
        "type": "ui_text",
        "z": "c2c0e0c1.0deb1",
        "group": "68c6d3dd.905fec",
        "order": 2,
        "width": 6,
        "height": "2",
        "name": "",
        "label": "{{msg.payload}}",
        "format": "",
        "layout": "col-center",
        "x": 1010,
        "y": 2720,
        "wires": []
    },
    {
        "id": "ec21a0f3.702a",
        "type": "inject",
        "z": "c2c0e0c1.0deb1",
        "name": "1h",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "3600",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 130,
        "y": 2720,
        "wires": [
            [
                "e3574ab6.df3af8",
                "5f21ad07.748834",
                "ff2acb86.5e5e48",
                "1092a201.845d7e"
            ]
        ]
    },
    {
        "id": "12fac27f.7564ee",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "Hora despertar",
        "func": "//Calcular media noche\nvar dateOnStart = new Date(global.get(\"firstDetect\"));\nif (dateOnStart > 0) {\n    var timestampOnstart = dateOnStart.toString();\n    timestampOnstart = timestampOnstart.substr(16,17);\n    timestampOnstart = timestampOnstart.substr(0,5);\n    msg.payload = \"23 se ha despertado a las \" + timestampOnstart + \"h.\";\n    if (global.get (\"alarmCount\")> 0) {\n        //msg.payload = msg.payload + \" Ha pagado \" + global.get (\"alarmCount\") + \" pesos por no despertar a tiempo.\";\n    }\n    msg.payload = msg.payload + \" Anoche se durmió a las \" + global.get (\"desveloAnocheHora\");\n    //msg.payload = msg.payload + \" Anoche se durmió a las \" + global.get (\"desveloAnocheHora\") + \", lo que le costó \" + global.get (\"desveloAnoche\") + \" pesos.\";\n    return msg;\n} else {\n    msg.payload = \"23 aún no despierta.\";\n    if (global.get (\"alarmCount\")> 0) {\n        //msg.payload = msg.payload + \" Ha pagado \" + global.get (\"alarmCount\") + \" pesos por no despertar a tiempo\";\n    }\n   msg.payload = msg.payload + \" Anoche se durmió a las \" + global.get (\"desveloAnocheHora\");\n    //msg.payload = msg.payload + \" Anoche se durmió a las \" + global.get (\"desveloAnocheHora\") + \", lo que le costó \" + global.get (\"desveloAnoche\") + \" pesos.\";\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 740,
        "y": 2720,
        "wires": [
            [
                "a8818db4.61fd5"
            ]
        ]
    },
    {
        "id": "e3574ab6.df3af8",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "Anuncio expo",
        "func": "\n\nmsg.payload = \"Síndrome de Estocolmo está en exihibición en el Museo de San Ildefonso en la expo Creación en Movimiento del 10 de febrero al 27 de marzo de jueves a domingo, 11 a 17h.\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 440,
        "y": 2780,
        "wires": [
            [
                "59c5c1cd.da9bb"
            ]
        ]
    },
    {
        "id": "59c5c1cd.da9bb",
        "type": "ui_text",
        "z": "c2c0e0c1.0deb1",
        "group": "68c6d3dd.905fec",
        "order": 3,
        "width": 6,
        "height": "2",
        "name": "",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "x": 710,
        "y": 2780,
        "wires": []
    },
    {
        "id": "2a08e8f6.d2a718",
        "type": "twitter in",
        "z": "c2c0e0c1.0deb1",
        "twitter": "a47ef347.5510c",
        "tags": "#estocolmosindrome",
        "user": "false",
        "name": "",
        "inputs": 0,
        "x": 110,
        "y": 2920,
        "wires": [
            [
                "aceadc8c.c01bf",
                "f46048ab.134bc8"
            ]
        ]
    },
    {
        "id": "ecedf3bc.853cb",
        "type": "ui_text",
        "z": "c2c0e0c1.0deb1",
        "group": "68c6d3dd.905fec",
        "order": 4,
        "width": 6,
        "height": 3,
        "name": "",
        "label": "{{msg.payload}}",
        "format": "",
        "layout": "col-center",
        "x": 710,
        "y": 2920,
        "wires": []
    },
    {
        "id": "aceadc8c.c01bf",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "if (msg.topic != \"tweets/estocolmo_23\") {\n    msg.payload = \"El usuario \" + msg.tweet.user.screen_name + \" ha tuiteado: \" + msg.payload + \" Tiene \" + msg.tweet.user.followers_count + \" seguidores, ha hecho \" + msg.tweet.user.statuses_count + \" tuits. Reporta su ubicación en \" + msg.tweet.user.location;\n    return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 420,
        "y": 2920,
        "wires": [
            [
                "ecedf3bc.853cb"
            ]
        ]
    },
    {
        "id": "d98dba66.c8e608",
        "type": "comment",
        "z": "c2c0e0c1.0deb1",
        "name": "Ultimo pago",
        "info": "",
        "x": 430,
        "y": 600,
        "wires": []
    },
    {
        "id": "caf4285d.35b3a8",
        "type": "alexa-remote-routine",
        "z": "66ae481f.c36c48",
        "name": "",
        "account": "5289daa5.51ddc4",
        "routineNode": {
            "type": "smarthome",
            "payload": {
                "entity": "70e4dfab-21a3-472a-8ead-bd38cd6220cc",
                "action": "turnOff"
            }
        },
        "x": 840,
        "y": 1340,
        "wires": [
            []
        ]
    },
    {
        "id": "886ba3aa.b9501",
        "type": "mysql",
        "z": "c2c0e0c1.0deb1",
        "mydb": "1a27214b.e39c3f",
        "name": "",
        "x": 750,
        "y": 2480,
        "wires": [
            [
                "912ecfa7.f32a4"
            ]
        ]
    },
    {
        "id": "f099505e.6e828",
        "type": "inject",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 2480,
        "wires": [
            [
                "9541d9db.d0eaf8"
            ]
        ]
    },
    {
        "id": "9541d9db.d0eaf8",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "Costo Alarma",
        "func": "//msg.topic = \"SELECT sum(charge) FROM payments WHERE fecha >= CURRENT_DATE - INTERVAL 1 DAY ORDER BY device = 'Alarma';\";\nmsg.topic = \"SELECT sum(charge) FROM payments WHERE fecha >= CURRENT_DATE ORDER BY device = 'Alarma';\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 440,
        "y": 2480,
        "wires": [
            [
                "886ba3aa.b9501"
            ]
        ]
    },
    {
        "id": "cee82635.bbd1f8",
        "type": "mysql",
        "z": "c2c0e0c1.0deb1",
        "mydb": "1a27214b.e39c3f",
        "name": "",
        "x": 750,
        "y": 2600,
        "wires": [
            [
                "d3dfa705.4d0128"
            ]
        ]
    },
    {
        "id": "f2ec3706.294c28",
        "type": "inject",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 2600,
        "wires": [
            [
                "ff2acb86.5e5e48"
            ]
        ]
    },
    {
        "id": "ff2acb86.5e5e48",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "Hora dormido",
        "func": "\nmsg.topic = \"SELECT max(fecha) FROM payments WHERE device = 'Desvelo';\";\n//msg.topic =\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 440,
        "y": 2600,
        "wires": [
            [
                "cee82635.bbd1f8"
            ]
        ]
    },
    {
        "id": "1d440837.8e6ef8",
        "type": "mysql",
        "z": "c2c0e0c1.0deb1",
        "mydb": "1a27214b.e39c3f",
        "name": "",
        "x": 750,
        "y": 2540,
        "wires": [
            [
                "3cc90bf.eba45f4"
            ]
        ]
    },
    {
        "id": "b8077f2f.b42eb",
        "type": "inject",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 2540,
        "wires": [
            [
                "19f36d7a.469e63"
            ]
        ]
    },
    {
        "id": "19f36d7a.469e63",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "Costo Desvelo",
        "func": "\nmsg.topic = \"SELECT sum(charge) FROM payments WHERE fecha >= CURRENT_DATE ORDER BY device = 'Desvelo';\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 440,
        "y": 2540,
        "wires": [
            [
                "1d440837.8e6ef8"
            ]
        ]
    },
    {
        "id": "3cc90bf.eba45f4",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "global.set (\"desveloAnoche\", msg.payload[0][\"sum(charge)\"]);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 980,
        "y": 2540,
        "wires": [
            []
        ]
    },
    {
        "id": "d3dfa705.4d0128",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "var timestampOnstart = msg.payload[0][\"max(fecha)\"];\ntimestampOnstart = timestampOnstart.toString();\ntimestampOnstart = timestampOnstart.substr(16,5);\n//timestampOnstart = timestampOnstart.substr(1,6);\nglobal.set (\"desveloAnocheHora\", timestampOnstart);\nreturn msg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 980,
        "y": 2600,
        "wires": [
            []
        ]
    },
    {
        "id": "35b39676.40456a",
        "type": "comment",
        "z": "c2c0e0c1.0deb1",
        "name": "Cargos from DB",
        "info": "",
        "x": 160,
        "y": 2440,
        "wires": []
    },
    {
        "id": "c688dcc2.9d5c",
        "type": "comment",
        "z": "c2c0e0c1.0deb1",
        "name": "Info",
        "info": "",
        "x": 130,
        "y": 2680,
        "wires": []
    },
    {
        "id": "912ecfa7.f32a4",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "global.set (\"alarmCount\", msg.payload[0][\"sum(charge)\"]);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 980,
        "y": 2480,
        "wires": [
            []
        ]
    },
    {
        "id": "8bf56408.aa2ec8",
        "type": "ui_gauge",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "group": "495b2837.af3328",
        "order": 4,
        "width": "0",
        "height": "0",
        "gtype": "wave",
        "title": "Seguridad de detección de rostro",
        "label": "%",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 800,
        "y": 220,
        "wires": []
    },
    {
        "id": "5f21ad07.748834",
        "type": "function",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "func": "\nmsg.payload = \"Activaciones todos los días a las 2:00h, 15:30h y 20:00h. A esa hora la plataforma regalará 10 clics para controlar el departamento a los primeros usuarios en llegar a la plataforma.\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 420,
        "y": 2840,
        "wires": [
            [
                "ecedf3bc.853cb"
            ]
        ]
    },
    {
        "id": "f79ae638.45afa8",
        "type": "comment",
        "z": "2e3f68c7.2f3ff",
        "name": "Activación",
        "info": "",
        "x": 2000,
        "y": 920,
        "wires": []
    },
    {
        "id": "59917f89.dae79",
        "type": "inject",
        "z": "2e3f68c7.2f3ff",
        "name": "2:00h",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "00 02 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1990,
        "y": 980,
        "wires": [
            [
                "3be52349.c7af6c"
            ]
        ]
    },
    {
        "id": "1fefc96d.bb8207",
        "type": "inject",
        "z": "2e3f68c7.2f3ff",
        "name": "15:30h",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "30 15 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 2000,
        "y": 1020,
        "wires": [
            [
                "3be52349.c7af6c"
            ]
        ]
    },
    {
        "id": "3be52349.c7af6c",
        "type": "function",
        "z": "2e3f68c7.2f3ff",
        "name": "",
        "func": "global.set (\"chances\",10);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2260,
        "y": 980,
        "wires": [
            []
        ]
    },
    {
        "id": "17e4e428.81a72c",
        "type": "inject",
        "z": "2e3f68c7.2f3ff",
        "name": "20:00h",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "00 20 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 2000,
        "y": 1060,
        "wires": [
            [
                "3be52349.c7af6c"
            ]
        ]
    },
    {
        "id": "4b6d3c89.17e574",
        "type": "delay",
        "z": "83fb4ff5.ce7c8",
        "name": "",
        "pauseType": "delay",
        "timeout": "10",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 250,
        "y": 360,
        "wires": [
            [
                "77f837bd.bd0688"
            ]
        ]
    },
    {
        "id": "1092a201.845d7e",
        "type": "delay",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 420,
        "y": 2720,
        "wires": [
            [
                "12fac27f.7564ee"
            ]
        ]
    },
    {
        "id": "f46048ab.134bc8",
        "type": "debug",
        "z": "c2c0e0c1.0deb1",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 410,
        "y": 2960,
        "wires": []
    }
]
